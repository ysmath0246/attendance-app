(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();function bm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var fp={exports:{}},jo={},dp={exports:{}},Ie={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var pp;function Xy(){if(pp)return Ie;pp=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),R=Symbol.iterator;function z(L){return L===null||typeof L!="object"?null:(L=R&&L[R]||L["@@iterator"],typeof L=="function"?L:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,Z={};function U(L,j,he){this.props=L,this.context=j,this.refs=Z,this.updater=he||q}U.prototype.isReactComponent={},U.prototype.setState=function(L,j){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,j,"setState")},U.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function Ee(){}Ee.prototype=U.prototype;function ge(L,j,he){this.props=L,this.context=j,this.refs=Z,this.updater=he||q}var ke=ge.prototype=new Ee;ke.constructor=ge,J(ke,U.prototype),ke.isPureReactComponent=!0;var ve=Array.isArray,Qe=Object.prototype.hasOwnProperty,Le={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function S(L,j,he){var Ce,xe={},Te=null,Oe=null;if(j!=null)for(Ce in j.ref!==void 0&&(Oe=j.ref),j.key!==void 0&&(Te=""+j.key),j)Qe.call(j,Ce)&&!N.hasOwnProperty(Ce)&&(xe[Ce]=j[Ce]);var V=arguments.length-2;if(V===1)xe.children=he;else if(1<V){for(var Y=Array(V),se=0;se<V;se++)Y[se]=arguments[se+2];xe.children=Y}if(L&&L.defaultProps)for(Ce in V=L.defaultProps,V)xe[Ce]===void 0&&(xe[Ce]=V[Ce]);return{$$typeof:i,type:L,key:Te,ref:Oe,props:xe,_owner:Le.current}}function x(L,j){return{$$typeof:i,type:L.type,key:j,ref:L.ref,props:L.props,_owner:L._owner}}function T(L){return typeof L=="object"&&L!==null&&L.$$typeof===i}function D(L){var j={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(he){return j[he]})}var A=/\/+/g;function E(L,j){return typeof L=="object"&&L!==null&&L.key!=null?D(""+L.key):j.toString(36)}function Ke(L,j,he,Ce,xe){var Te=typeof L;(Te==="undefined"||Te==="boolean")&&(L=null);var Oe=!1;if(L===null)Oe=!0;else switch(Te){case"string":case"number":Oe=!0;break;case"object":switch(L.$$typeof){case i:case e:Oe=!0}}if(Oe)return Oe=L,xe=xe(Oe),L=Ce===""?"."+E(Oe,0):Ce,ve(xe)?(he="",L!=null&&(he=L.replace(A,"$&/")+"/"),Ke(xe,j,he,"",function(se){return se})):xe!=null&&(T(xe)&&(xe=x(xe,he+(!xe.key||Oe&&Oe.key===xe.key?"":(""+xe.key).replace(A,"$&/")+"/")+L)),j.push(xe)),1;if(Oe=0,Ce=Ce===""?".":Ce+":",ve(L))for(var V=0;V<L.length;V++){Te=L[V];var Y=Ce+E(Te,V);Oe+=Ke(Te,j,he,Y,xe)}else if(Y=z(L),typeof Y=="function")for(L=Y.call(L),V=0;!(Te=L.next()).done;)Te=Te.value,Y=Ce+E(Te,V++),Oe+=Ke(Te,j,he,Y,xe);else if(Te==="object")throw j=String(L),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return Oe}function ft(L,j,he){if(L==null)return L;var Ce=[],xe=0;return Ke(L,Ce,"","",function(Te){return j.call(he,Te,xe++)}),Ce}function dt(L){if(L._status===-1){var j=L._result;j=j(),j.then(function(he){(L._status===0||L._status===-1)&&(L._status=1,L._result=he)},function(he){(L._status===0||L._status===-1)&&(L._status=2,L._result=he)}),L._status===-1&&(L._status=0,L._result=j)}if(L._status===1)return L._result.default;throw L._result}var Ue={current:null},te={transition:null},fe={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:te,ReactCurrentOwner:Le};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Ie.Children={map:ft,forEach:function(L,j,he){ft(L,function(){j.apply(this,arguments)},he)},count:function(L){var j=0;return ft(L,function(){j++}),j},toArray:function(L){return ft(L,function(j){return j})||[]},only:function(L){if(!T(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ie.Component=U,Ie.Fragment=n,Ie.Profiler=a,Ie.PureComponent=ge,Ie.StrictMode=s,Ie.Suspense=v,Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,Ie.act=ne,Ie.cloneElement=function(L,j,he){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ce=J({},L.props),xe=L.key,Te=L.ref,Oe=L._owner;if(j!=null){if(j.ref!==void 0&&(Te=j.ref,Oe=Le.current),j.key!==void 0&&(xe=""+j.key),L.type&&L.type.defaultProps)var V=L.type.defaultProps;for(Y in j)Qe.call(j,Y)&&!N.hasOwnProperty(Y)&&(Ce[Y]=j[Y]===void 0&&V!==void 0?V[Y]:j[Y])}var Y=arguments.length-2;if(Y===1)Ce.children=he;else if(1<Y){V=Array(Y);for(var se=0;se<Y;se++)V[se]=arguments[se+2];Ce.children=V}return{$$typeof:i,type:L.type,key:xe,ref:Te,props:Ce,_owner:Oe}},Ie.createContext=function(L){return L={$$typeof:f,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:c,_context:L},L.Consumer=L},Ie.createElement=S,Ie.createFactory=function(L){var j=S.bind(null,L);return j.type=L,j},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(L){return{$$typeof:g,render:L}},Ie.isValidElement=T,Ie.lazy=function(L){return{$$typeof:k,_payload:{_status:-1,_result:L},_init:dt}},Ie.memo=function(L,j){return{$$typeof:w,type:L,compare:j===void 0?null:j}},Ie.startTransition=function(L){var j=te.transition;te.transition={};try{L()}finally{te.transition=j}},Ie.unstable_act=ne,Ie.useCallback=function(L,j){return Ue.current.useCallback(L,j)},Ie.useContext=function(L){return Ue.current.useContext(L)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(L){return Ue.current.useDeferredValue(L)},Ie.useEffect=function(L,j){return Ue.current.useEffect(L,j)},Ie.useId=function(){return Ue.current.useId()},Ie.useImperativeHandle=function(L,j,he){return Ue.current.useImperativeHandle(L,j,he)},Ie.useInsertionEffect=function(L,j){return Ue.current.useInsertionEffect(L,j)},Ie.useLayoutEffect=function(L,j){return Ue.current.useLayoutEffect(L,j)},Ie.useMemo=function(L,j){return Ue.current.useMemo(L,j)},Ie.useReducer=function(L,j,he){return Ue.current.useReducer(L,j,he)},Ie.useRef=function(L){return Ue.current.useRef(L)},Ie.useState=function(L){return Ue.current.useState(L)},Ie.useSyncExternalStore=function(L,j,he){return Ue.current.useSyncExternalStore(L,j,he)},Ie.useTransition=function(){return Ue.current.useTransition()},Ie.version="18.3.1",Ie}var mp;function vh(){return mp||(mp=1,dp.exports=Xy()),dp.exports}/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var gp;function Jy(){if(gp)return jo;gp=1;var i=vh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(g,v,w){var k,R={},z=null,q=null;w!==void 0&&(z=""+w),v.key!==void 0&&(z=""+v.key),v.ref!==void 0&&(q=v.ref);for(k in v)s.call(v,k)&&!c.hasOwnProperty(k)&&(R[k]=v[k]);if(g&&g.defaultProps)for(k in v=g.defaultProps,v)R[k]===void 0&&(R[k]=v[k]);return{$$typeof:e,type:g,key:z,ref:q,props:R,_owner:a.current}}return jo.Fragment=n,jo.jsx=f,jo.jsxs=f,jo}var yp;function Yy(){return yp||(yp=1,fp.exports=Jy()),fp.exports}var Q=Yy(),je=vh();const Zy=bm(je);var Il={},Uc={exports:{}},tn={},vp={exports:{}},bp={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var wp;function ev(){return wp||(wp=1,function(i){function e(te,fe){var ne=te.length;te.push(fe);e:for(;0<ne;){var L=ne-1>>>1,j=te[L];if(0<a(j,fe))te[L]=fe,te[ne]=j,ne=L;else break e}}function n(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var fe=te[0],ne=te.pop();if(ne!==fe){te[0]=ne;e:for(var L=0,j=te.length,he=j>>>1;L<he;){var Ce=2*(L+1)-1,xe=te[Ce],Te=Ce+1,Oe=te[Te];if(0>a(xe,ne))Te<j&&0>a(Oe,xe)?(te[L]=Oe,te[Te]=ne,L=Te):(te[L]=xe,te[Ce]=ne,L=Ce);else if(Te<j&&0>a(Oe,ne))te[L]=Oe,te[Te]=ne,L=Te;else break e}}return fe}function a(te,fe){var ne=te.sortIndex-fe.sortIndex;return ne!==0?ne:te.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();i.unstable_now=function(){return f.now()-g}}var v=[],w=[],k=1,R=null,z=3,q=!1,J=!1,Z=!1,U=typeof setTimeout=="function"?setTimeout:null,Ee=typeof clearTimeout=="function"?clearTimeout:null,ge=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ke(te){for(var fe=n(w);fe!==null;){if(fe.callback===null)s(w);else if(fe.startTime<=te)s(w),fe.sortIndex=fe.expirationTime,e(v,fe);else break;fe=n(w)}}function ve(te){if(Z=!1,ke(te),!J)if(n(v)!==null)J=!0,dt(Qe);else{var fe=n(w);fe!==null&&Ue(ve,fe.startTime-te)}}function Qe(te,fe){J=!1,Z&&(Z=!1,Ee(S),S=-1),q=!0;var ne=z;try{for(ke(fe),R=n(v);R!==null&&(!(R.expirationTime>fe)||te&&!D());){var L=R.callback;if(typeof L=="function"){R.callback=null,z=R.priorityLevel;var j=L(R.expirationTime<=fe);fe=i.unstable_now(),typeof j=="function"?R.callback=j:R===n(v)&&s(v),ke(fe)}else s(v);R=n(v)}if(R!==null)var he=!0;else{var Ce=n(w);Ce!==null&&Ue(ve,Ce.startTime-fe),he=!1}return he}finally{R=null,z=ne,q=!1}}var Le=!1,N=null,S=-1,x=5,T=-1;function D(){return!(i.unstable_now()-T<x)}function A(){if(N!==null){var te=i.unstable_now();T=te;var fe=!0;try{fe=N(!0,te)}finally{fe?E():(Le=!1,N=null)}}else Le=!1}var E;if(typeof ge=="function")E=function(){ge(A)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,ft=Ke.port2;Ke.port1.onmessage=A,E=function(){ft.postMessage(null)}}else E=function(){U(A,0)};function dt(te){N=te,Le||(Le=!0,E())}function Ue(te,fe){S=U(function(){te(i.unstable_now())},fe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(te){te.callback=null},i.unstable_continueExecution=function(){J||q||(J=!0,dt(Qe))},i.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<te?Math.floor(1e3/te):5},i.unstable_getCurrentPriorityLevel=function(){return z},i.unstable_getFirstCallbackNode=function(){return n(v)},i.unstable_next=function(te){switch(z){case 1:case 2:case 3:var fe=3;break;default:fe=z}var ne=z;z=fe;try{return te()}finally{z=ne}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(te,fe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ne=z;z=te;try{return fe()}finally{z=ne}},i.unstable_scheduleCallback=function(te,fe,ne){var L=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?L+ne:L):ne=L,te){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=ne+j,te={id:k++,callback:fe,priorityLevel:te,startTime:ne,expirationTime:j,sortIndex:-1},ne>L?(te.sortIndex=ne,e(w,te),n(v)===null&&te===n(w)&&(Z?(Ee(S),S=-1):Z=!0,Ue(ve,ne-L))):(te.sortIndex=j,e(v,te),J||q||(J=!0,dt(Qe))),te},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(te){var fe=z;return function(){var ne=z;z=fe;try{return te.apply(this,arguments)}finally{z=ne}}}}(bp)),bp}var _p;function tv(){return _p||(_p=1,vp.exports=ev()),vp.exports}/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Sp;function nv(){if(Sp)return tn;Sp=1;var i=vh(),e=tv();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,r){f(t,r),f(t+"Capture",r)}function f(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,k={},R={};function z(t){return v.call(R,t)?!0:v.call(k,t)?!1:w.test(t)?R[t]=!0:(k[t]=!0,!1)}function q(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function J(t,r,o,u){if(r===null||typeof r>"u"||q(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Z(t,r,o,u,h,p,y){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=y}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){U[t]=new Z(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];U[r]=new Z(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){U[t]=new Z(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){U[t]=new Z(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){U[t]=new Z(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){U[t]=new Z(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){U[t]=new Z(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){U[t]=new Z(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){U[t]=new Z(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ee=/[\-:]([a-z])/g;function ge(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Ee,ge);U[r]=new Z(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Ee,ge);U[r]=new Z(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Ee,ge);U[r]=new Z(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){U[t]=new Z(t,1,!1,t.toLowerCase(),null,!1,!1)}),U.xlinkHref=new Z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){U[t]=new Z(t,1,!1,t.toLowerCase(),null,!0,!0)});function ke(t,r,o,u){var h=U.hasOwnProperty(r)?U[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(J(r,o,h,u)&&(o=null),u||h===null?z(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var ve=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qe=Symbol.for("react.element"),Le=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),D=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),Ke=Symbol.for("react.suspense_list"),ft=Symbol.for("react.memo"),dt=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),te=Symbol.iterator;function fe(t){return t===null||typeof t!="object"?null:(t=te&&t[te]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,L;function j(t){if(L===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);L=r&&r[1]||""}return`
`+L+t}var he=!1;function Ce(t,r){if(!t||he)return"";he=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(F){var u=F}Reflect.construct(t,[],r)}else{try{r.call()}catch(F){u=F}t.call(r.prototype)}else{try{throw Error()}catch(F){u=F}t()}}catch(F){if(F&&u&&typeof F.stack=="string"){for(var h=F.stack.split(`
`),p=u.stack.split(`
`),y=h.length-1,_=p.length-1;1<=y&&0<=_&&h[y]!==p[_];)_--;for(;1<=y&&0<=_;y--,_--)if(h[y]!==p[_]){if(y!==1||_!==1)do if(y--,_--,0>_||h[y]!==p[_]){var C=`
`+h[y].replace(" at new "," at ");return t.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",t.displayName)),C}while(1<=y&&0<=_);break}}}finally{he=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?j(t):""}function xe(t){switch(t.tag){case 5:return j(t.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return t=Ce(t.type,!1),t;case 11:return t=Ce(t.type.render,!1),t;case 1:return t=Ce(t.type,!0),t;default:return""}}function Te(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case N:return"Fragment";case Le:return"Portal";case x:return"Profiler";case S:return"StrictMode";case E:return"Suspense";case Ke:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case D:return(t.displayName||"Context")+".Consumer";case T:return(t._context.displayName||"Context")+".Provider";case A:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ft:return r=t.displayName||null,r!==null?r:Te(t.type)||"Memo";case dt:r=t._payload,t=t._init;try{return Te(t(r))}catch{}}return null}function Oe(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(r);case 8:return r===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function V(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Y(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function se(t){var r=Y(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(y){u=""+y,p.call(this,y)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function ye(t){t._valueTracker||(t._valueTracker=se(t))}function We(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=Y(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function Me(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vt(t,r){var o=r.checked;return ne({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Tr(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=V(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Nr(t,r){r=r.checked,r!=null&&ke(t,"checked",r,!1)}function Tn(t,r){Nr(t,r);var o=V(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Kn(t,r.type,o):r.hasOwnProperty("defaultValue")&&Kn(t,r.type,V(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Nn(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Kn(t,r,o){(r!=="number"||Me(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var yn=Array.isArray;function on(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+V(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function it(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return ne({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gt(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(yn(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:V(o)}}function Ki(t,r){var o=V(r.value),u=V(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function Qs(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function pt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?pt(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lr,Xs=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(lr=lr||document.createElement("div"),lr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=lr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Dr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ci=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(t){ci.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),ui[r]=ui[t]})});function Js(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||ui.hasOwnProperty(t)&&ui[t]?(""+r).trim():r+"px"}function Ys(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=Js(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var Zs=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eo(t,r){if(r){if(Zs[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function to(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hi=null;function Wi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gi=null,vn=null,Wn=null;function Hi(t){if(t=Co(t)){if(typeof Gi!="function")throw Error(n(280));var r=t.stateNode;r&&(r=Va(r),Gi(t.stateNode,t.type,r))}}function Gn(t){vn?Wn?Wn.push(t):Wn=[t]:vn=t}function no(){if(vn){var t=vn,r=Wn;if(Wn=vn=null,Hi(t),r)for(t=0;t<r.length;t++)Hi(r[t])}}function fi(t,r){return t(r)}function ro(){}var ur=!1;function io(t,r,o){if(ur)return t(r,o);ur=!0;try{return fi(t,r,o)}finally{ur=!1,(vn!==null||Wn!==null)&&(ro(),no())}}function ot(t,r){var o=t.stateNode;if(o===null)return null;var u=Va(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var Qi=!1;if(g)try{var Dn={};Object.defineProperty(Dn,"passive",{get:function(){Qi=!0}}),window.addEventListener("test",Dn,Dn),window.removeEventListener("test",Dn,Dn)}catch{Qi=!1}function di(t,r,o,u,h,p,y,_,C){var F=Array.prototype.slice.call(arguments,3);try{r.apply(o,F)}catch(W){this.onError(W)}}var pi=!1,Xi=null,Ln=!1,so=null,mu={onError:function(t){pi=!0,Xi=t}};function Ji(t,r,o,u,h,p,y,_,C){pi=!1,Xi=null,di.apply(mu,arguments)}function da(t,r,o,u,h,p,y,_,C){if(Ji.apply(this,arguments),pi){if(pi){var F=Xi;pi=!1,Xi=null}else throw Error(n(198));Ln||(Ln=!0,so=F)}}function An(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function mi(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function On(t){if(An(t)!==t)throw Error(n(188))}function pa(t){var r=t.alternate;if(!r){if(r=An(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return On(h),t;if(p===u)return On(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var y=!1,_=h.child;_;){if(_===o){y=!0,o=h,u=p;break}if(_===u){y=!0,u=h,o=p;break}_=_.sibling}if(!y){for(_=p.child;_;){if(_===o){y=!0,o=p,u=h;break}if(_===u){y=!0,u=p,o=h;break}_=_.sibling}if(!y)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function oo(t){return t=pa(t),t!==null?Yi(t):null}function Yi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Yi(t);if(r!==null)return r;t=t.sibling}return null}var Zi=e.unstable_scheduleCallback,ao=e.unstable_cancelCallback,ma=e.unstable_shouldYield,gu=e.unstable_requestPaint,Ge=e.unstable_now,ga=e.unstable_getCurrentPriorityLevel,gi=e.unstable_ImmediatePriority,Lr=e.unstable_UserBlockingPriority,bn=e.unstable_NormalPriority,lo=e.unstable_LowPriority,ya=e.unstable_IdlePriority,yi=null,an=null;function va(t){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(yi,t,void 0,(t.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:wa,uo=Math.log,ba=Math.LN2;function wa(t){return t>>>=0,t===0?32:31-(uo(t)/ba|0)|0}var es=64,ts=4194304;function Ar(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vi(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,y=o&268435455;if(y!==0){var _=y&~h;_!==0?u=Ar(_):(p&=y,p!==0&&(u=Ar(p)))}else y=o&~h,y!==0?u=Ar(y):p!==0&&(u=Ar(p));if(u===0)return 0;if(r!==0&&r!==u&&(r&h)===0&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((u&4)!==0&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-qt(r),h=1<<o,u|=t[o],r&=~h;return u}function yu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cr(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var y=31-qt(p),_=1<<y,C=h[y];C===-1?((_&o)===0||(_&u)!==0)&&(h[y]=yu(_,r)):C<=r&&(t.expiredLanes|=_),p&=~_}}function ln(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bi(){var t=es;return es<<=1,(es&4194240)===0&&(es=64),t}function Or(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Rr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-qt(r),t[r]=o}function qe(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-qt(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function Pr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-qt(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var De=0;function Mr(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var _a,ns,Sa,Ea,ka,co=!1,Hn=[],It=null,Rn=null,Pn=null,Fr=new Map,wn=new Map,Qn=[],vu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xa(t,r){switch(t){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":Fr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":wn.delete(r.pointerId)}}function Ht(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Co(r),r!==null&&ns(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function bu(t,r,o,u,h){switch(r){case"focusin":return It=Ht(It,t,r,o,u,h),!0;case"dragenter":return Rn=Ht(Rn,t,r,o,u,h),!0;case"mouseover":return Pn=Ht(Pn,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return Fr.set(p,Ht(Fr.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,wn.set(p,Ht(wn.get(p)||null,t,r,o,u,h)),!0}return!1}function Ca(t){var r=ki(t.target);if(r!==null){var o=An(r);if(o!==null){if(r=o.tag,r===13){if(r=mi(o),r!==null){t.blockedOn=r,ka(t.priority,function(){Sa(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=rs(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);hi=u,o.target.dispatchEvent(u),hi=null}else return r=Co(o),r!==null&&ns(r),t.blockedOn=o,!1;r.shift()}return!0}function wi(t,r,o){hr(t)&&o.delete(r)}function Ia(){co=!1,It!==null&&hr(It)&&(It=null),Rn!==null&&hr(Rn)&&(Rn=null),Pn!==null&&hr(Pn)&&(Pn=null),Fr.forEach(wi),wn.forEach(wi)}function Mn(t,r){t.blockedOn===r&&(t.blockedOn=null,co||(co=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ia)))}function Fn(t){function r(h){return Mn(h,t)}if(0<Hn.length){Mn(Hn[0],t);for(var o=1;o<Hn.length;o++){var u=Hn[o];u.blockedOn===t&&(u.blockedOn=null)}}for(It!==null&&Mn(It,t),Rn!==null&&Mn(Rn,t),Pn!==null&&Mn(Pn,t),Fr.forEach(r),wn.forEach(r),o=0;o<Qn.length;o++)u=Qn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Qn.length&&(o=Qn[0],o.blockedOn===null);)Ca(o),o.blockedOn===null&&Qn.shift()}var fr=ve.ReactCurrentBatchConfig,zr=!0;function Ye(t,r,o,u){var h=De,p=fr.transition;fr.transition=null;try{De=1,ho(t,r,o,u)}finally{De=h,fr.transition=p}}function wu(t,r,o,u){var h=De,p=fr.transition;fr.transition=null;try{De=4,ho(t,r,o,u)}finally{De=h,fr.transition=p}}function ho(t,r,o,u){if(zr){var h=rs(t,r,o,u);if(h===null)Lu(t,r,u,_i,o),xa(t,u);else if(bu(h,t,r,o,u))u.stopPropagation();else if(xa(t,u),r&4&&-1<vu.indexOf(t)){for(;h!==null;){var p=Co(h);if(p!==null&&_a(p),p=rs(t,r,o,u),p===null&&Lu(t,r,u,_i,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Lu(t,r,u,null,o)}}var _i=null;function rs(t,r,o,u){if(_i=null,t=Wi(u),t=ki(t),t!==null)if(r=An(t),r===null)t=null;else if(o=r.tag,o===13){if(t=mi(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return _i=t,null}function fo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ga()){case gi:return 1;case Lr:return 4;case bn:case lo:return 16;case ya:return 536870912;default:return 16}default:return 16}}var un=null,is=null,Qt=null;function po(){if(Qt)return Qt;var t,r=is,o=r.length,u,h="value"in un?un.value:un.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var y=o-t;for(u=1;u<=y&&r[o-u]===h[p-u];u++);return Qt=h.slice(t,1<u?1-u:void 0)}function ss(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Xn(){return!0}function mo(){return!1}function Tt(t){function r(o,u,h,p,y){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var _ in t)t.hasOwnProperty(_)&&(o=t[_],this[_]=o?o(p):p[_]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Xn:mo,this.isPropagationStopped=mo,this}return ne(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),r}var zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},os=Tt(zn),Jn=ne({},zn,{view:0,detail:0}),_u=Tt(Jn),as,dr,Br,Si=ne({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Br&&(Br&&t.type==="mousemove"?(as=t.screenX-Br.screenX,dr=t.screenY-Br.screenY):dr=as=0,Br=t),as)},movementY:function(t){return"movementY"in t?t.movementY:dr}}),ls=Tt(Si),go=ne({},Si,{dataTransfer:0}),Ta=Tt(go),us=ne({},Jn,{relatedTarget:0}),cs=Tt(us),Na=ne({},zn,{animationName:0,elapsedTime:0,pseudoElement:0}),pr=Tt(Na),Da=ne({},zn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),La=Tt(Da),Aa=ne({},zn,{data:0}),yo=Tt(Aa),hs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$t={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Oa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ra(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Oa[t])?!!r[t]:!1}function Yn(){return Ra}var l=ne({},Jn,{key:function(t){if(t.key){var r=hs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ss(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$t[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yn,charCode:function(t){return t.type==="keypress"?ss(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ss(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=Tt(l),m=ne({},Si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b=Tt(m),O=ne({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yn}),B=Tt(O),ee=ne({},zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$e=Tt(ee),gt=ne({},Si,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Be=Tt(gt),_t=[9,13,27,32],St=g&&"CompositionEvent"in window,_n=null;g&&"documentMode"in document&&(_n=document.documentMode);var cn=g&&"TextEvent"in window&&!_n,Ei=g&&(!St||_n&&8<_n&&11>=_n),fs=" ",sf=!1;function of(t,r){switch(t){case"keyup":return _t.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function af(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ds=!1;function Gg(t,r){switch(t){case"compositionend":return af(r);case"keypress":return r.which!==32?null:(sf=!0,fs);case"textInput":return t=r.data,t===fs&&sf?null:t;default:return null}}function Hg(t,r){if(ds)return t==="compositionend"||!St&&of(t,r)?(t=po(),Qt=is=un=null,ds=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ei&&r.locale!=="ko"?null:r.data;default:return null}}var Qg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Qg[t.type]:r==="textarea"}function uf(t,r,o,u){Gn(u),r=Ba(r,"onChange"),0<r.length&&(o=new os("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var vo=null,bo=null;function Xg(t){If(t,0)}function Pa(t){var r=vs(t);if(We(r))return t}function Jg(t,r){if(t==="change")return r}var cf=!1;if(g){var Su;if(g){var Eu="oninput"in document;if(!Eu){var hf=document.createElement("div");hf.setAttribute("oninput","return;"),Eu=typeof hf.oninput=="function"}Su=Eu}else Su=!1;cf=Su&&(!document.documentMode||9<document.documentMode)}function ff(){vo&&(vo.detachEvent("onpropertychange",df),bo=vo=null)}function df(t){if(t.propertyName==="value"&&Pa(bo)){var r=[];uf(r,bo,t,Wi(t)),io(Xg,r)}}function Yg(t,r,o){t==="focusin"?(ff(),vo=r,bo=o,vo.attachEvent("onpropertychange",df)):t==="focusout"&&ff()}function Zg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pa(bo)}function ey(t,r){if(t==="click")return Pa(r)}function ty(t,r){if(t==="input"||t==="change")return Pa(r)}function ny(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Bn=typeof Object.is=="function"?Object.is:ny;function wo(t,r){if(Bn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!v.call(r,h)||!Bn(t[h],r[h]))return!1}return!0}function pf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mf(t,r){var o=pf(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=pf(o)}}function gf(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?gf(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function yf(){for(var t=window,r=Me();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Me(t.document)}return r}function ku(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function ry(t){var r=yf(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&gf(o.ownerDocument.documentElement,o)){if(u!==null&&ku(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=mf(o,p);var y=mf(o,u);h&&y&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==y.node||t.focusOffset!==y.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(y.node,y.offset)):(r.setEnd(y.node,y.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iy=g&&"documentMode"in document&&11>=document.documentMode,ps=null,xu=null,_o=null,Cu=!1;function vf(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Cu||ps==null||ps!==Me(u)||(u=ps,"selectionStart"in u&&ku(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),_o&&wo(_o,u)||(_o=u,u=Ba(xu,"onSelect"),0<u.length&&(r=new os("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=ps)))}function Ma(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var ms={animationend:Ma("Animation","AnimationEnd"),animationiteration:Ma("Animation","AnimationIteration"),animationstart:Ma("Animation","AnimationStart"),transitionend:Ma("Transition","TransitionEnd")},Iu={},bf={};g&&(bf=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function Fa(t){if(Iu[t])return Iu[t];if(!ms[t])return t;var r=ms[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in bf)return Iu[t]=r[o];return t}var wf=Fa("animationend"),_f=Fa("animationiteration"),Sf=Fa("animationstart"),Ef=Fa("transitionend"),kf=new Map,xf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(t,r){kf.set(t,r),c(r,[t])}for(var Tu=0;Tu<xf.length;Tu++){var Nu=xf[Tu],sy=Nu.toLowerCase(),oy=Nu[0].toUpperCase()+Nu.slice(1);Ur(sy,"on"+oy)}Ur(wf,"onAnimationEnd"),Ur(_f,"onAnimationIteration"),Ur(Sf,"onAnimationStart"),Ur("dblclick","onDoubleClick"),Ur("focusin","onFocus"),Ur("focusout","onBlur"),Ur(Ef,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var So="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ay=new Set("cancel close invalid load scroll toggle".split(" ").concat(So));function Cf(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,da(u,r,void 0,t),t.currentTarget=null}function If(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var y=u.length-1;0<=y;y--){var _=u[y],C=_.instance,F=_.currentTarget;if(_=_.listener,C!==p&&h.isPropagationStopped())break e;Cf(h,_,F),p=C}else for(y=0;y<u.length;y++){if(_=u[y],C=_.instance,F=_.currentTarget,_=_.listener,C!==p&&h.isPropagationStopped())break e;Cf(h,_,F),p=C}}}if(Ln)throw t=so,Ln=!1,so=null,t}function Xe(t,r){var o=r[Fu];o===void 0&&(o=r[Fu]=new Set);var u=t+"__bubble";o.has(u)||(Tf(r,t,2,!1),o.add(u))}function Du(t,r,o){var u=0;r&&(u|=4),Tf(o,t,u,r)}var za="_reactListening"+Math.random().toString(36).slice(2);function Eo(t){if(!t[za]){t[za]=!0,s.forEach(function(o){o!=="selectionchange"&&(ay.has(o)||Du(o,!1,t),Du(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[za]||(r[za]=!0,Du("selectionchange",!1,r))}}function Tf(t,r,o,u){switch(fo(r)){case 1:var h=Ye;break;case 4:h=wu;break;default:h=ho}o=h.bind(null,r,o,t),h=void 0,!Qi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Lu(t,r,o,u,h){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var _=u.stateNode.containerInfo;if(_===h||_.nodeType===8&&_.parentNode===h)break;if(y===4)for(y=u.return;y!==null;){var C=y.tag;if((C===3||C===4)&&(C=y.stateNode.containerInfo,C===h||C.nodeType===8&&C.parentNode===h))return;y=y.return}for(;_!==null;){if(y=ki(_),y===null)return;if(C=y.tag,C===5||C===6){u=p=y;continue e}_=_.parentNode}}u=u.return}io(function(){var F=p,W=Wi(o),H=[];e:{var $=kf.get(t);if($!==void 0){var re=os,oe=t;switch(t){case"keypress":if(ss(o)===0)break e;case"keydown":case"keyup":re=d;break;case"focusin":oe="focus",re=cs;break;case"focusout":oe="blur",re=cs;break;case"beforeblur":case"afterblur":re=cs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=ls;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Ta;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=B;break;case wf:case _f:case Sf:re=pr;break;case Ef:re=$e;break;case"scroll":re=_u;break;case"wheel":re=Be;break;case"copy":case"cut":case"paste":re=La;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=b}var ae=(r&4)!==0,at=!ae&&t==="scroll",P=ae?$!==null?$+"Capture":null:$;ae=[];for(var I=F,M;I!==null;){M=I;var X=M.stateNode;if(M.tag===5&&X!==null&&(M=X,P!==null&&(X=ot(I,P),X!=null&&ae.push(ko(I,X,M)))),at)break;I=I.return}0<ae.length&&($=new re($,oe,null,o,W),H.push({event:$,listeners:ae}))}}if((r&7)===0){e:{if($=t==="mouseover"||t==="pointerover",re=t==="mouseout"||t==="pointerout",$&&o!==hi&&(oe=o.relatedTarget||o.fromElement)&&(ki(oe)||oe[mr]))break e;if((re||$)&&($=W.window===W?W:($=W.ownerDocument)?$.defaultView||$.parentWindow:window,re?(oe=o.relatedTarget||o.toElement,re=F,oe=oe?ki(oe):null,oe!==null&&(at=An(oe),oe!==at||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(re=null,oe=F),re!==oe)){if(ae=ls,X="onMouseLeave",P="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(ae=b,X="onPointerLeave",P="onPointerEnter",I="pointer"),at=re==null?$:vs(re),M=oe==null?$:vs(oe),$=new ae(X,I+"leave",re,o,W),$.target=at,$.relatedTarget=M,X=null,ki(W)===F&&(ae=new ae(P,I+"enter",oe,o,W),ae.target=M,ae.relatedTarget=at,X=ae),at=X,re&&oe)t:{for(ae=re,P=oe,I=0,M=ae;M;M=gs(M))I++;for(M=0,X=P;X;X=gs(X))M++;for(;0<I-M;)ae=gs(ae),I--;for(;0<M-I;)P=gs(P),M--;for(;I--;){if(ae===P||P!==null&&ae===P.alternate)break t;ae=gs(ae),P=gs(P)}ae=null}else ae=null;re!==null&&Nf(H,$,re,ae,!1),oe!==null&&at!==null&&Nf(H,at,oe,ae,!0)}}e:{if($=F?vs(F):window,re=$.nodeName&&$.nodeName.toLowerCase(),re==="select"||re==="input"&&$.type==="file")var ue=Jg;else if(lf($))if(cf)ue=ty;else{ue=Zg;var de=Yg}else(re=$.nodeName)&&re.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(ue=ey);if(ue&&(ue=ue(t,F))){uf(H,ue,o,W);break e}de&&de(t,$,F),t==="focusout"&&(de=$._wrapperState)&&de.controlled&&$.type==="number"&&Kn($,"number",$.value)}switch(de=F?vs(F):window,t){case"focusin":(lf(de)||de.contentEditable==="true")&&(ps=de,xu=F,_o=null);break;case"focusout":_o=xu=ps=null;break;case"mousedown":Cu=!0;break;case"contextmenu":case"mouseup":case"dragend":Cu=!1,vf(H,o,W);break;case"selectionchange":if(iy)break;case"keydown":case"keyup":vf(H,o,W)}var pe;if(St)e:{switch(t){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else ds?of(t,o)&&(be="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(be="onCompositionStart");be&&(Ei&&o.locale!=="ko"&&(ds||be!=="onCompositionStart"?be==="onCompositionEnd"&&ds&&(pe=po()):(un=W,is="value"in un?un.value:un.textContent,ds=!0)),de=Ba(F,be),0<de.length&&(be=new yo(be,t,null,o,W),H.push({event:be,listeners:de}),pe?be.data=pe:(pe=af(o),pe!==null&&(be.data=pe)))),(pe=cn?Gg(t,o):Hg(t,o))&&(F=Ba(F,"onBeforeInput"),0<F.length&&(W=new yo("onBeforeInput","beforeinput",null,o,W),H.push({event:W,listeners:F}),W.data=pe))}If(H,r)})}function ko(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Ba(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=ot(t,o),p!=null&&u.unshift(ko(t,p,h)),p=ot(t,r),p!=null&&u.push(ko(t,p,h))),t=t.return}return u}function gs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nf(t,r,o,u,h){for(var p=r._reactName,y=[];o!==null&&o!==u;){var _=o,C=_.alternate,F=_.stateNode;if(C!==null&&C===u)break;_.tag===5&&F!==null&&(_=F,h?(C=ot(o,p),C!=null&&y.unshift(ko(o,C,_))):h||(C=ot(o,p),C!=null&&y.push(ko(o,C,_)))),o=o.return}y.length!==0&&t.push({event:r,listeners:y})}var ly=/\r\n?/g,uy=/\u0000|\uFFFD/g;function Df(t){return(typeof t=="string"?t:""+t).replace(ly,`
`).replace(uy,"")}function Ua(t,r,o){if(r=Df(r),Df(t)!==r&&o)throw Error(n(425))}function ja(){}var Au=null,Ou=null;function Ru(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Pu=typeof setTimeout=="function"?setTimeout:void 0,cy=typeof clearTimeout=="function"?clearTimeout:void 0,Lf=typeof Promise=="function"?Promise:void 0,hy=typeof queueMicrotask=="function"?queueMicrotask:typeof Lf<"u"?function(t){return Lf.resolve(null).then(t).catch(fy)}:Pu;function fy(t){setTimeout(function(){throw t})}function Mu(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),Fn(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);Fn(r)}function jr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Af(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var ys=Math.random().toString(36).slice(2),Zn="__reactFiber$"+ys,xo="__reactProps$"+ys,mr="__reactContainer$"+ys,Fu="__reactEvents$"+ys,dy="__reactListeners$"+ys,py="__reactHandles$"+ys;function ki(t){var r=t[Zn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[mr]||o[Zn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=Af(t);t!==null;){if(o=t[Zn])return o;t=Af(t)}return r}t=o,o=t.parentNode}return null}function Co(t){return t=t[Zn]||t[mr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Va(t){return t[xo]||null}var zu=[],bs=-1;function Vr(t){return{current:t}}function Je(t){0>bs||(t.current=zu[bs],zu[bs]=null,bs--)}function He(t,r){bs++,zu[bs]=t.current,t.current=r}var qr={},Pt=Vr(qr),Xt=Vr(!1),xi=qr;function ws(t,r){var o=t.type.contextTypes;if(!o)return qr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function Jt(t){return t=t.childContextTypes,t!=null}function qa(){Je(Xt),Je(Pt)}function Of(t,r,o){if(Pt.current!==qr)throw Error(n(168));He(Pt,r),He(Xt,o)}function Rf(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,Oe(t)||"Unknown",h));return ne({},o,u)}function $a(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qr,xi=Pt.current,He(Pt,t),He(Xt,Xt.current),!0}function Pf(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=Rf(t,r,xi),u.__reactInternalMemoizedMergedChildContext=t,Je(Xt),Je(Pt),He(Pt,t)):Je(Xt),He(Xt,o)}var gr=null,Ka=!1,Bu=!1;function Mf(t){gr===null?gr=[t]:gr.push(t)}function my(t){Ka=!0,Mf(t)}function $r(){if(!Bu&&gr!==null){Bu=!0;var t=0,r=De;try{var o=gr;for(De=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}gr=null,Ka=!1}catch(h){throw gr!==null&&(gr=gr.slice(t+1)),Zi(gi,$r),h}finally{De=r,Bu=!1}}return null}var _s=[],Ss=0,Wa=null,Ga=0,Sn=[],En=0,Ci=null,yr=1,vr="";function Ii(t,r){_s[Ss++]=Ga,_s[Ss++]=Wa,Wa=t,Ga=r}function Ff(t,r,o){Sn[En++]=yr,Sn[En++]=vr,Sn[En++]=Ci,Ci=t;var u=yr;t=vr;var h=32-qt(u)-1;u&=~(1<<h),o+=1;var p=32-qt(r)+h;if(30<p){var y=h-h%5;p=(u&(1<<y)-1).toString(32),u>>=y,h-=y,yr=1<<32-qt(r)+h|o<<h|u,vr=p+t}else yr=1<<p|o<<h|u,vr=t}function Uu(t){t.return!==null&&(Ii(t,1),Ff(t,1,0))}function ju(t){for(;t===Wa;)Wa=_s[--Ss],_s[Ss]=null,Ga=_s[--Ss],_s[Ss]=null;for(;t===Ci;)Ci=Sn[--En],Sn[En]=null,vr=Sn[--En],Sn[En]=null,yr=Sn[--En],Sn[En]=null}var hn=null,fn=null,Ze=!1,Un=null;function zf(t,r){var o=In(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function Bf(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,hn=t,fn=jr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,hn=t,fn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Ci!==null?{id:yr,overflow:vr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=In(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,hn=t,fn=null,!0):!1;default:return!1}}function Vu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qu(t){if(Ze){var r=fn;if(r){var o=r;if(!Bf(t,r)){if(Vu(t))throw Error(n(418));r=jr(o.nextSibling);var u=hn;r&&Bf(t,r)?zf(u,o):(t.flags=t.flags&-4097|2,Ze=!1,hn=t)}}else{if(Vu(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ze=!1,hn=t}}}function Uf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function Ha(t){if(t!==hn)return!1;if(!Ze)return Uf(t),Ze=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Ru(t.type,t.memoizedProps)),r&&(r=fn)){if(Vu(t))throw jf(),Error(n(418));for(;r;)zf(t,r),r=jr(r.nextSibling)}if(Uf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){fn=jr(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}fn=null}}else fn=hn?jr(t.stateNode.nextSibling):null;return!0}function jf(){for(var t=fn;t;)t=jr(t.nextSibling)}function Es(){fn=hn=null,Ze=!1}function $u(t){Un===null?Un=[t]:Un.push(t)}var gy=ve.ReactCurrentBatchConfig;function Io(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(y){var _=h.refs;y===null?delete _[p]:_[p]=y},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function Qa(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Vf(t){var r=t._init;return r(t._payload)}function qf(t){function r(P,I){if(t){var M=P.deletions;M===null?(P.deletions=[I],P.flags|=16):M.push(I)}}function o(P,I){if(!t)return null;for(;I!==null;)r(P,I),I=I.sibling;return null}function u(P,I){for(P=new Map;I!==null;)I.key!==null?P.set(I.key,I):P.set(I.index,I),I=I.sibling;return P}function h(P,I){return P=Yr(P,I),P.index=0,P.sibling=null,P}function p(P,I,M){return P.index=M,t?(M=P.alternate,M!==null?(M=M.index,M<I?(P.flags|=2,I):M):(P.flags|=2,I)):(P.flags|=1048576,I)}function y(P){return t&&P.alternate===null&&(P.flags|=2),P}function _(P,I,M,X){return I===null||I.tag!==6?(I=Rc(M,P.mode,X),I.return=P,I):(I=h(I,M),I.return=P,I)}function C(P,I,M,X){var ue=M.type;return ue===N?W(P,I,M.props.children,X,M.key):I!==null&&(I.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===dt&&Vf(ue)===I.type)?(X=h(I,M.props),X.ref=Io(P,I,M),X.return=P,X):(X=bl(M.type,M.key,M.props,null,P.mode,X),X.ref=Io(P,I,M),X.return=P,X)}function F(P,I,M,X){return I===null||I.tag!==4||I.stateNode.containerInfo!==M.containerInfo||I.stateNode.implementation!==M.implementation?(I=Pc(M,P.mode,X),I.return=P,I):(I=h(I,M.children||[]),I.return=P,I)}function W(P,I,M,X,ue){return I===null||I.tag!==7?(I=Pi(M,P.mode,X,ue),I.return=P,I):(I=h(I,M),I.return=P,I)}function H(P,I,M){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Rc(""+I,P.mode,M),I.return=P,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Qe:return M=bl(I.type,I.key,I.props,null,P.mode,M),M.ref=Io(P,null,I),M.return=P,M;case Le:return I=Pc(I,P.mode,M),I.return=P,I;case dt:var X=I._init;return H(P,X(I._payload),M)}if(yn(I)||fe(I))return I=Pi(I,P.mode,M,null),I.return=P,I;Qa(P,I)}return null}function $(P,I,M,X){var ue=I!==null?I.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return ue!==null?null:_(P,I,""+M,X);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Qe:return M.key===ue?C(P,I,M,X):null;case Le:return M.key===ue?F(P,I,M,X):null;case dt:return ue=M._init,$(P,I,ue(M._payload),X)}if(yn(M)||fe(M))return ue!==null?null:W(P,I,M,X,null);Qa(P,M)}return null}function re(P,I,M,X,ue){if(typeof X=="string"&&X!==""||typeof X=="number")return P=P.get(M)||null,_(I,P,""+X,ue);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Qe:return P=P.get(X.key===null?M:X.key)||null,C(I,P,X,ue);case Le:return P=P.get(X.key===null?M:X.key)||null,F(I,P,X,ue);case dt:var de=X._init;return re(P,I,M,de(X._payload),ue)}if(yn(X)||fe(X))return P=P.get(M)||null,W(I,P,X,ue,null);Qa(I,X)}return null}function oe(P,I,M,X){for(var ue=null,de=null,pe=I,be=I=0,xt=null;pe!==null&&be<M.length;be++){pe.index>be?(xt=pe,pe=null):xt=pe.sibling;var Fe=$(P,pe,M[be],X);if(Fe===null){pe===null&&(pe=xt);break}t&&pe&&Fe.alternate===null&&r(P,pe),I=p(Fe,I,be),de===null?ue=Fe:de.sibling=Fe,de=Fe,pe=xt}if(be===M.length)return o(P,pe),Ze&&Ii(P,be),ue;if(pe===null){for(;be<M.length;be++)pe=H(P,M[be],X),pe!==null&&(I=p(pe,I,be),de===null?ue=pe:de.sibling=pe,de=pe);return Ze&&Ii(P,be),ue}for(pe=u(P,pe);be<M.length;be++)xt=re(pe,P,be,M[be],X),xt!==null&&(t&&xt.alternate!==null&&pe.delete(xt.key===null?be:xt.key),I=p(xt,I,be),de===null?ue=xt:de.sibling=xt,de=xt);return t&&pe.forEach(function(Zr){return r(P,Zr)}),Ze&&Ii(P,be),ue}function ae(P,I,M,X){var ue=fe(M);if(typeof ue!="function")throw Error(n(150));if(M=ue.call(M),M==null)throw Error(n(151));for(var de=ue=null,pe=I,be=I=0,xt=null,Fe=M.next();pe!==null&&!Fe.done;be++,Fe=M.next()){pe.index>be?(xt=pe,pe=null):xt=pe.sibling;var Zr=$(P,pe,Fe.value,X);if(Zr===null){pe===null&&(pe=xt);break}t&&pe&&Zr.alternate===null&&r(P,pe),I=p(Zr,I,be),de===null?ue=Zr:de.sibling=Zr,de=Zr,pe=xt}if(Fe.done)return o(P,pe),Ze&&Ii(P,be),ue;if(pe===null){for(;!Fe.done;be++,Fe=M.next())Fe=H(P,Fe.value,X),Fe!==null&&(I=p(Fe,I,be),de===null?ue=Fe:de.sibling=Fe,de=Fe);return Ze&&Ii(P,be),ue}for(pe=u(P,pe);!Fe.done;be++,Fe=M.next())Fe=re(pe,P,be,Fe.value,X),Fe!==null&&(t&&Fe.alternate!==null&&pe.delete(Fe.key===null?be:Fe.key),I=p(Fe,I,be),de===null?ue=Fe:de.sibling=Fe,de=Fe);return t&&pe.forEach(function(Qy){return r(P,Qy)}),Ze&&Ii(P,be),ue}function at(P,I,M,X){if(typeof M=="object"&&M!==null&&M.type===N&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case Qe:e:{for(var ue=M.key,de=I;de!==null;){if(de.key===ue){if(ue=M.type,ue===N){if(de.tag===7){o(P,de.sibling),I=h(de,M.props.children),I.return=P,P=I;break e}}else if(de.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===dt&&Vf(ue)===de.type){o(P,de.sibling),I=h(de,M.props),I.ref=Io(P,de,M),I.return=P,P=I;break e}o(P,de);break}else r(P,de);de=de.sibling}M.type===N?(I=Pi(M.props.children,P.mode,X,M.key),I.return=P,P=I):(X=bl(M.type,M.key,M.props,null,P.mode,X),X.ref=Io(P,I,M),X.return=P,P=X)}return y(P);case Le:e:{for(de=M.key;I!==null;){if(I.key===de)if(I.tag===4&&I.stateNode.containerInfo===M.containerInfo&&I.stateNode.implementation===M.implementation){o(P,I.sibling),I=h(I,M.children||[]),I.return=P,P=I;break e}else{o(P,I);break}else r(P,I);I=I.sibling}I=Pc(M,P.mode,X),I.return=P,P=I}return y(P);case dt:return de=M._init,at(P,I,de(M._payload),X)}if(yn(M))return oe(P,I,M,X);if(fe(M))return ae(P,I,M,X);Qa(P,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,I!==null&&I.tag===6?(o(P,I.sibling),I=h(I,M),I.return=P,P=I):(o(P,I),I=Rc(M,P.mode,X),I.return=P,P=I),y(P)):o(P,I)}return at}var ks=qf(!0),$f=qf(!1),Xa=Vr(null),Ja=null,xs=null,Ku=null;function Wu(){Ku=xs=Ja=null}function Gu(t){var r=Xa.current;Je(Xa),t._currentValue=r}function Hu(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function Cs(t,r){Ja=t,Ku=xs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Yt=!0),t.firstContext=null)}function kn(t){var r=t._currentValue;if(Ku!==t)if(t={context:t,memoizedValue:r,next:null},xs===null){if(Ja===null)throw Error(n(308));xs=t,Ja.dependencies={lanes:0,firstContext:t}}else xs=xs.next=t;return r}var Ti=null;function Qu(t){Ti===null?Ti=[t]:Ti.push(t)}function Kf(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,Qu(r)):(o.next=h.next,h.next=o),r.interleaved=o,br(t,u)}function br(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Kr=!1;function Xu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Wr(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Re&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,br(t,o)}return h=u.interleaved,h===null?(r.next=r,Qu(u)):(r.next=h.next,h.next=r),u.interleaved=r,br(t,o)}function Ya(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Pr(t,o)}}function Gf(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var y={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=y:p=p.next=y,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function Za(t,r,o,u){var h=t.updateQueue;Kr=!1;var p=h.firstBaseUpdate,y=h.lastBaseUpdate,_=h.shared.pending;if(_!==null){h.shared.pending=null;var C=_,F=C.next;C.next=null,y===null?p=F:y.next=F,y=C;var W=t.alternate;W!==null&&(W=W.updateQueue,_=W.lastBaseUpdate,_!==y&&(_===null?W.firstBaseUpdate=F:_.next=F,W.lastBaseUpdate=C))}if(p!==null){var H=h.baseState;y=0,W=F=C=null,_=p;do{var $=_.lane,re=_.eventTime;if((u&$)===$){W!==null&&(W=W.next={eventTime:re,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var oe=t,ae=_;switch($=r,re=o,ae.tag){case 1:if(oe=ae.payload,typeof oe=="function"){H=oe.call(re,H,$);break e}H=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ae.payload,$=typeof oe=="function"?oe.call(re,H,$):oe,$==null)break e;H=ne({},H,$);break e;case 2:Kr=!0}}_.callback!==null&&_.lane!==0&&(t.flags|=64,$=h.effects,$===null?h.effects=[_]:$.push(_))}else re={eventTime:re,lane:$,tag:_.tag,payload:_.payload,callback:_.callback,next:null},W===null?(F=W=re,C=H):W=W.next=re,y|=$;if(_=_.next,_===null){if(_=h.shared.pending,_===null)break;$=_,_=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);if(W===null&&(C=H),h.baseState=C,h.firstBaseUpdate=F,h.lastBaseUpdate=W,r=h.shared.interleaved,r!==null){h=r;do y|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Li|=y,t.lanes=y,t.memoizedState=H}}function Hf(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var To={},er=Vr(To),No=Vr(To),Do=Vr(To);function Ni(t){if(t===To)throw Error(n(174));return t}function Ju(t,r){switch(He(Do,r),He(No,t),He(er,To),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:mt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=mt(r,t)}Je(er),He(er,r)}function Is(){Je(er),Je(No),Je(Do)}function Qf(t){Ni(Do.current);var r=Ni(er.current),o=mt(r,t.type);r!==o&&(He(No,t),He(er,o))}function Yu(t){No.current===t&&(Je(er),Je(No))}var tt=Vr(0);function el(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Zu=[];function ec(){for(var t=0;t<Zu.length;t++)Zu[t]._workInProgressVersionPrimary=null;Zu.length=0}var tl=ve.ReactCurrentDispatcher,tc=ve.ReactCurrentBatchConfig,Di=0,nt=null,yt=null,Et=null,nl=!1,Lo=!1,Ao=0,yy=0;function Mt(){throw Error(n(321))}function nc(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Bn(t[o],r[o]))return!1;return!0}function rc(t,r,o,u,h,p){if(Di=p,nt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,tl.current=t===null||t.memoizedState===null?_y:Sy,t=o(u,h),Lo){p=0;do{if(Lo=!1,Ao=0,25<=p)throw Error(n(301));p+=1,Et=yt=null,r.updateQueue=null,tl.current=Ey,t=o(u,h)}while(Lo)}if(tl.current=sl,r=yt!==null&&yt.next!==null,Di=0,Et=yt=nt=null,nl=!1,r)throw Error(n(300));return t}function ic(){var t=Ao!==0;return Ao=0,t}function tr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?nt.memoizedState=Et=t:Et=Et.next=t,Et}function xn(){if(yt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var r=Et===null?nt.memoizedState:Et.next;if(r!==null)Et=r,yt=t;else{if(t===null)throw Error(n(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Et===null?nt.memoizedState=Et=t:Et=Et.next=t}return Et}function Oo(t,r){return typeof r=="function"?r(t):r}function sc(t){var r=xn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=yt,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var y=h.next;h.next=p.next,p.next=y}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var _=y=null,C=null,F=p;do{var W=F.lane;if((Di&W)===W)C!==null&&(C=C.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),u=F.hasEagerState?F.eagerState:t(u,F.action);else{var H={lane:W,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};C===null?(_=C=H,y=u):C=C.next=H,nt.lanes|=W,Li|=W}F=F.next}while(F!==null&&F!==p);C===null?y=u:C.next=_,Bn(u,r.memoizedState)||(Yt=!0),r.memoizedState=u,r.baseState=y,r.baseQueue=C,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,nt.lanes|=p,Li|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function oc(t){var r=xn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var y=h=h.next;do p=t(p,y.action),y=y.next;while(y!==h);Bn(p,r.memoizedState)||(Yt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function Xf(){}function Jf(t,r){var o=nt,u=xn(),h=r(),p=!Bn(u.memoizedState,h);if(p&&(u.memoizedState=h,Yt=!0),u=u.queue,ac(ed.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||Et!==null&&Et.memoizedState.tag&1){if(o.flags|=2048,Ro(9,Zf.bind(null,o,u,h,r),void 0,null),kt===null)throw Error(n(349));(Di&30)!==0||Yf(o,r,h)}return h}function Yf(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=nt.updateQueue,r===null?(r={lastEffect:null,stores:null},nt.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Zf(t,r,o,u){r.value=o,r.getSnapshot=u,td(r)&&nd(t)}function ed(t,r,o){return o(function(){td(r)&&nd(t)})}function td(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Bn(t,o)}catch{return!0}}function nd(t){var r=br(t,1);r!==null&&$n(r,t,1,-1)}function rd(t){var r=tr();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:t},r.queue=t,t=t.dispatch=wy.bind(null,nt,t),[r.memoizedState,t]}function Ro(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=nt.updateQueue,r===null?(r={lastEffect:null,stores:null},nt.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function id(){return xn().memoizedState}function rl(t,r,o,u){var h=tr();nt.flags|=t,h.memoizedState=Ro(1|r,o,void 0,u===void 0?null:u)}function il(t,r,o,u){var h=xn();u=u===void 0?null:u;var p=void 0;if(yt!==null){var y=yt.memoizedState;if(p=y.destroy,u!==null&&nc(u,y.deps)){h.memoizedState=Ro(r,o,p,u);return}}nt.flags|=t,h.memoizedState=Ro(1|r,o,p,u)}function sd(t,r){return rl(8390656,8,t,r)}function ac(t,r){return il(2048,8,t,r)}function od(t,r){return il(4,2,t,r)}function ad(t,r){return il(4,4,t,r)}function ld(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function ud(t,r,o){return o=o!=null?o.concat([t]):null,il(4,4,ld.bind(null,r,t),o)}function lc(){}function cd(t,r){var o=xn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&nc(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function hd(t,r){var o=xn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&nc(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function fd(t,r,o){return(Di&21)===0?(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=o):(Bn(o,r)||(o=bi(),nt.lanes|=o,Li|=o,t.baseState=!0),r)}function vy(t,r){var o=De;De=o!==0&&4>o?o:4,t(!0);var u=tc.transition;tc.transition={};try{t(!1),r()}finally{De=o,tc.transition=u}}function dd(){return xn().memoizedState}function by(t,r,o){var u=Xr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},pd(t))md(r,o);else if(o=Kf(t,r,o,u),o!==null){var h=Wt();$n(o,t,u,h),gd(o,r,u)}}function wy(t,r,o){var u=Xr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(pd(t))md(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var y=r.lastRenderedState,_=p(y,o);if(h.hasEagerState=!0,h.eagerState=_,Bn(_,y)){var C=r.interleaved;C===null?(h.next=h,Qu(r)):(h.next=C.next,C.next=h),r.interleaved=h;return}}catch{}finally{}o=Kf(t,r,h,u),o!==null&&(h=Wt(),$n(o,t,u,h),gd(o,r,u))}}function pd(t){var r=t.alternate;return t===nt||r!==null&&r===nt}function md(t,r){Lo=nl=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function gd(t,r,o){if((o&4194240)!==0){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Pr(t,o)}}var sl={readContext:kn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},_y={readContext:kn,useCallback:function(t,r){return tr().memoizedState=[t,r===void 0?null:r],t},useContext:kn,useEffect:sd,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,rl(4194308,4,ld.bind(null,r,t),o)},useLayoutEffect:function(t,r){return rl(4194308,4,t,r)},useInsertionEffect:function(t,r){return rl(4,2,t,r)},useMemo:function(t,r){var o=tr();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=tr();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=by.bind(null,nt,t),[u.memoizedState,t]},useRef:function(t){var r=tr();return t={current:t},r.memoizedState=t},useState:rd,useDebugValue:lc,useDeferredValue:function(t){return tr().memoizedState=t},useTransition:function(){var t=rd(!1),r=t[0];return t=vy.bind(null,t[1]),tr().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=nt,h=tr();if(Ze){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),kt===null)throw Error(n(349));(Di&30)!==0||Yf(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,sd(ed.bind(null,u,p,t),[t]),u.flags|=2048,Ro(9,Zf.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=tr(),r=kt.identifierPrefix;if(Ze){var o=vr,u=yr;o=(u&~(1<<32-qt(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Ao++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=yy++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Sy={readContext:kn,useCallback:cd,useContext:kn,useEffect:ac,useImperativeHandle:ud,useInsertionEffect:od,useLayoutEffect:ad,useMemo:hd,useReducer:sc,useRef:id,useState:function(){return sc(Oo)},useDebugValue:lc,useDeferredValue:function(t){var r=xn();return fd(r,yt.memoizedState,t)},useTransition:function(){var t=sc(Oo)[0],r=xn().memoizedState;return[t,r]},useMutableSource:Xf,useSyncExternalStore:Jf,useId:dd,unstable_isNewReconciler:!1},Ey={readContext:kn,useCallback:cd,useContext:kn,useEffect:ac,useImperativeHandle:ud,useInsertionEffect:od,useLayoutEffect:ad,useMemo:hd,useReducer:oc,useRef:id,useState:function(){return oc(Oo)},useDebugValue:lc,useDeferredValue:function(t){var r=xn();return yt===null?r.memoizedState=t:fd(r,yt.memoizedState,t)},useTransition:function(){var t=oc(Oo)[0],r=xn().memoizedState;return[t,r]},useMutableSource:Xf,useSyncExternalStore:Jf,useId:dd,unstable_isNewReconciler:!1};function jn(t,r){if(t&&t.defaultProps){r=ne({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function uc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:ne({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var ol={isMounted:function(t){return(t=t._reactInternals)?An(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=Wt(),h=Xr(t),p=wr(u,h);p.payload=r,o!=null&&(p.callback=o),r=Wr(t,p,h),r!==null&&($n(r,t,h,u),Ya(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=Wt(),h=Xr(t),p=wr(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=Wr(t,p,h),r!==null&&($n(r,t,h,u),Ya(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Wt(),u=Xr(t),h=wr(o,u);h.tag=2,r!=null&&(h.callback=r),r=Wr(t,h,u),r!==null&&($n(r,t,u,o),Ya(r,t,u))}};function yd(t,r,o,u,h,p,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,y):r.prototype&&r.prototype.isPureReactComponent?!wo(o,u)||!wo(h,p):!0}function vd(t,r,o){var u=!1,h=qr,p=r.contextType;return typeof p=="object"&&p!==null?p=kn(p):(h=Jt(r)?xi:Pt.current,u=r.contextTypes,p=(u=u!=null)?ws(t,h):qr),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=ol,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function bd(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&ol.enqueueReplaceState(r,r.state,null)}function cc(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},Xu(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=kn(p):(p=Jt(r)?xi:Pt.current,h.context=ws(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(uc(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&ol.enqueueReplaceState(h,h.state,null),Za(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Ts(t,r){try{var o="",u=r;do o+=xe(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function hc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function fc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var ky=typeof WeakMap=="function"?WeakMap:Map;function wd(t,r,o){o=wr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){dl||(dl=!0,Cc=u),fc(t,r)},o}function _d(t,r,o){o=wr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){fc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){fc(t,r),typeof u!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var y=r.stack;this.componentDidCatch(r.value,{componentStack:y!==null?y:""})}),o}function Sd(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new ky;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=zy.bind(null,t,r,o),r.then(t,t))}function Ed(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function kd(t,r,o,u,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=wr(-1,1),r.tag=2,Wr(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var xy=ve.ReactCurrentOwner,Yt=!1;function Kt(t,r,o,u){r.child=t===null?$f(r,null,o,u):ks(r,t.child,o,u)}function xd(t,r,o,u,h){o=o.render;var p=r.ref;return Cs(r,h),u=rc(t,r,o,u,p,h),o=ic(),t!==null&&!Yt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,_r(t,r,h)):(Ze&&o&&Uu(r),r.flags|=1,Kt(t,r,u,h),r.child)}function Cd(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!Oc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,Id(t,r,p,u,h)):(t=bl(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,(t.lanes&h)===0){var y=p.memoizedProps;if(o=o.compare,o=o!==null?o:wo,o(y,u)&&t.ref===r.ref)return _r(t,r,h)}return r.flags|=1,t=Yr(p,u),t.ref=r.ref,t.return=r,r.child=t}function Id(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(wo(p,u)&&t.ref===r.ref)if(Yt=!1,r.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Yt=!0);else return r.lanes=t.lanes,_r(t,r,h)}return dc(t,r,o,u,h)}function Td(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Ds,dn),dn|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,He(Ds,dn),dn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,He(Ds,dn),dn|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,He(Ds,dn),dn|=u;return Kt(t,r,h,o),r.child}function Nd(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function dc(t,r,o,u,h){var p=Jt(o)?xi:Pt.current;return p=ws(r,p),Cs(r,h),o=rc(t,r,o,u,p,h),u=ic(),t!==null&&!Yt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,_r(t,r,h)):(Ze&&u&&Uu(r),r.flags|=1,Kt(t,r,o,h),r.child)}function Dd(t,r,o,u,h){if(Jt(o)){var p=!0;$a(r)}else p=!1;if(Cs(r,h),r.stateNode===null)ll(t,r),vd(r,o,u),cc(r,o,u,h),u=!0;else if(t===null){var y=r.stateNode,_=r.memoizedProps;y.props=_;var C=y.context,F=o.contextType;typeof F=="object"&&F!==null?F=kn(F):(F=Jt(o)?xi:Pt.current,F=ws(r,F));var W=o.getDerivedStateFromProps,H=typeof W=="function"||typeof y.getSnapshotBeforeUpdate=="function";H||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==u||C!==F)&&bd(r,y,u,F),Kr=!1;var $=r.memoizedState;y.state=$,Za(r,u,y,h),C=r.memoizedState,_!==u||$!==C||Xt.current||Kr?(typeof W=="function"&&(uc(r,o,W,u),C=r.memoizedState),(_=Kr||yd(r,o,_,u,$,C,F))?(H||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=C),y.props=u,y.state=C,y.context=F,u=_):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{y=r.stateNode,Wf(t,r),_=r.memoizedProps,F=r.type===r.elementType?_:jn(r.type,_),y.props=F,H=r.pendingProps,$=y.context,C=o.contextType,typeof C=="object"&&C!==null?C=kn(C):(C=Jt(o)?xi:Pt.current,C=ws(r,C));var re=o.getDerivedStateFromProps;(W=typeof re=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==H||$!==C)&&bd(r,y,u,C),Kr=!1,$=r.memoizedState,y.state=$,Za(r,u,y,h);var oe=r.memoizedState;_!==H||$!==oe||Xt.current||Kr?(typeof re=="function"&&(uc(r,o,re,u),oe=r.memoizedState),(F=Kr||yd(r,o,F,u,$,oe,C)||!1)?(W||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,oe,C),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,oe,C)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===t.memoizedProps&&$===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&$===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=oe),y.props=u,y.state=oe,y.context=C,u=F):(typeof y.componentDidUpdate!="function"||_===t.memoizedProps&&$===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&$===t.memoizedState||(r.flags|=1024),u=!1)}return pc(t,r,o,u,p,h)}function pc(t,r,o,u,h,p){Nd(t,r);var y=(r.flags&128)!==0;if(!u&&!y)return h&&Pf(r,o,!1),_r(t,r,p);u=r.stateNode,xy.current=r;var _=y&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&y?(r.child=ks(r,t.child,null,p),r.child=ks(r,null,_,p)):Kt(t,r,_,p),r.memoizedState=u.state,h&&Pf(r,o,!0),r.child}function Ld(t){var r=t.stateNode;r.pendingContext?Of(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Of(t,r.context,!1),Ju(t,r.containerInfo)}function Ad(t,r,o,u,h){return Es(),$u(h),r.flags|=256,Kt(t,r,o,u),r.child}var mc={dehydrated:null,treeContext:null,retryLane:0};function gc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Od(t,r,o){var u=r.pendingProps,h=tt.current,p=!1,y=(r.flags&128)!==0,_;if((_=y)||(_=t!==null&&t.memoizedState===null?!1:(h&2)!==0),_?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),He(tt,h&1),t===null)return qu(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(y=u.children,t=u.fallback,p?(u=r.mode,p=r.child,y={mode:"hidden",children:y},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=y):p=wl(y,u,0,null),t=Pi(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=gc(o),r.memoizedState=mc,t):yc(r,y));if(h=t.memoizedState,h!==null&&(_=h.dehydrated,_!==null))return Cy(t,r,y,u,_,h,o);if(p){p=u.fallback,y=r.mode,h=t.child,_=h.sibling;var C={mode:"hidden",children:u.children};return(y&1)===0&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=C,r.deletions=null):(u=Yr(h,C),u.subtreeFlags=h.subtreeFlags&14680064),_!==null?p=Yr(_,p):(p=Pi(p,y,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,y=t.child.memoizedState,y=y===null?gc(o):{baseLanes:y.baseLanes|o,cachePool:null,transitions:y.transitions},p.memoizedState=y,p.childLanes=t.childLanes&~o,r.memoizedState=mc,u}return p=t.child,t=p.sibling,u=Yr(p,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function yc(t,r){return r=wl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function al(t,r,o,u){return u!==null&&$u(u),ks(r,t.child,null,o),t=yc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Cy(t,r,o,u,h,p,y){if(o)return r.flags&256?(r.flags&=-257,u=hc(Error(n(422))),al(t,r,y,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=wl({mode:"visible",children:u.children},h,0,null),p=Pi(p,h,y,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,(r.mode&1)!==0&&ks(r,t.child,null,y),r.child.memoizedState=gc(y),r.memoizedState=mc,p);if((r.mode&1)===0)return al(t,r,y,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var _=u.dgst;return u=_,p=Error(n(419)),u=hc(p,u,void 0),al(t,r,y,u)}if(_=(y&t.childLanes)!==0,Yt||_){if(u=kt,u!==null){switch(y&-y){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|y))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,br(t,h),$n(u,t,h,-1))}return Ac(),u=hc(Error(n(421))),al(t,r,y,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=By.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,fn=jr(h.nextSibling),hn=r,Ze=!0,Un=null,t!==null&&(Sn[En++]=yr,Sn[En++]=vr,Sn[En++]=Ci,yr=t.id,vr=t.overflow,Ci=r),r=yc(r,u.children),r.flags|=4096,r)}function Rd(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),Hu(t.return,r,o)}function vc(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function Pd(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(Kt(t,r,u.children,o),u=tt.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rd(t,o,r);else if(t.tag===19)Rd(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(He(tt,u),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&el(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),vc(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&el(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}vc(r,!0,o,null,p);break;case"together":vc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ll(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function _r(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Li|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Yr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Yr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function Iy(t,r,o){switch(r.tag){case 3:Ld(r),Es();break;case 5:Qf(r);break;case 1:Jt(r.type)&&$a(r);break;case 4:Ju(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;He(Xa,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(He(tt,tt.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?Od(t,r,o):(He(tt,tt.current&1),t=_r(t,r,o),t!==null?t.sibling:null);He(tt,tt.current&1);break;case 19:if(u=(o&r.childLanes)!==0,(t.flags&128)!==0){if(u)return Pd(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),He(tt,tt.current),u)break;return null;case 22:case 23:return r.lanes=0,Td(t,r,o)}return _r(t,r,o)}var Md,bc,Fd,zd;Md=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},bc=function(){},Fd=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,Ni(er.current);var p=null;switch(o){case"input":h=Vt(t,h),u=Vt(t,u),p=[];break;case"select":h=ne({},h,{value:void 0}),u=ne({},u,{value:void 0}),p=[];break;case"textarea":h=it(t,h),u=it(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=ja)}eo(o,u);var y;o=null;for(F in h)if(!u.hasOwnProperty(F)&&h.hasOwnProperty(F)&&h[F]!=null)if(F==="style"){var _=h[F];for(y in _)_.hasOwnProperty(y)&&(o||(o={}),o[y]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(a.hasOwnProperty(F)?p||(p=[]):(p=p||[]).push(F,null));for(F in u){var C=u[F];if(_=h!=null?h[F]:void 0,u.hasOwnProperty(F)&&C!==_&&(C!=null||_!=null))if(F==="style")if(_){for(y in _)!_.hasOwnProperty(y)||C&&C.hasOwnProperty(y)||(o||(o={}),o[y]="");for(y in C)C.hasOwnProperty(y)&&_[y]!==C[y]&&(o||(o={}),o[y]=C[y])}else o||(p||(p=[]),p.push(F,o)),o=C;else F==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,_=_?_.__html:void 0,C!=null&&_!==C&&(p=p||[]).push(F,C)):F==="children"?typeof C!="string"&&typeof C!="number"||(p=p||[]).push(F,""+C):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(a.hasOwnProperty(F)?(C!=null&&F==="onScroll"&&Xe("scroll",t),p||_===C||(p=[])):(p=p||[]).push(F,C))}o&&(p=p||[]).push("style",o);var F=p;(r.updateQueue=F)&&(r.flags|=4)}},zd=function(t,r,o,u){o!==u&&(r.flags|=4)};function Po(t,r){if(!Ze)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Ft(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function Ty(t,r,o){var u=r.pendingProps;switch(ju(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(r),null;case 1:return Jt(r.type)&&qa(),Ft(r),null;case 3:return u=r.stateNode,Is(),Je(Xt),Je(Pt),ec(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(Ha(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Un!==null&&(Nc(Un),Un=null))),bc(t,r),Ft(r),null;case 5:Yu(r);var h=Ni(Do.current);if(o=r.type,t!==null&&r.stateNode!=null)Fd(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Ft(r),null}if(t=Ni(er.current),Ha(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[Zn]=r,u[xo]=p,t=(r.mode&1)!==0,o){case"dialog":Xe("cancel",u),Xe("close",u);break;case"iframe":case"object":case"embed":Xe("load",u);break;case"video":case"audio":for(h=0;h<So.length;h++)Xe(So[h],u);break;case"source":Xe("error",u);break;case"img":case"image":case"link":Xe("error",u),Xe("load",u);break;case"details":Xe("toggle",u);break;case"input":Tr(u,p),Xe("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},Xe("invalid",u);break;case"textarea":Gt(u,p),Xe("invalid",u)}eo(o,p),h=null;for(var y in p)if(p.hasOwnProperty(y)){var _=p[y];y==="children"?typeof _=="string"?u.textContent!==_&&(p.suppressHydrationWarning!==!0&&Ua(u.textContent,_,t),h=["children",_]):typeof _=="number"&&u.textContent!==""+_&&(p.suppressHydrationWarning!==!0&&Ua(u.textContent,_,t),h=["children",""+_]):a.hasOwnProperty(y)&&_!=null&&y==="onScroll"&&Xe("scroll",u)}switch(o){case"input":ye(u),Nn(u,p,!0);break;case"textarea":ye(u),Qs(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=ja)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{y=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pt(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=y.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=y.createElement(o,{is:u.is}):(t=y.createElement(o),o==="select"&&(y=t,u.multiple?y.multiple=!0:u.size&&(y.size=u.size))):t=y.createElementNS(t,o),t[Zn]=r,t[xo]=u,Md(t,r,!1,!1),r.stateNode=t;e:{switch(y=to(o,u),o){case"dialog":Xe("cancel",t),Xe("close",t),h=u;break;case"iframe":case"object":case"embed":Xe("load",t),h=u;break;case"video":case"audio":for(h=0;h<So.length;h++)Xe(So[h],t);h=u;break;case"source":Xe("error",t),h=u;break;case"img":case"image":case"link":Xe("error",t),Xe("load",t),h=u;break;case"details":Xe("toggle",t),h=u;break;case"input":Tr(t,u),h=Vt(t,u),Xe("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=ne({},u,{value:void 0}),Xe("invalid",t);break;case"textarea":Gt(t,u),h=it(t,u),Xe("invalid",t);break;default:h=u}eo(o,h),_=h;for(p in _)if(_.hasOwnProperty(p)){var C=_[p];p==="style"?Ys(t,C):p==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&Xs(t,C)):p==="children"?typeof C=="string"?(o!=="textarea"||C!=="")&&Dr(t,C):typeof C=="number"&&Dr(t,""+C):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?C!=null&&p==="onScroll"&&Xe("scroll",t):C!=null&&ke(t,p,C,y))}switch(o){case"input":ye(t),Nn(t,u,!1);break;case"textarea":ye(t),Qs(t);break;case"option":u.value!=null&&t.setAttribute("value",""+V(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?on(t,!!u.multiple,p,!1):u.defaultValue!=null&&on(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=ja)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ft(r),null;case 6:if(t&&r.stateNode!=null)zd(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=Ni(Do.current),Ni(er.current),Ha(r)){if(u=r.stateNode,o=r.memoizedProps,u[Zn]=r,(p=u.nodeValue!==o)&&(t=hn,t!==null))switch(t.tag){case 3:Ua(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ua(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[Zn]=r,r.stateNode=u}return Ft(r),null;case 13:if(Je(tt),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&fn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)jf(),Es(),r.flags|=98560,p=!1;else if(p=Ha(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Zn]=r}else Es(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ft(r),p=!1}else Un!==null&&(Nc(Un),Un=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(tt.current&1)!==0?vt===0&&(vt=3):Ac())),r.updateQueue!==null&&(r.flags|=4),Ft(r),null);case 4:return Is(),bc(t,r),t===null&&Eo(r.stateNode.containerInfo),Ft(r),null;case 10:return Gu(r.type._context),Ft(r),null;case 17:return Jt(r.type)&&qa(),Ft(r),null;case 19:if(Je(tt),p=r.memoizedState,p===null)return Ft(r),null;if(u=(r.flags&128)!==0,y=p.rendering,y===null)if(u)Po(p,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(y=el(t),y!==null){for(r.flags|=128,Po(p,!1),u=y.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,y=p.alternate,y===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,p.type=y.type,t=y.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return He(tt,tt.current&1|2),r.child}t=t.sibling}p.tail!==null&&Ge()>Ls&&(r.flags|=128,u=!0,Po(p,!1),r.lanes=4194304)}else{if(!u)if(t=el(y),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Po(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!Ze)return Ft(r),null}else 2*Ge()-p.renderingStartTime>Ls&&o!==1073741824&&(r.flags|=128,u=!0,Po(p,!1),r.lanes=4194304);p.isBackwards?(y.sibling=r.child,r.child=y):(o=p.last,o!==null?o.sibling=y:r.child=y,p.last=y)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Ge(),r.sibling=null,o=tt.current,He(tt,u?o&1|2:o&1),r):(Ft(r),null);case 22:case 23:return Lc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(dn&1073741824)!==0&&(Ft(r),r.subtreeFlags&6&&(r.flags|=8192)):Ft(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function Ny(t,r){switch(ju(r),r.tag){case 1:return Jt(r.type)&&qa(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Is(),Je(Xt),Je(Pt),ec(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return Yu(r),null;case 13:if(Je(tt),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Es()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Je(tt),null;case 4:return Is(),null;case 10:return Gu(r.type._context),null;case 22:case 23:return Lc(),null;case 24:return null;default:return null}}var ul=!1,zt=!1,Dy=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Ns(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){st(t,r,u)}else o.current=null}function Bd(t,r,o){try{o()}catch(u){st(t,r,u)}}var Ud=!1;function Ly(t,r){if(Au=zr,t=yf(),ku(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var y=0,_=-1,C=-1,F=0,W=0,H=t,$=null;t:for(;;){for(var re;H!==o||h!==0&&H.nodeType!==3||(_=y+h),H!==p||u!==0&&H.nodeType!==3||(C=y+u),H.nodeType===3&&(y+=H.nodeValue.length),(re=H.firstChild)!==null;)$=H,H=re;for(;;){if(H===t)break t;if($===o&&++F===h&&(_=y),$===p&&++W===u&&(C=y),(re=H.nextSibling)!==null)break;H=$,$=H.parentNode}H=re}o=_===-1||C===-1?null:{start:_,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ou={focusedElem:t,selectionRange:o},zr=!1,ie=r;ie!==null;)if(r=ie,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ie=t;else for(;ie!==null;){r=ie;try{var oe=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var ae=oe.memoizedProps,at=oe.memoizedState,P=r.stateNode,I=P.getSnapshotBeforeUpdate(r.elementType===r.type?ae:jn(r.type,ae),at);P.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var M=r.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(X){st(r,r.return,X)}if(t=r.sibling,t!==null){t.return=r.return,ie=t;break}ie=r.return}return oe=Ud,Ud=!1,oe}function Mo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&Bd(r,o,p)}h=h.next}while(h!==u)}}function cl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function wc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function jd(t){var r=t.alternate;r!==null&&(t.alternate=null,jd(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Zn],delete r[xo],delete r[Fu],delete r[dy],delete r[py])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Vd(t){return t.tag===5||t.tag===3||t.tag===4}function qd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _c(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=ja));else if(u!==4&&(t=t.child,t!==null))for(_c(t,r,o),t=t.sibling;t!==null;)_c(t,r,o),t=t.sibling}function Sc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Sc(t,r,o),t=t.sibling;t!==null;)Sc(t,r,o),t=t.sibling}var Nt=null,Vn=!1;function Gr(t,r,o){for(o=o.child;o!==null;)$d(t,r,o),o=o.sibling}function $d(t,r,o){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(yi,o)}catch{}switch(o.tag){case 5:zt||Ns(o,r);case 6:var u=Nt,h=Vn;Nt=null,Gr(t,r,o),Nt=u,Vn=h,Nt!==null&&(Vn?(t=Nt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Nt.removeChild(o.stateNode));break;case 18:Nt!==null&&(Vn?(t=Nt,o=o.stateNode,t.nodeType===8?Mu(t.parentNode,o):t.nodeType===1&&Mu(t,o),Fn(t)):Mu(Nt,o.stateNode));break;case 4:u=Nt,h=Vn,Nt=o.stateNode.containerInfo,Vn=!0,Gr(t,r,o),Nt=u,Vn=h;break;case 0:case 11:case 14:case 15:if(!zt&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,y=p.destroy;p=p.tag,y!==void 0&&((p&2)!==0||(p&4)!==0)&&Bd(o,r,y),h=h.next}while(h!==u)}Gr(t,r,o);break;case 1:if(!zt&&(Ns(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(_){st(o,r,_)}Gr(t,r,o);break;case 21:Gr(t,r,o);break;case 22:o.mode&1?(zt=(u=zt)||o.memoizedState!==null,Gr(t,r,o),zt=u):Gr(t,r,o);break;default:Gr(t,r,o)}}function Kd(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Dy),r.forEach(function(u){var h=Uy.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function qn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,y=r,_=y;e:for(;_!==null;){switch(_.tag){case 5:Nt=_.stateNode,Vn=!1;break e;case 3:Nt=_.stateNode.containerInfo,Vn=!0;break e;case 4:Nt=_.stateNode.containerInfo,Vn=!0;break e}_=_.return}if(Nt===null)throw Error(n(160));$d(p,y,h),Nt=null,Vn=!1;var C=h.alternate;C!==null&&(C.return=null),h.return=null}catch(F){st(h,r,F)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Wd(r,t),r=r.sibling}function Wd(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(r,t),nr(t),u&4){try{Mo(3,t,t.return),cl(3,t)}catch(ae){st(t,t.return,ae)}try{Mo(5,t,t.return)}catch(ae){st(t,t.return,ae)}}break;case 1:qn(r,t),nr(t),u&512&&o!==null&&Ns(o,o.return);break;case 5:if(qn(r,t),nr(t),u&512&&o!==null&&Ns(o,o.return),t.flags&32){var h=t.stateNode;try{Dr(h,"")}catch(ae){st(t,t.return,ae)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,y=o!==null?o.memoizedProps:p,_=t.type,C=t.updateQueue;if(t.updateQueue=null,C!==null)try{_==="input"&&p.type==="radio"&&p.name!=null&&Nr(h,p),to(_,y);var F=to(_,p);for(y=0;y<C.length;y+=2){var W=C[y],H=C[y+1];W==="style"?Ys(h,H):W==="dangerouslySetInnerHTML"?Xs(h,H):W==="children"?Dr(h,H):ke(h,W,H,F)}switch(_){case"input":Tn(h,p);break;case"textarea":Ki(h,p);break;case"select":var $=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var re=p.value;re!=null?on(h,!!p.multiple,re,!1):$!==!!p.multiple&&(p.defaultValue!=null?on(h,!!p.multiple,p.defaultValue,!0):on(h,!!p.multiple,p.multiple?[]:"",!1))}h[xo]=p}catch(ae){st(t,t.return,ae)}}break;case 6:if(qn(r,t),nr(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(ae){st(t,t.return,ae)}}break;case 3:if(qn(r,t),nr(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Fn(r.containerInfo)}catch(ae){st(t,t.return,ae)}break;case 4:qn(r,t),nr(t);break;case 13:qn(r,t),nr(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(xc=Ge())),u&4&&Kd(t);break;case 22:if(W=o!==null&&o.memoizedState!==null,t.mode&1?(zt=(F=zt)||W,qn(r,t),zt=F):qn(r,t),nr(t),u&8192){if(F=t.memoizedState!==null,(t.stateNode.isHidden=F)&&!W&&(t.mode&1)!==0)for(ie=t,W=t.child;W!==null;){for(H=ie=W;ie!==null;){switch($=ie,re=$.child,$.tag){case 0:case 11:case 14:case 15:Mo(4,$,$.return);break;case 1:Ns($,$.return);var oe=$.stateNode;if(typeof oe.componentWillUnmount=="function"){u=$,o=$.return;try{r=u,oe.props=r.memoizedProps,oe.state=r.memoizedState,oe.componentWillUnmount()}catch(ae){st(u,o,ae)}}break;case 5:Ns($,$.return);break;case 22:if($.memoizedState!==null){Qd(H);continue}}re!==null?(re.return=$,ie=re):Qd(H)}W=W.sibling}e:for(W=null,H=t;;){if(H.tag===5){if(W===null){W=H;try{h=H.stateNode,F?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(_=H.stateNode,C=H.memoizedProps.style,y=C!=null&&C.hasOwnProperty("display")?C.display:null,_.style.display=Js("display",y))}catch(ae){st(t,t.return,ae)}}}else if(H.tag===6){if(W===null)try{H.stateNode.nodeValue=F?"":H.memoizedProps}catch(ae){st(t,t.return,ae)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===t)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===t)break e;for(;H.sibling===null;){if(H.return===null||H.return===t)break e;W===H&&(W=null),H=H.return}W===H&&(W=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:qn(r,t),nr(t),u&4&&Kd(t);break;case 21:break;default:qn(r,t),nr(t)}}function nr(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(Vd(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Dr(h,""),u.flags&=-33);var p=qd(t);Sc(t,p,h);break;case 3:case 4:var y=u.stateNode.containerInfo,_=qd(t);_c(t,_,y);break;default:throw Error(n(161))}}catch(C){st(t,t.return,C)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Ay(t,r,o){ie=t,Gd(t)}function Gd(t,r,o){for(var u=(t.mode&1)!==0;ie!==null;){var h=ie,p=h.child;if(h.tag===22&&u){var y=h.memoizedState!==null||ul;if(!y){var _=h.alternate,C=_!==null&&_.memoizedState!==null||zt;_=ul;var F=zt;if(ul=y,(zt=C)&&!F)for(ie=h;ie!==null;)y=ie,C=y.child,y.tag===22&&y.memoizedState!==null?Xd(h):C!==null?(C.return=y,ie=C):Xd(h);for(;p!==null;)ie=p,Gd(p),p=p.sibling;ie=h,ul=_,zt=F}Hd(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,ie=p):Hd(t)}}function Hd(t){for(;ie!==null;){var r=ie;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:zt||cl(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!zt)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:jn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Hf(r,p,u);break;case 3:var y=r.updateQueue;if(y!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}Hf(r,y,o)}break;case 5:var _=r.stateNode;if(o===null&&r.flags&4){o=_;var C=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&o.focus();break;case"img":C.src&&(o.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var F=r.alternate;if(F!==null){var W=F.memoizedState;if(W!==null){var H=W.dehydrated;H!==null&&Fn(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}zt||r.flags&512&&wc(r)}catch($){st(r,r.return,$)}}if(r===t){ie=null;break}if(o=r.sibling,o!==null){o.return=r.return,ie=o;break}ie=r.return}}function Qd(t){for(;ie!==null;){var r=ie;if(r===t){ie=null;break}var o=r.sibling;if(o!==null){o.return=r.return,ie=o;break}ie=r.return}}function Xd(t){for(;ie!==null;){var r=ie;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{cl(4,r)}catch(C){st(r,o,C)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(C){st(r,h,C)}}var p=r.return;try{wc(r)}catch(C){st(r,p,C)}break;case 5:var y=r.return;try{wc(r)}catch(C){st(r,y,C)}}}catch(C){st(r,r.return,C)}if(r===t){ie=null;break}var _=r.sibling;if(_!==null){_.return=r.return,ie=_;break}ie=r.return}}var Oy=Math.ceil,hl=ve.ReactCurrentDispatcher,Ec=ve.ReactCurrentOwner,Cn=ve.ReactCurrentBatchConfig,Re=0,kt=null,ct=null,Dt=0,dn=0,Ds=Vr(0),vt=0,Fo=null,Li=0,fl=0,kc=0,zo=null,Zt=null,xc=0,Ls=1/0,Sr=null,dl=!1,Cc=null,Hr=null,pl=!1,Qr=null,ml=0,Bo=0,Ic=null,gl=-1,yl=0;function Wt(){return(Re&6)!==0?Ge():gl!==-1?gl:gl=Ge()}function Xr(t){return(t.mode&1)===0?1:(Re&2)!==0&&Dt!==0?Dt&-Dt:gy.transition!==null?(yl===0&&(yl=bi()),yl):(t=De,t!==0||(t=window.event,t=t===void 0?16:fo(t.type)),t)}function $n(t,r,o,u){if(50<Bo)throw Bo=0,Ic=null,Error(n(185));Rr(t,o,u),((Re&2)===0||t!==kt)&&(t===kt&&((Re&2)===0&&(fl|=o),vt===4&&Jr(t,Dt)),en(t,u),o===1&&Re===0&&(r.mode&1)===0&&(Ls=Ge()+500,Ka&&$r()))}function en(t,r){var o=t.callbackNode;cr(t,r);var u=vi(t,t===kt?Dt:0);if(u===0)o!==null&&ao(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&ao(o),r===1)t.tag===0?my(Yd.bind(null,t)):Mf(Yd.bind(null,t)),hy(function(){(Re&6)===0&&$r()}),o=null;else{switch(Mr(u)){case 1:o=gi;break;case 4:o=Lr;break;case 16:o=bn;break;case 536870912:o=ya;break;default:o=bn}o=op(o,Jd.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function Jd(t,r){if(gl=-1,yl=0,(Re&6)!==0)throw Error(n(327));var o=t.callbackNode;if(As()&&t.callbackNode!==o)return null;var u=vi(t,t===kt?Dt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||r)r=vl(t,u);else{r=u;var h=Re;Re|=2;var p=ep();(kt!==t||Dt!==r)&&(Sr=null,Ls=Ge()+500,Oi(t,r));do try{My();break}catch(_){Zd(t,_)}while(!0);Wu(),hl.current=p,Re=h,ct!==null?r=0:(kt=null,Dt=0,r=vt)}if(r!==0){if(r===2&&(h=ln(t),h!==0&&(u=h,r=Tc(t,h))),r===1)throw o=Fo,Oi(t,0),Jr(t,u),en(t,Ge()),o;if(r===6)Jr(t,u);else{if(h=t.current.alternate,(u&30)===0&&!Ry(h)&&(r=vl(t,u),r===2&&(p=ln(t),p!==0&&(u=p,r=Tc(t,p))),r===1))throw o=Fo,Oi(t,0),Jr(t,u),en(t,Ge()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Ri(t,Zt,Sr);break;case 3:if(Jr(t,u),(u&130023424)===u&&(r=xc+500-Ge(),10<r)){if(vi(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){Wt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Pu(Ri.bind(null,t,Zt,Sr),r);break}Ri(t,Zt,Sr);break;case 4:if(Jr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var y=31-qt(u);p=1<<y,y=r[y],y>h&&(h=y),u&=~p}if(u=h,u=Ge()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Oy(u/1960))-u,10<u){t.timeoutHandle=Pu(Ri.bind(null,t,Zt,Sr),u);break}Ri(t,Zt,Sr);break;case 5:Ri(t,Zt,Sr);break;default:throw Error(n(329))}}}return en(t,Ge()),t.callbackNode===o?Jd.bind(null,t):null}function Tc(t,r){var o=zo;return t.current.memoizedState.isDehydrated&&(Oi(t,r).flags|=256),t=vl(t,r),t!==2&&(r=Zt,Zt=o,r!==null&&Nc(r)),t}function Nc(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function Ry(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!Bn(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Jr(t,r){for(r&=~kc,r&=~fl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-qt(r),u=1<<o;t[o]=-1,r&=~u}}function Yd(t){if((Re&6)!==0)throw Error(n(327));As();var r=vi(t,0);if((r&1)===0)return en(t,Ge()),null;var o=vl(t,r);if(t.tag!==0&&o===2){var u=ln(t);u!==0&&(r=u,o=Tc(t,u))}if(o===1)throw o=Fo,Oi(t,0),Jr(t,r),en(t,Ge()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Ri(t,Zt,Sr),en(t,Ge()),null}function Dc(t,r){var o=Re;Re|=1;try{return t(r)}finally{Re=o,Re===0&&(Ls=Ge()+500,Ka&&$r())}}function Ai(t){Qr!==null&&Qr.tag===0&&(Re&6)===0&&As();var r=Re;Re|=1;var o=Cn.transition,u=De;try{if(Cn.transition=null,De=1,t)return t()}finally{De=u,Cn.transition=o,Re=r,(Re&6)===0&&$r()}}function Lc(){dn=Ds.current,Je(Ds)}function Oi(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,cy(o)),ct!==null)for(o=ct.return;o!==null;){var u=o;switch(ju(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&qa();break;case 3:Is(),Je(Xt),Je(Pt),ec();break;case 5:Yu(u);break;case 4:Is();break;case 13:Je(tt);break;case 19:Je(tt);break;case 10:Gu(u.type._context);break;case 22:case 23:Lc()}o=o.return}if(kt=t,ct=t=Yr(t.current,null),Dt=dn=r,vt=0,Fo=null,kc=fl=Li=0,Zt=zo=null,Ti!==null){for(r=0;r<Ti.length;r++)if(o=Ti[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var y=p.next;p.next=h,u.next=y}o.pending=u}Ti=null}return t}function Zd(t,r){do{var o=ct;try{if(Wu(),tl.current=sl,nl){for(var u=nt.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}nl=!1}if(Di=0,Et=yt=nt=null,Lo=!1,Ao=0,Ec.current=null,o===null||o.return===null){vt=1,Fo=r,ct=null;break}e:{var p=t,y=o.return,_=o,C=r;if(r=Dt,_.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var F=C,W=_,H=W.tag;if((W.mode&1)===0&&(H===0||H===11||H===15)){var $=W.alternate;$?(W.updateQueue=$.updateQueue,W.memoizedState=$.memoizedState,W.lanes=$.lanes):(W.updateQueue=null,W.memoizedState=null)}var re=Ed(y);if(re!==null){re.flags&=-257,kd(re,y,_,p,r),re.mode&1&&Sd(p,F,r),r=re,C=F;var oe=r.updateQueue;if(oe===null){var ae=new Set;ae.add(C),r.updateQueue=ae}else oe.add(C);break e}else{if((r&1)===0){Sd(p,F,r),Ac();break e}C=Error(n(426))}}else if(Ze&&_.mode&1){var at=Ed(y);if(at!==null){(at.flags&65536)===0&&(at.flags|=256),kd(at,y,_,p,r),$u(Ts(C,_));break e}}p=C=Ts(C,_),vt!==4&&(vt=2),zo===null?zo=[p]:zo.push(p),p=y;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var P=wd(p,C,r);Gf(p,P);break e;case 1:_=C;var I=p.type,M=p.stateNode;if((p.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Hr===null||!Hr.has(M)))){p.flags|=65536,r&=-r,p.lanes|=r;var X=_d(p,_,r);Gf(p,X);break e}}p=p.return}while(p!==null)}np(o)}catch(ue){r=ue,ct===o&&o!==null&&(ct=o=o.return);continue}break}while(!0)}function ep(){var t=hl.current;return hl.current=sl,t===null?sl:t}function Ac(){(vt===0||vt===3||vt===2)&&(vt=4),kt===null||(Li&268435455)===0&&(fl&268435455)===0||Jr(kt,Dt)}function vl(t,r){var o=Re;Re|=2;var u=ep();(kt!==t||Dt!==r)&&(Sr=null,Oi(t,r));do try{Py();break}catch(h){Zd(t,h)}while(!0);if(Wu(),Re=o,hl.current=u,ct!==null)throw Error(n(261));return kt=null,Dt=0,vt}function Py(){for(;ct!==null;)tp(ct)}function My(){for(;ct!==null&&!ma();)tp(ct)}function tp(t){var r=sp(t.alternate,t,dn);t.memoizedProps=t.pendingProps,r===null?np(t):ct=r,Ec.current=null}function np(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=Ty(o,r,dn),o!==null){ct=o;return}}else{if(o=Ny(o,r),o!==null){o.flags&=32767,ct=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,ct=null;return}}if(r=r.sibling,r!==null){ct=r;return}ct=r=t}while(r!==null);vt===0&&(vt=5)}function Ri(t,r,o){var u=De,h=Cn.transition;try{Cn.transition=null,De=1,Fy(t,r,o,u)}finally{Cn.transition=h,De=u}return null}function Fy(t,r,o,u){do As();while(Qr!==null);if((Re&6)!==0)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(qe(t,p),t===kt&&(ct=kt=null,Dt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||pl||(pl=!0,op(bn,function(){return As(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=Cn.transition,Cn.transition=null;var y=De;De=1;var _=Re;Re|=4,Ec.current=null,Ly(t,o),Wd(o,t),ry(Ou),zr=!!Au,Ou=Au=null,t.current=o,Ay(o),gu(),Re=_,De=y,Cn.transition=p}else t.current=o;if(pl&&(pl=!1,Qr=t,ml=h),p=t.pendingLanes,p===0&&(Hr=null),va(o.stateNode),en(t,Ge()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(dl)throw dl=!1,t=Cc,Cc=null,t;return(ml&1)!==0&&t.tag!==0&&As(),p=t.pendingLanes,(p&1)!==0?t===Ic?Bo++:(Bo=0,Ic=t):Bo=0,$r(),null}function As(){if(Qr!==null){var t=Mr(ml),r=Cn.transition,o=De;try{if(Cn.transition=null,De=16>t?16:t,Qr===null)var u=!1;else{if(t=Qr,Qr=null,ml=0,(Re&6)!==0)throw Error(n(331));var h=Re;for(Re|=4,ie=t.current;ie!==null;){var p=ie,y=p.child;if((ie.flags&16)!==0){var _=p.deletions;if(_!==null){for(var C=0;C<_.length;C++){var F=_[C];for(ie=F;ie!==null;){var W=ie;switch(W.tag){case 0:case 11:case 15:Mo(8,W,p)}var H=W.child;if(H!==null)H.return=W,ie=H;else for(;ie!==null;){W=ie;var $=W.sibling,re=W.return;if(jd(W),W===F){ie=null;break}if($!==null){$.return=re,ie=$;break}ie=re}}}var oe=p.alternate;if(oe!==null){var ae=oe.child;if(ae!==null){oe.child=null;do{var at=ae.sibling;ae.sibling=null,ae=at}while(ae!==null)}}ie=p}}if((p.subtreeFlags&2064)!==0&&y!==null)y.return=p,ie=y;else e:for(;ie!==null;){if(p=ie,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Mo(9,p,p.return)}var P=p.sibling;if(P!==null){P.return=p.return,ie=P;break e}ie=p.return}}var I=t.current;for(ie=I;ie!==null;){y=ie;var M=y.child;if((y.subtreeFlags&2064)!==0&&M!==null)M.return=y,ie=M;else e:for(y=I;ie!==null;){if(_=ie,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:cl(9,_)}}catch(ue){st(_,_.return,ue)}if(_===y){ie=null;break e}var X=_.sibling;if(X!==null){X.return=_.return,ie=X;break e}ie=_.return}}if(Re=h,$r(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(yi,t)}catch{}u=!0}return u}finally{De=o,Cn.transition=r}}return!1}function rp(t,r,o){r=Ts(o,r),r=wd(t,r,1),t=Wr(t,r,1),r=Wt(),t!==null&&(Rr(t,1,r),en(t,r))}function st(t,r,o){if(t.tag===3)rp(t,t,o);else for(;r!==null;){if(r.tag===3){rp(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Hr===null||!Hr.has(u))){t=Ts(o,t),t=_d(r,t,1),r=Wr(r,t,1),t=Wt(),r!==null&&(Rr(r,1,t),en(r,t));break}}r=r.return}}function zy(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=Wt(),t.pingedLanes|=t.suspendedLanes&o,kt===t&&(Dt&o)===o&&(vt===4||vt===3&&(Dt&130023424)===Dt&&500>Ge()-xc?Oi(t,0):kc|=o),en(t,r)}function ip(t,r){r===0&&((t.mode&1)===0?r=1:(r=ts,ts<<=1,(ts&130023424)===0&&(ts=4194304)));var o=Wt();t=br(t,r),t!==null&&(Rr(t,r,o),en(t,o))}function By(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),ip(t,o)}function Uy(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),ip(t,o)}var sp;sp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||Xt.current)Yt=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return Yt=!1,Iy(t,r,o);Yt=(t.flags&131072)!==0}else Yt=!1,Ze&&(r.flags&1048576)!==0&&Ff(r,Ga,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;ll(t,r),t=r.pendingProps;var h=ws(r,Pt.current);Cs(r,o),h=rc(null,r,u,t,h,o);var p=ic();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Jt(u)?(p=!0,$a(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Xu(r),h.updater=ol,r.stateNode=h,h._reactInternals=r,cc(r,u,t,o),r=pc(null,r,u,!0,p,o)):(r.tag=0,Ze&&p&&Uu(r),Kt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(ll(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=Vy(u),t=jn(u,t),h){case 0:r=dc(null,r,u,t,o);break e;case 1:r=Dd(null,r,u,t,o);break e;case 11:r=xd(null,r,u,t,o);break e;case 14:r=Cd(null,r,u,jn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:jn(u,h),dc(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:jn(u,h),Dd(t,r,u,h,o);case 3:e:{if(Ld(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,Wf(t,r),Za(r,u,null,o);var y=r.memoizedState;if(u=y.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Ts(Error(n(423)),r),r=Ad(t,r,u,o,h);break e}else if(u!==h){h=Ts(Error(n(424)),r),r=Ad(t,r,u,o,h);break e}else for(fn=jr(r.stateNode.containerInfo.firstChild),hn=r,Ze=!0,Un=null,o=$f(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Es(),u===h){r=_r(t,r,o);break e}Kt(t,r,u,o)}r=r.child}return r;case 5:return Qf(r),t===null&&qu(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,y=h.children,Ru(u,h)?y=null:p!==null&&Ru(u,p)&&(r.flags|=32),Nd(t,r),Kt(t,r,y,o),r.child;case 6:return t===null&&qu(r),null;case 13:return Od(t,r,o);case 4:return Ju(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=ks(r,null,u,o):Kt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:jn(u,h),xd(t,r,u,h,o);case 7:return Kt(t,r,r.pendingProps,o),r.child;case 8:return Kt(t,r,r.pendingProps.children,o),r.child;case 12:return Kt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,y=h.value,He(Xa,u._currentValue),u._currentValue=y,p!==null)if(Bn(p.value,y)){if(p.children===h.children&&!Xt.current){r=_r(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var _=p.dependencies;if(_!==null){y=p.child;for(var C=_.firstContext;C!==null;){if(C.context===u){if(p.tag===1){C=wr(-1,o&-o),C.tag=2;var F=p.updateQueue;if(F!==null){F=F.shared;var W=F.pending;W===null?C.next=C:(C.next=W.next,W.next=C),F.pending=C}}p.lanes|=o,C=p.alternate,C!==null&&(C.lanes|=o),Hu(p.return,o,r),_.lanes|=o;break}C=C.next}}else if(p.tag===10)y=p.type===r.type?null:p.child;else if(p.tag===18){if(y=p.return,y===null)throw Error(n(341));y.lanes|=o,_=y.alternate,_!==null&&(_.lanes|=o),Hu(y,o,r),y=p.sibling}else y=p.child;if(y!==null)y.return=p;else for(y=p;y!==null;){if(y===r){y=null;break}if(p=y.sibling,p!==null){p.return=y.return,y=p;break}y=y.return}p=y}Kt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,Cs(r,o),h=kn(h),u=u(h),r.flags|=1,Kt(t,r,u,o),r.child;case 14:return u=r.type,h=jn(u,r.pendingProps),h=jn(u.type,h),Cd(t,r,u,h,o);case 15:return Id(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:jn(u,h),ll(t,r),r.tag=1,Jt(u)?(t=!0,$a(r)):t=!1,Cs(r,o),vd(r,u,h),cc(r,u,h,o),pc(null,r,u,!0,t,o);case 19:return Pd(t,r,o);case 22:return Td(t,r,o)}throw Error(n(156,r.tag))};function op(t,r){return Zi(t,r)}function jy(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,r,o,u){return new jy(t,r,o,u)}function Oc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vy(t){if(typeof t=="function")return Oc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===A)return 11;if(t===ft)return 14}return 2}function Yr(t,r){var o=t.alternate;return o===null?(o=In(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function bl(t,r,o,u,h,p){var y=2;if(u=t,typeof t=="function")Oc(t)&&(y=1);else if(typeof t=="string")y=5;else e:switch(t){case N:return Pi(o.children,h,p,r);case S:y=8,h|=8;break;case x:return t=In(12,o,r,h|2),t.elementType=x,t.lanes=p,t;case E:return t=In(13,o,r,h),t.elementType=E,t.lanes=p,t;case Ke:return t=In(19,o,r,h),t.elementType=Ke,t.lanes=p,t;case Ue:return wl(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case T:y=10;break e;case D:y=9;break e;case A:y=11;break e;case ft:y=14;break e;case dt:y=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=In(y,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function Pi(t,r,o,u){return t=In(7,t,u,r),t.lanes=o,t}function wl(t,r,o,u){return t=In(22,t,u,r),t.elementType=Ue,t.lanes=o,t.stateNode={isHidden:!1},t}function Rc(t,r,o){return t=In(6,t,null,r),t.lanes=o,t}function Pc(t,r,o){return r=In(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function qy(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Or(0),this.expirationTimes=Or(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Or(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Mc(t,r,o,u,h,p,y,_,C){return t=new qy(t,r,o,_,C),r===1?(r=1,p===!0&&(r|=8)):r=0,p=In(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xu(p),t}function $y(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Le,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function ap(t){if(!t)return qr;t=t._reactInternals;e:{if(An(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Jt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Jt(o))return Rf(t,o,r)}return r}function lp(t,r,o,u,h,p,y,_,C){return t=Mc(o,u,!0,t,h,p,y,_,C),t.context=ap(null),o=t.current,u=Wt(),h=Xr(o),p=wr(u,h),p.callback=r??null,Wr(o,p,h),t.current.lanes=h,Rr(t,h,u),en(t,u),t}function _l(t,r,o,u){var h=r.current,p=Wt(),y=Xr(h);return o=ap(o),r.context===null?r.context=o:r.pendingContext=o,r=wr(p,y),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=Wr(h,r,y),t!==null&&($n(t,h,y,p),Ya(t,h,y)),y}function Sl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function up(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Fc(t,r){up(t,r),(t=t.alternate)&&up(t,r)}function Ky(){return null}var cp=typeof reportError=="function"?reportError:function(t){console.error(t)};function zc(t){this._internalRoot=t}El.prototype.render=zc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));_l(t,r,null,null)},El.prototype.unmount=zc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Ai(function(){_l(null,t,null,null)}),r[mr]=null}};function El(t){this._internalRoot=t}El.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ea();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Qn.length&&r!==0&&r<Qn[o].priority;o++);Qn.splice(o,0,t),o===0&&Ca(t)}};function Bc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hp(){}function Wy(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var F=Sl(y);p.call(F)}}var y=lp(r,u,t,0,null,!1,!1,"",hp);return t._reactRootContainer=y,t[mr]=y.current,Eo(t.nodeType===8?t.parentNode:t),Ai(),y}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var _=u;u=function(){var F=Sl(C);_.call(F)}}var C=Mc(t,0,!1,null,null,!1,!1,"",hp);return t._reactRootContainer=C,t[mr]=C.current,Eo(t.nodeType===8?t.parentNode:t),Ai(function(){_l(r,C,o,u)}),C}function xl(t,r,o,u,h){var p=o._reactRootContainer;if(p){var y=p;if(typeof h=="function"){var _=h;h=function(){var C=Sl(y);_.call(C)}}_l(r,y,t,h)}else y=Wy(o,r,t,h,u);return Sl(y)}_a=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Ar(r.pendingLanes);o!==0&&(Pr(r,o|1),en(r,Ge()),(Re&6)===0&&(Ls=Ge()+500,$r()))}break;case 13:Ai(function(){var u=br(t,1);if(u!==null){var h=Wt();$n(u,t,1,h)}}),Fc(t,1)}},ns=function(t){if(t.tag===13){var r=br(t,134217728);if(r!==null){var o=Wt();$n(r,t,134217728,o)}Fc(t,134217728)}},Sa=function(t){if(t.tag===13){var r=Xr(t),o=br(t,r);if(o!==null){var u=Wt();$n(o,t,r,u)}Fc(t,r)}},Ea=function(){return De},ka=function(t,r){var o=De;try{return De=t,r()}finally{De=o}},Gi=function(t,r,o){switch(r){case"input":if(Tn(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=Va(u);if(!h)throw Error(n(90));We(u),Tn(u,h)}}}break;case"textarea":Ki(t,o);break;case"select":r=o.value,r!=null&&on(t,!!o.multiple,r,!1)}},fi=Dc,ro=Ai;var Gy={usingClientEntryPoint:!1,Events:[Co,vs,Va,Gn,no,Dc]},Uo={findFiberByHostInstance:ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hy={bundleType:Uo.bundleType,version:Uo.version,rendererPackageName:Uo.rendererPackageName,rendererConfig:Uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ve.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oo(t),t===null?null:t.stateNode},findFiberByHostInstance:Uo.findFiberByHostInstance||Ky,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{yi=Cl.inject(Hy),an=Cl}catch{}}return tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gy,tn.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bc(r))throw Error(n(200));return $y(t,r,null,o)},tn.createRoot=function(t,r){if(!Bc(t))throw Error(n(299));var o=!1,u="",h=cp;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Mc(t,1,!1,null,null,o,!1,u,h),t[mr]=r.current,Eo(t.nodeType===8?t.parentNode:t),new zc(r)},tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=oo(r),t=t===null?null:t.stateNode,t},tn.flushSync=function(t){return Ai(t)},tn.hydrate=function(t,r,o){if(!kl(r))throw Error(n(200));return xl(null,t,r,!0,o)},tn.hydrateRoot=function(t,r,o){if(!Bc(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",y=cp;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(y=o.onRecoverableError)),r=lp(r,null,t,1,o??null,h,!1,p,y),t[mr]=r.current,Eo(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new El(r)},tn.render=function(t,r,o){if(!kl(r))throw Error(n(200));return xl(null,t,r,!1,o)},tn.unmountComponentAtNode=function(t){if(!kl(t))throw Error(n(40));return t._reactRootContainer?(Ai(function(){xl(null,null,t,!1,function(){t._reactRootContainer=null,t[mr]=null})}),!0):!1},tn.unstable_batchedUpdates=Dc,tn.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!kl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return xl(t,r,o,!1,u)},tn.version="18.3.1-next-f1338f8080-20240426",tn}var Ep;function rv(){if(Ep)return Uc.exports;Ep=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Uc.exports=nv(),Uc.exports}var kp;function iv(){if(kp)return Il;kp=1;var i=rv();return Il.createRoot=i.createRoot,Il.hydrateRoot=i.hydrateRoot,Il}var sv=iv();const ov=bm(sv);var xp={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wm=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},av=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[n++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[n++],f=i[n++],g=i[n++],v=((a&7)<<18|(c&63)<<12|(f&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(v>>10)),e[s++]=String.fromCharCode(56320+(v&1023))}else{const c=i[n++],f=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},_m={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],f=a+1<i.length,g=f?i[a+1]:0,v=a+2<i.length,w=v?i[a+2]:0,k=c>>2,R=(c&3)<<4|g>>4;let z=(g&15)<<2|w>>6,q=w&63;v||(q=64,f||(z=64)),s.push(n[k],n[R],n[z],n[q])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(wm(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):av(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=n[i.charAt(a++)],f=a<i.length?n[i.charAt(a)]:0;++a;const g=a<i.length?n[i.charAt(a)]:64;++a;const v=a<i.length?n[i.charAt(a)]:64;if(++a,c==null||f==null||g==null||v==null)throw new lv;const w=c<<2|f>>4;if(s.push(w),g!==64){const k=f<<4&240|g>>2;if(s.push(k),v!==64){const R=g<<6&192|v;s.push(R)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class lv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uv=function(i){const e=wm(i);return _m.encodeByteArray(e,!0)},Bl=function(i){return uv(i).replace(/\./g,"")},cv=function(i){try{return _m.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fv=()=>hv().__FIREBASE_DEFAULTS__,dv=()=>{if(typeof process>"u"||typeof xp>"u")return;const i=xp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},pv=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&cv(i[1]);return e&&JSON.parse(e)},bh=()=>{try{return fv()||dv()||pv()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},mv=i=>{var e,n;return(n=(e=bh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},gv=i=>{const e=mv(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Sm=()=>{var i;return(i=bh())===null||i===void 0?void 0:i.config};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vv(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Bl(JSON.stringify(n)),Bl(JSON.stringify(f)),""].join(".")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wv(){var i;const e=(i=bh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _v(){return!wv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sv(){try{return typeof indexedDB=="object"}catch{return!1}}function Ev(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const kv="FirebaseError";class Ks extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=kv,Object.setPrototypeOf(this,Ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Em.prototype.create)}}class Em{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?xv(c,s):"Error",g=`${this.serviceName}: ${f} (${a}).`;return new Ks(a,g,s)}}function xv(i,e){return i.replace(Cv,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const Cv=/\{\$([^}]+)}/g;function Jc(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const c=i[a],f=e[a];if(Cp(c)&&Cp(f)){if(!Jc(c,f))return!1}else if(c!==f)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function Cp(i){return i!==null&&typeof i=="object"}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sr(i){return i&&i._delegate?i._delegate:i}class Jo{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Mi="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Iv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new yv;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Nv(e))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mi){return this.instances.has(e)}getOptions(e=Mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&f.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const f=this.instances.get(a);return f&&e(f,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Tv(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Mi){return this.component?this.component.multipleInstances?e:Mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Tv(i){return i===Mi?void 0:i}function Nv(i){return i.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Iv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Pe||(Pe={}));const Lv={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},Av=Pe.INFO,Ov={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},Rv=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=Ov[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class km{constructor(e){this.name=e,this._logLevel=Av,this._logHandler=Rv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Lv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const Pv=(i,e)=>e.some(n=>i instanceof n);let Ip,Tp;function Mv(){return Ip||(Ip=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fv(){return Tp||(Tp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xm=new WeakMap,Yc=new WeakMap,Cm=new WeakMap,jc=new WeakMap,wh=new WeakMap;function zv(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(ni(i.result)),a()},f=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&xm.set(n,i)}).catch(()=>{}),wh.set(e,i),e}function Bv(i){if(Yc.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),a()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});Yc.set(i,e)}let Zc={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Yc.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Cm.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ni(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Uv(i){Zc=i(Zc)}function jv(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Vc(this),e,...n);return Cm.set(s,e.sort?e.sort():[e]),ni(s)}:Fv().includes(i)?function(...e){return i.apply(Vc(this),e),ni(xm.get(this))}:function(...e){return ni(i.apply(Vc(this),e))}}function Vv(i){return typeof i=="function"?jv(i):(i instanceof IDBTransaction&&Bv(i),Pv(i,Mv())?new Proxy(i,Zc):i)}function ni(i){if(i instanceof IDBRequest)return zv(i);if(jc.has(i))return jc.get(i);const e=Vv(i);return e!==i&&(jc.set(i,e),wh.set(e,i)),e}const Vc=i=>wh.get(i);function qv(i,e,{blocked:n,upgrade:s,blocking:a,terminated:c}={}){const f=indexedDB.open(i,e),g=ni(f);return s&&f.addEventListener("upgradeneeded",v=>{s(ni(f.result),v.oldVersion,v.newVersion,ni(f.transaction),v)}),n&&f.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),g.then(v=>{c&&v.addEventListener("close",()=>c()),a&&v.addEventListener("versionchange",w=>a(w.oldVersion,w.newVersion,w))}).catch(()=>{}),g}const $v=["get","getKey","getAll","getAllKeys","count"],Kv=["put","add","delete","clear"],qc=new Map;function Np(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(qc.get(e))return qc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=Kv.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||$v.includes(n)))return;const c=async function(f,...g){const v=this.transaction(f,a?"readwrite":"readonly");let w=v.store;return s&&(w=w.index(g.shift())),(await Promise.all([w[n](...g),a&&v.done]))[0]};return qc.set(e,c),c}Uv(i=>({...i,get:(e,n,s)=>Np(e,n)||i.get(e,n,s),has:(e,n)=>!!Np(e,n)||i.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Gv(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function Gv(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const eh="@firebase/app",Dp="0.10.13";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const kr=new km("@firebase/app"),Hv="@firebase/app-compat",Qv="@firebase/analytics-compat",Xv="@firebase/analytics",Jv="@firebase/app-check-compat",Yv="@firebase/app-check",Zv="@firebase/auth",e0="@firebase/auth-compat",t0="@firebase/database",n0="@firebase/data-connect",r0="@firebase/database-compat",i0="@firebase/functions",s0="@firebase/functions-compat",o0="@firebase/installations",a0="@firebase/installations-compat",l0="@firebase/messaging",u0="@firebase/messaging-compat",c0="@firebase/performance",h0="@firebase/performance-compat",f0="@firebase/remote-config",d0="@firebase/remote-config-compat",p0="@firebase/storage",m0="@firebase/storage-compat",g0="@firebase/firestore",y0="@firebase/vertexai-preview",v0="@firebase/firestore-compat",b0="firebase",w0="10.14.1";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const th="[DEFAULT]",_0={[eh]:"fire-core",[Hv]:"fire-core-compat",[Xv]:"fire-analytics",[Qv]:"fire-analytics-compat",[Yv]:"fire-app-check",[Jv]:"fire-app-check-compat",[Zv]:"fire-auth",[e0]:"fire-auth-compat",[t0]:"fire-rtdb",[n0]:"fire-data-connect",[r0]:"fire-rtdb-compat",[i0]:"fire-fn",[s0]:"fire-fn-compat",[o0]:"fire-iid",[a0]:"fire-iid-compat",[l0]:"fire-fcm",[u0]:"fire-fcm-compat",[c0]:"fire-perf",[h0]:"fire-perf-compat",[f0]:"fire-rc",[d0]:"fire-rc-compat",[p0]:"fire-gcs",[m0]:"fire-gcs-compat",[g0]:"fire-fst",[v0]:"fire-fst-compat",[y0]:"fire-vertex","fire-js":"fire-js",[b0]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ul=new Map,S0=new Map,nh=new Map;function Lp(i,e){try{i.container.addComponent(e)}catch(n){kr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function jl(i){const e=i.name;if(nh.has(e))return kr.debug(`There were multiple attempts to register component ${e}.`),!1;nh.set(e,i);for(const n of Ul.values())Lp(n,i);for(const n of S0.values())Lp(n,i);return!0}function E0(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const k0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ri=new Em("app","Firebase",k0);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class x0{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Jo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ri.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const C0=w0;function Im(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:th,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw ri.create("bad-app-name",{appName:String(a)});if(n||(n=Sm()),!n)throw ri.create("no-options");const c=Ul.get(a);if(c){if(Jc(n,c.options)&&Jc(s,c.config))return c;throw ri.create("duplicate-app",{appName:a})}const f=new Dv(a);for(const v of nh.values())f.addComponent(v);const g=new x0(n,s,f);return Ul.set(a,g),g}function I0(i=th){const e=Ul.get(i);if(!e&&i===th&&Sm())return Im();if(!e)throw ri.create("no-app",{appName:i});return e}function Ms(i,e,n){var s;let a=(s=_0[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const c=a.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const g=[`Unable to register library "${a}" with version "${e}":`];c&&g.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&f&&g.push("and"),f&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kr.warn(g.join(" "));return}jl(new Jo(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const T0="firebase-heartbeat-database",N0=1,Yo="firebase-heartbeat-store";let $c=null;function Tm(){return $c||($c=qv(T0,N0,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Yo)}catch(n){console.warn(n)}}}}).catch(i=>{throw ri.create("idb-open",{originalErrorMessage:i.message})})),$c}async function D0(i){try{const e=(await Tm()).transaction(Yo),n=await e.objectStore(Yo).get(Nm(i));return await e.done,n}catch(e){if(e instanceof Ks)kr.warn(e.message);else{const n=ri.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kr.warn(n.message)}}}async function Ap(i,e){try{const n=(await Tm()).transaction(Yo,"readwrite");await n.objectStore(Yo).put(e,Nm(i)),await n.done}catch(n){if(n instanceof Ks)kr.warn(n.message);else{const s=ri.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});kr.warn(s.message)}}}function Nm(i){return`${i.name}!${i.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const L0=1024,A0=30*24*60*60*1e3;class O0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new P0(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Op();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const f=new Date(c.date).valueOf();return Date.now()-f<=A0}),this._storage.overwrite(this._heartbeatsCache))}catch(s){kr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Op(),{heartbeatsToSend:s,unsentEntries:a}=R0(this._heartbeatsCache.heartbeats),c=Bl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return kr.warn(n),""}}}function Op(){return new Date().toISOString().substring(0,10)}function R0(i,e=L0){const n=[];let s=i.slice();for(const a of i){const c=n.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),Rp(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Rp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class P0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sv()?Ev().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await D0(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ap(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ap(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Rp(i){return Bl(JSON.stringify({version:2,heartbeats:i})).length}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function M0(i){jl(new Jo("platform-logger",e=>new Wv(e),"PRIVATE")),jl(new Jo("heartbeat",e=>new O0(e),"PRIVATE")),Ms(eh,Dp,i),Ms(eh,Dp,"esm2017"),Ms("fire-js","")}M0("");var F0="firebase",z0="10.14.1";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/Ms(F0,z0,"app");var Pp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bi,Dm;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,S){function x(){}x.prototype=S.prototype,N.D=S.prototype,N.prototype=new x,N.prototype.constructor=N,N.C=function(T,D,A){for(var E=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)E[Ke-2]=arguments[Ke];return S.prototype[D].apply(T,E)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,S,x){x||(x=0);var T=Array(16);if(typeof S=="string")for(var D=0;16>D;++D)T[D]=S.charCodeAt(x++)|S.charCodeAt(x++)<<8|S.charCodeAt(x++)<<16|S.charCodeAt(x++)<<24;else for(D=0;16>D;++D)T[D]=S[x++]|S[x++]<<8|S[x++]<<16|S[x++]<<24;S=N.g[0],x=N.g[1],D=N.g[2];var A=N.g[3],E=S+(A^x&(D^A))+T[0]+3614090360&4294967295;S=x+(E<<7&4294967295|E>>>25),E=A+(D^S&(x^D))+T[1]+3905402710&4294967295,A=S+(E<<12&4294967295|E>>>20),E=D+(x^A&(S^x))+T[2]+606105819&4294967295,D=A+(E<<17&4294967295|E>>>15),E=x+(S^D&(A^S))+T[3]+3250441966&4294967295,x=D+(E<<22&4294967295|E>>>10),E=S+(A^x&(D^A))+T[4]+4118548399&4294967295,S=x+(E<<7&4294967295|E>>>25),E=A+(D^S&(x^D))+T[5]+1200080426&4294967295,A=S+(E<<12&4294967295|E>>>20),E=D+(x^A&(S^x))+T[6]+2821735955&4294967295,D=A+(E<<17&4294967295|E>>>15),E=x+(S^D&(A^S))+T[7]+4249261313&4294967295,x=D+(E<<22&4294967295|E>>>10),E=S+(A^x&(D^A))+T[8]+1770035416&4294967295,S=x+(E<<7&4294967295|E>>>25),E=A+(D^S&(x^D))+T[9]+2336552879&4294967295,A=S+(E<<12&4294967295|E>>>20),E=D+(x^A&(S^x))+T[10]+4294925233&4294967295,D=A+(E<<17&4294967295|E>>>15),E=x+(S^D&(A^S))+T[11]+2304563134&4294967295,x=D+(E<<22&4294967295|E>>>10),E=S+(A^x&(D^A))+T[12]+1804603682&4294967295,S=x+(E<<7&4294967295|E>>>25),E=A+(D^S&(x^D))+T[13]+4254626195&4294967295,A=S+(E<<12&4294967295|E>>>20),E=D+(x^A&(S^x))+T[14]+2792965006&4294967295,D=A+(E<<17&4294967295|E>>>15),E=x+(S^D&(A^S))+T[15]+1236535329&4294967295,x=D+(E<<22&4294967295|E>>>10),E=S+(D^A&(x^D))+T[1]+4129170786&4294967295,S=x+(E<<5&4294967295|E>>>27),E=A+(x^D&(S^x))+T[6]+3225465664&4294967295,A=S+(E<<9&4294967295|E>>>23),E=D+(S^x&(A^S))+T[11]+643717713&4294967295,D=A+(E<<14&4294967295|E>>>18),E=x+(A^S&(D^A))+T[0]+3921069994&4294967295,x=D+(E<<20&4294967295|E>>>12),E=S+(D^A&(x^D))+T[5]+3593408605&4294967295,S=x+(E<<5&4294967295|E>>>27),E=A+(x^D&(S^x))+T[10]+38016083&4294967295,A=S+(E<<9&4294967295|E>>>23),E=D+(S^x&(A^S))+T[15]+3634488961&4294967295,D=A+(E<<14&4294967295|E>>>18),E=x+(A^S&(D^A))+T[4]+3889429448&4294967295,x=D+(E<<20&4294967295|E>>>12),E=S+(D^A&(x^D))+T[9]+568446438&4294967295,S=x+(E<<5&4294967295|E>>>27),E=A+(x^D&(S^x))+T[14]+3275163606&4294967295,A=S+(E<<9&4294967295|E>>>23),E=D+(S^x&(A^S))+T[3]+4107603335&4294967295,D=A+(E<<14&4294967295|E>>>18),E=x+(A^S&(D^A))+T[8]+1163531501&4294967295,x=D+(E<<20&4294967295|E>>>12),E=S+(D^A&(x^D))+T[13]+2850285829&4294967295,S=x+(E<<5&4294967295|E>>>27),E=A+(x^D&(S^x))+T[2]+4243563512&4294967295,A=S+(E<<9&4294967295|E>>>23),E=D+(S^x&(A^S))+T[7]+1735328473&4294967295,D=A+(E<<14&4294967295|E>>>18),E=x+(A^S&(D^A))+T[12]+2368359562&4294967295,x=D+(E<<20&4294967295|E>>>12),E=S+(x^D^A)+T[5]+4294588738&4294967295,S=x+(E<<4&4294967295|E>>>28),E=A+(S^x^D)+T[8]+2272392833&4294967295,A=S+(E<<11&4294967295|E>>>21),E=D+(A^S^x)+T[11]+1839030562&4294967295,D=A+(E<<16&4294967295|E>>>16),E=x+(D^A^S)+T[14]+4259657740&4294967295,x=D+(E<<23&4294967295|E>>>9),E=S+(x^D^A)+T[1]+2763975236&4294967295,S=x+(E<<4&4294967295|E>>>28),E=A+(S^x^D)+T[4]+1272893353&4294967295,A=S+(E<<11&4294967295|E>>>21),E=D+(A^S^x)+T[7]+4139469664&4294967295,D=A+(E<<16&4294967295|E>>>16),E=x+(D^A^S)+T[10]+3200236656&4294967295,x=D+(E<<23&4294967295|E>>>9),E=S+(x^D^A)+T[13]+681279174&4294967295,S=x+(E<<4&4294967295|E>>>28),E=A+(S^x^D)+T[0]+3936430074&4294967295,A=S+(E<<11&4294967295|E>>>21),E=D+(A^S^x)+T[3]+3572445317&4294967295,D=A+(E<<16&4294967295|E>>>16),E=x+(D^A^S)+T[6]+76029189&4294967295,x=D+(E<<23&4294967295|E>>>9),E=S+(x^D^A)+T[9]+3654602809&4294967295,S=x+(E<<4&4294967295|E>>>28),E=A+(S^x^D)+T[12]+3873151461&4294967295,A=S+(E<<11&4294967295|E>>>21),E=D+(A^S^x)+T[15]+530742520&4294967295,D=A+(E<<16&4294967295|E>>>16),E=x+(D^A^S)+T[2]+3299628645&4294967295,x=D+(E<<23&4294967295|E>>>9),E=S+(D^(x|~A))+T[0]+4096336452&4294967295,S=x+(E<<6&4294967295|E>>>26),E=A+(x^(S|~D))+T[7]+1126891415&4294967295,A=S+(E<<10&4294967295|E>>>22),E=D+(S^(A|~x))+T[14]+2878612391&4294967295,D=A+(E<<15&4294967295|E>>>17),E=x+(A^(D|~S))+T[5]+4237533241&4294967295,x=D+(E<<21&4294967295|E>>>11),E=S+(D^(x|~A))+T[12]+1700485571&4294967295,S=x+(E<<6&4294967295|E>>>26),E=A+(x^(S|~D))+T[3]+2399980690&4294967295,A=S+(E<<10&4294967295|E>>>22),E=D+(S^(A|~x))+T[10]+4293915773&4294967295,D=A+(E<<15&4294967295|E>>>17),E=x+(A^(D|~S))+T[1]+2240044497&4294967295,x=D+(E<<21&4294967295|E>>>11),E=S+(D^(x|~A))+T[8]+1873313359&4294967295,S=x+(E<<6&4294967295|E>>>26),E=A+(x^(S|~D))+T[15]+4264355552&4294967295,A=S+(E<<10&4294967295|E>>>22),E=D+(S^(A|~x))+T[6]+2734768916&4294967295,D=A+(E<<15&4294967295|E>>>17),E=x+(A^(D|~S))+T[13]+1309151649&4294967295,x=D+(E<<21&4294967295|E>>>11),E=S+(D^(x|~A))+T[4]+4149444226&4294967295,S=x+(E<<6&4294967295|E>>>26),E=A+(x^(S|~D))+T[11]+3174756917&4294967295,A=S+(E<<10&4294967295|E>>>22),E=D+(S^(A|~x))+T[2]+718787259&4294967295,D=A+(E<<15&4294967295|E>>>17),E=x+(A^(D|~S))+T[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+A&4294967295}s.prototype.u=function(N,S){S===void 0&&(S=N.length);for(var x=S-this.blockSize,T=this.B,D=this.h,A=0;A<S;){if(D==0)for(;A<=x;)a(this,N,A),A+=this.blockSize;if(typeof N=="string"){for(;A<S;)if(T[D++]=N.charCodeAt(A++),D==this.blockSize){a(this,T),D=0;break}}else for(;A<S;)if(T[D++]=N[A++],D==this.blockSize){a(this,T),D=0;break}}this.h=D,this.o+=S},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;var x=8*this.o;for(S=N.length-8;S<N.length;++S)N[S]=x&255,x/=256;for(this.u(N),N=Array(16),S=x=0;4>S;++S)for(var T=0;32>T;T+=8)N[x++]=this.g[S]>>>T&255;return N};function c(N,S){var x=g;return Object.prototype.hasOwnProperty.call(x,N)?x[N]:x[N]=S(N)}function f(N,S){this.h=S;for(var x=[],T=!0,D=N.length-1;0<=D;D--){var A=N[D]|0;T&&A==S||(x[D]=A,T=!1)}this.g=x}var g={};function v(N){return-128<=N&&128>N?c(N,function(S){return new f([S|0],0>S?-1:0)}):new f([N|0],0>N?-1:0)}function w(N){if(isNaN(N)||!isFinite(N))return R;if(0>N)return U(w(-N));for(var S=[],x=1,T=0;N>=x;T++)S[T]=N/x|0,x*=4294967296;return new f(S,0)}function k(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return U(k(N.substring(1),S));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=w(Math.pow(S,8)),T=R,D=0;D<N.length;D+=8){var A=Math.min(8,N.length-D),E=parseInt(N.substring(D,D+A),S);8>A?(A=w(Math.pow(S,A)),T=T.j(A).add(w(E))):(T=T.j(x),T=T.add(w(E)))}return T}var R=v(0),z=v(1),q=v(16777216);i=f.prototype,i.m=function(){if(Z(this))return-U(this).m();for(var N=0,S=1,x=0;x<this.g.length;x++){var T=this.i(x);N+=(0<=T?T:4294967296+T)*S,S*=4294967296}return N},i.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(J(this))return"0";if(Z(this))return"-"+U(this).toString(N);for(var S=w(Math.pow(N,6)),x=this,T="";;){var D=ve(x,S).g;x=Ee(x,D.j(S));var A=((0<x.g.length?x.g[0]:x.h)>>>0).toString(N);if(x=D,J(x))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},i.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function J(N){if(N.h!=0)return!1;for(var S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function Z(N){return N.h==-1}i.l=function(N){return N=Ee(this,N),Z(N)?-1:J(N)?0:1};function U(N){for(var S=N.g.length,x=[],T=0;T<S;T++)x[T]=~N.g[T];return new f(x,~N.h).add(z)}i.abs=function(){return Z(this)?U(this):this},i.add=function(N){for(var S=Math.max(this.g.length,N.g.length),x=[],T=0,D=0;D<=S;D++){var A=T+(this.i(D)&65535)+(N.i(D)&65535),E=(A>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);T=E>>>16,A&=65535,E&=65535,x[D]=E<<16|A}return new f(x,x[x.length-1]&-2147483648?-1:0)};function Ee(N,S){return N.add(U(S))}i.j=function(N){if(J(this)||J(N))return R;if(Z(this))return Z(N)?U(this).j(U(N)):U(U(this).j(N));if(Z(N))return U(this.j(U(N)));if(0>this.l(q)&&0>N.l(q))return w(this.m()*N.m());for(var S=this.g.length+N.g.length,x=[],T=0;T<2*S;T++)x[T]=0;for(T=0;T<this.g.length;T++)for(var D=0;D<N.g.length;D++){var A=this.i(T)>>>16,E=this.i(T)&65535,Ke=N.i(D)>>>16,ft=N.i(D)&65535;x[2*T+2*D]+=E*ft,ge(x,2*T+2*D),x[2*T+2*D+1]+=A*ft,ge(x,2*T+2*D+1),x[2*T+2*D+1]+=E*Ke,ge(x,2*T+2*D+1),x[2*T+2*D+2]+=A*Ke,ge(x,2*T+2*D+2)}for(T=0;T<S;T++)x[T]=x[2*T+1]<<16|x[2*T];for(T=S;T<2*S;T++)x[T]=0;return new f(x,0)};function ge(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function ke(N,S){this.g=N,this.h=S}function ve(N,S){if(J(S))throw Error("division by zero");if(J(N))return new ke(R,R);if(Z(N))return S=ve(U(N),S),new ke(U(S.g),U(S.h));if(Z(S))return S=ve(N,U(S)),new ke(U(S.g),S.h);if(30<N.g.length){if(Z(N)||Z(S))throw Error("slowDivide_ only works with positive integers.");for(var x=z,T=S;0>=T.l(N);)x=Qe(x),T=Qe(T);var D=Le(x,1),A=Le(T,1);for(T=Le(T,2),x=Le(x,2);!J(T);){var E=A.add(T);0>=E.l(N)&&(D=D.add(x),A=E),T=Le(T,1),x=Le(x,1)}return S=Ee(N,D.j(S)),new ke(D,S)}for(D=R;0<=N.l(S);){for(x=Math.max(1,Math.floor(N.m()/S.m())),T=Math.ceil(Math.log(x)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=w(x),E=A.j(S);Z(E)||0<E.l(N);)x-=T,A=w(x),E=A.j(S);J(A)&&(A=z),D=D.add(A),N=Ee(N,E)}return new ke(D,N)}i.A=function(N){return ve(this,N).h},i.and=function(N){for(var S=Math.max(this.g.length,N.g.length),x=[],T=0;T<S;T++)x[T]=this.i(T)&N.i(T);return new f(x,this.h&N.h)},i.or=function(N){for(var S=Math.max(this.g.length,N.g.length),x=[],T=0;T<S;T++)x[T]=this.i(T)|N.i(T);return new f(x,this.h|N.h)},i.xor=function(N){for(var S=Math.max(this.g.length,N.g.length),x=[],T=0;T<S;T++)x[T]=this.i(T)^N.i(T);return new f(x,this.h^N.h)};function Qe(N){for(var S=N.g.length+1,x=[],T=0;T<S;T++)x[T]=N.i(T)<<1|N.i(T-1)>>>31;return new f(x,N.h)}function Le(N,S){var x=S>>5;S%=32;for(var T=N.g.length-x,D=[],A=0;A<T;A++)D[A]=0<S?N.i(A+x)>>>S|N.i(A+x+1)<<32-S:N.i(A+x);return new f(D,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Dm=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=w,f.fromString=k,Bi=f}).apply(typeof Pp<"u"?Pp:typeof self<"u"?self:typeof window<"u"?window:{});var Tl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lm,qo,Am,Rl,rh,Om,Rm,Pm;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,m){return l==Array.prototype||l==Object.prototype||(l[d]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tl=="object"&&Tl];for(var d=0;d<l.length;++d){var m=l[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=n(this);function a(l,d){if(d)e:{var m=s;l=l.split(".");for(var b=0;b<l.length-1;b++){var O=l[b];if(!(O in m))break e;m=m[O]}l=l[l.length-1],b=m[l],d=d(b),d!=b&&d!=null&&e(m,l,{configurable:!0,writable:!0,value:d})}}function c(l,d){l instanceof String&&(l+="");var m=0,b=!1,O={next:function(){if(!b&&m<l.length){var B=m++;return{value:d(B,l[B]),done:!1}}return b=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}a("Array.prototype.values",function(l){return l||function(){return c(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function v(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function w(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function k(l,d,m){return l.call.apply(l.bind,arguments)}function R(l,d,m){if(!l)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,b),l.apply(d,O)}}return function(){return l.apply(d,arguments)}}function z(l,d,m){return z=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?k:R,z.apply(null,arguments)}function q(l,d){var m=Array.prototype.slice.call(arguments,1);return function(){var b=m.slice();return b.push.apply(b,arguments),l.apply(this,b)}}function J(l,d){function m(){}m.prototype=d.prototype,l.aa=d.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(b,O,B){for(var ee=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)ee[$e-2]=arguments[$e];return d.prototype[O].apply(b,ee)}}function Z(l){const d=l.length;if(0<d){const m=Array(d);for(let b=0;b<d;b++)m[b]=l[b];return m}return[]}function U(l,d){for(let m=1;m<arguments.length;m++){const b=arguments[m];if(v(b)){const O=l.length||0,B=b.length||0;l.length=O+B;for(let ee=0;ee<B;ee++)l[O+ee]=b[ee]}else l.push(b)}}class Ee{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function ge(l){return/^[\s\xa0]*$/.test(l)}function ke(){var l=g.navigator;return l&&(l=l.userAgent)?l:""}function ve(l){return ve[" "](l),l}ve[" "]=function(){};var Qe=ke().indexOf("Gecko")!=-1&&!(ke().toLowerCase().indexOf("webkit")!=-1&&ke().indexOf("Edge")==-1)&&!(ke().indexOf("Trident")!=-1||ke().indexOf("MSIE")!=-1)&&ke().indexOf("Edge")==-1;function Le(l,d,m){for(const b in l)d.call(m,l[b],b,l)}function N(l,d){for(const m in l)d.call(void 0,l[m],m,l)}function S(l){const d={};for(const m in l)d[m]=l[m];return d}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,d){let m,b;for(let O=1;O<arguments.length;O++){b=arguments[O];for(m in b)l[m]=b[m];for(let B=0;B<x.length;B++)m=x[B],Object.prototype.hasOwnProperty.call(b,m)&&(l[m]=b[m])}}function D(l){var d=1;l=l.split(":");const m=[];for(;0<d&&l.length;)m.push(l.shift()),d--;return l.length&&m.push(l.join(":")),m}function A(l){g.setTimeout(()=>{throw l},0)}function E(){var l=fe;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class Ke{constructor(){this.h=this.g=null}add(d,m){const b=ft.get();b.set(d,m),this.h?this.h.next=b:this.g=b,this.h=b}}var ft=new Ee(()=>new dt,l=>l.reset());class dt{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,te=!1,fe=new Ke,ne=()=>{const l=g.Promise.resolve(void 0);Ue=()=>{l.then(L)}};var L=()=>{for(var l;l=E();){try{l.h.call(l.g)}catch(m){A(m)}var d=ft;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}te=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};g.addEventListener("test",m,d),g.removeEventListener("test",m,d)}catch{}return l}();function xe(l,d){if(he.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,b=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(Qe){e:{try{ve(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else m=="mouseover"?d=l.fromElement:m=="mouseout"&&(d=l.toElement);this.relatedTarget=d,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Te[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&xe.aa.h.call(this)}}J(xe,he);var Te={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),V=0;function Y(l,d,m,b,O){this.listener=l,this.proxy=null,this.src=d,this.type=m,this.capture=!!b,this.ha=O,this.key=++V,this.da=this.fa=!1}function se(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ye(l){this.src=l,this.g={},this.h=0}ye.prototype.add=function(l,d,m,b,O){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var ee=Me(l,d,b,O);return-1<ee?(d=l[ee],m||(d.fa=!1)):(d=new Y(d,this.src,B,!!b,O),d.fa=m,l.push(d)),d};function We(l,d){var m=d.type;if(m in l.g){var b=l.g[m],O=Array.prototype.indexOf.call(b,d,void 0),B;(B=0<=O)&&Array.prototype.splice.call(b,O,1),B&&(se(d),l.g[m].length==0&&(delete l.g[m],l.h--))}}function Me(l,d,m,b){for(var O=0;O<l.length;++O){var B=l[O];if(!B.da&&B.listener==d&&B.capture==!!m&&B.ha==b)return O}return-1}var Vt="closure_lm_"+(1e6*Math.random()|0),Tr={};function Nr(l,d,m,b,O){if(Array.isArray(d)){for(var B=0;B<d.length;B++)Nr(l,d[B],m,b,O);return null}return m=Qs(m),l&&l[Oe]?l.K(d,m,w(b)?!!b.capture:!1,O):Tn(l,d,m,!1,b,O)}function Tn(l,d,m,b,O,B){if(!d)throw Error("Invalid event type");var ee=w(O)?!!O.capture:!!O,$e=Gt(l);if($e||(l[Vt]=$e=new ye(l)),m=$e.add(d,m,b,ee,B),m.proxy)return m;if(b=Nn(),m.proxy=b,b.src=l,b.listener=m,l.addEventListener)Ce||(O=ee),O===void 0&&(O=!1),l.addEventListener(d.toString(),b,O);else if(l.attachEvent)l.attachEvent(on(d.toString()),b);else if(l.addListener&&l.removeListener)l.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Nn(){function l(m){return d.call(l.src,l.listener,m)}const d=it;return l}function Kn(l,d,m,b,O){if(Array.isArray(d))for(var B=0;B<d.length;B++)Kn(l,d[B],m,b,O);else b=w(b)?!!b.capture:!!b,m=Qs(m),l&&l[Oe]?(l=l.i,d=String(d).toString(),d in l.g&&(B=l.g[d],m=Me(B,m,b,O),-1<m&&(se(B[m]),Array.prototype.splice.call(B,m,1),B.length==0&&(delete l.g[d],l.h--)))):l&&(l=Gt(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Me(d,m,b,O)),(m=-1<l?d[l]:null)&&yn(m))}function yn(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Oe])We(d.i,l);else{var m=l.type,b=l.proxy;d.removeEventListener?d.removeEventListener(m,b,l.capture):d.detachEvent?d.detachEvent(on(m),b):d.addListener&&d.removeListener&&d.removeListener(b),(m=Gt(d))?(We(m,l),m.h==0&&(m.src=null,d[Vt]=null)):se(l)}}}function on(l){return l in Tr?Tr[l]:Tr[l]="on"+l}function it(l,d){if(l.da)l=!0;else{d=new xe(d,this);var m=l.listener,b=l.ha||l.src;l.fa&&yn(l),l=m.call(b,d)}return l}function Gt(l){return l=l[Vt],l instanceof ye?l:null}var Ki="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qs(l){return typeof l=="function"?l:(l[Ki]||(l[Ki]=function(d){return l.handleEvent(d)}),l[Ki])}function pt(){j.call(this),this.i=new ye(this),this.M=this,this.F=null}J(pt,j),pt.prototype[Oe]=!0,pt.prototype.removeEventListener=function(l,d,m,b){Kn(this,l,d,m,b)};function mt(l,d){var m,b=l.F;if(b)for(m=[];b;b=b.F)m.push(b);if(l=l.M,b=d.type||d,typeof d=="string")d=new he(d,l);else if(d instanceof he)d.target=d.target||l;else{var O=d;d=new he(b,l),T(d,O)}if(O=!0,m)for(var B=m.length-1;0<=B;B--){var ee=d.g=m[B];O=lr(ee,b,!0,d)&&O}if(ee=d.g=l,O=lr(ee,b,!0,d)&&O,O=lr(ee,b,!1,d)&&O,m)for(B=0;B<m.length;B++)ee=d.g=m[B],O=lr(ee,b,!1,d)&&O}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var m=l.g[d],b=0;b<m.length;b++)se(m[b]);delete l.g[d],l.h--}}this.F=null},pt.prototype.K=function(l,d,m,b){return this.i.add(String(l),d,!1,m,b)},pt.prototype.L=function(l,d,m,b){return this.i.add(String(l),d,!0,m,b)};function lr(l,d,m,b){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,B=0;B<d.length;++B){var ee=d[B];if(ee&&!ee.da&&ee.capture==m){var $e=ee.listener,gt=ee.ha||ee.src;ee.fa&&We(l.i,ee),O=$e.call(gt,b)!==!1&&O}}return O&&!b.defaultPrevented}function Xs(l,d,m){if(typeof l=="function")m&&(l=z(l,m));else if(l&&typeof l.handleEvent=="function")l=z(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:g.setTimeout(l,d||0)}function Dr(l){l.g=Xs(()=>{l.g=null,l.i&&(l.i=!1,Dr(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class ui extends j{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Dr(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ci(l){j.call(this),this.h=l,this.g={}}J(ci,j);var Js=[];function Ys(l){Le(l.g,function(d,m){this.g.hasOwnProperty(m)&&yn(d)},l),l.g={}}ci.prototype.N=function(){ci.aa.N.call(this),Ys(this)},ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zs=g.JSON.stringify,eo=g.JSON.parse,to=class{stringify(l){return g.JSON.stringify(l,void 0)}parse(l){return g.JSON.parse(l,void 0)}};function hi(){}hi.prototype.h=null;function Wi(l){return l.h||(l.h=l.i())}function Gi(){}var vn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wn(){he.call(this,"d")}J(Wn,he);function Hi(){he.call(this,"c")}J(Hi,he);var Gn={},no=null;function fi(){return no=no||new pt}Gn.La="serverreachability";function ro(l){he.call(this,Gn.La,l)}J(ro,he);function ur(l){const d=fi();mt(d,new ro(d))}Gn.STAT_EVENT="statevent";function io(l,d){he.call(this,Gn.STAT_EVENT,l),this.stat=d}J(io,he);function ot(l){const d=fi();mt(d,new io(d,l))}Gn.Ma="timingevent";function Qi(l,d){he.call(this,Gn.Ma,l),this.size=d}J(Qi,he);function Dn(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){l()},d)}function di(){this.g=!0}di.prototype.xa=function(){this.g=!1};function pi(l,d,m,b,O,B){l.info(function(){if(l.g)if(B)for(var ee="",$e=B.split("&"),gt=0;gt<$e.length;gt++){var Be=$e[gt].split("=");if(1<Be.length){var _t=Be[0];Be=Be[1];var St=_t.split("_");ee=2<=St.length&&St[1]=="type"?ee+(_t+"="+Be+"&"):ee+(_t+"=redacted&")}}else ee=null;else ee=B;return"XMLHTTP REQ ("+b+") [attempt "+O+"]: "+d+`
`+m+`
`+ee})}function Xi(l,d,m,b,O,B,ee){l.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+O+"]: "+d+`
`+m+`
`+B+" "+ee})}function Ln(l,d,m,b){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+mu(l,m)+(b?" "+b:"")})}function so(l,d){l.info(function(){return"TIMEOUT: "+d})}di.prototype.info=function(){};function mu(l,d){if(!l.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var b=m[l];if(!(2>b.length)){var O=b[1];if(Array.isArray(O)&&!(1>O.length)){var B=O[0];if(B!="noop"&&B!="stop"&&B!="close")for(var ee=1;ee<O.length;ee++)O[ee]=""}}}}return Zs(m)}catch{return d}}var Ji={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},da={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},An;function mi(){}J(mi,hi),mi.prototype.g=function(){return new XMLHttpRequest},mi.prototype.i=function(){return{}},An=new mi;function On(l,d,m,b){this.j=l,this.i=d,this.l=m,this.R=b||1,this.U=new ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pa}function pa(){this.i=null,this.g="",this.h=!1}var oo={},Yi={};function Zi(l,d,m){l.L=1,l.v=Pr(ln(d)),l.m=m,l.P=!0,ao(l,null)}function ao(l,d){l.F=Date.now(),Ge(l),l.A=ln(l.v);var m=l.A,b=l.R;Array.isArray(b)||(b=[String(b)]),Fr(m.i,"t",b),l.C=0,m=l.j.J,l.h=new pa,l.g=Aa(l.j,m?d:null,!l.m),0<l.O&&(l.M=new ui(z(l.Y,l,l.g),l.O)),d=l.U,m=l.g,b=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(Js[0]=O.toString()),O=Js);for(var B=0;B<O.length;B++){var ee=Nr(m,O[B],b||d.handleEvent,!1,d.h||d);if(!ee)break;d.g[ee.key]=ee}d=l.H?S(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),ur(),pi(l.i,l.u,l.A,l.l,l.R,l.m)}On.prototype.ca=function(l){l=l.target;const d=this.M;d&&Qt(l)==3?d.j():this.Y(l)},On.prototype.Y=function(l){try{if(l==this.g)e:{const St=Qt(this.g);var d=this.g.Ba();const _n=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||po(this.g)))){this.J||St!=4||d==7||(d==8||0>=_n?ur(3):ur(2)),gi(this);var m=this.g.Z();this.X=m;t:if(ma(this)){var b=po(this.g);l="";var O=b.length,B=Qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bn(this),Lr(this);var ee="";break t}this.h.i=new g.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,l+=this.h.i.decode(b[d],{stream:!(B&&d==O-1)});b.length=0,this.h.g+=l,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=m==200,Xi(this.i,this.u,this.A,this.l,this.R,St,m),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,gt=this.g;if(($e=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ge($e)){var Be=$e;break t}}Be=null}if(m=Be)Ln(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lo(this,m);else{this.o=!1,this.s=3,ot(12),bn(this),Lr(this);break e}}if(this.P){m=!0;let cn;for(;!this.J&&this.C<ee.length;)if(cn=gu(this,ee),cn==Yi){St==4&&(this.s=4,ot(14),m=!1),Ln(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==oo){this.s=4,ot(15),Ln(this.i,this.l,ee,"[Invalid Chunk]"),m=!1;break}else Ln(this.i,this.l,cn,null),lo(this,cn);if(ma(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||ee.length!=0||this.h.h||(this.s=1,ot(16),m=!1),this.o=this.o&&m,!m)Ln(this.i,this.l,ee,"[Invalid Chunked Response]"),bn(this),Lr(this);else if(0<ee.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),go(_t),_t.M=!0,ot(11))}}else Ln(this.i,this.l,ee,null),lo(this,ee);St==4&&bn(this),this.o&&!this.J&&(St==4?cs(this.j,this):(this.o=!1,Ge(this)))}else ss(this.g),m==400&&0<ee.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),bn(this),Lr(this)}}}catch{}finally{}};function ma(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function gu(l,d){var m=l.C,b=d.indexOf(`
`,m);return b==-1?Yi:(m=Number(d.substring(m,b)),isNaN(m)?oo:(b+=1,b+m>d.length?Yi:(d=d.slice(b,b+m),l.C=b+m,d)))}On.prototype.cancel=function(){this.J=!0,bn(this)};function Ge(l){l.S=Date.now()+l.I,ga(l,l.I)}function ga(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Dn(z(l.ba,l),d)}function gi(l){l.B&&(g.clearTimeout(l.B),l.B=null)}On.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(so(this.i,this.A),this.L!=2&&(ur(),ot(17)),bn(this),this.s=2,Lr(this)):ga(this,this.S-l)};function Lr(l){l.j.G==0||l.J||cs(l.j,l)}function bn(l){gi(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,Ys(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function lo(l,d){try{var m=l.j;if(m.G!=0&&(m.g==l||qt(m.h,l))){if(!l.K&&qt(m.h,l)&&m.G==3){try{var b=m.Da.g.parse(d)}catch{b=null}if(Array.isArray(b)&&b.length==3){var O=b;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)us(m),zn(m);else break e;ls(m),ot(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=Dn(z(m.Za,m),6e3));if(1>=va(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else pr(m,11)}else if((l.K||m.g==l)&&us(m),!ge(d))for(O=m.Da.g.parse(d),d=0;d<O.length;d++){let Be=O[d];if(m.T=Be[0],Be=Be[1],m.G==2)if(Be[0]=="c"){m.K=Be[1],m.ia=Be[2];const _t=Be[3];_t!=null&&(m.la=_t,m.j.info("VER="+m.la));const St=Be[4];St!=null&&(m.Aa=St,m.j.info("SVER="+m.Aa));const _n=Be[5];_n!=null&&typeof _n=="number"&&0<_n&&(b=1.5*_n,m.L=b,m.j.info("backChannelRequestTimeoutMs_="+b)),b=m;const cn=l.g;if(cn){const Ei=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ei){var B=b.h;B.g||Ei.indexOf("spdy")==-1&&Ei.indexOf("quic")==-1&&Ei.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(uo(B,B.h),B.h=null))}if(b.D){const fs=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;fs&&(b.ya=fs,qe(b.I,b.D,fs))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),b=m;var ee=l;if(b.qa=La(b,b.J?b.ia:null,b.W),ee.K){ba(b.h,ee);var $e=ee,gt=b.L;gt&&($e.I=gt),$e.B&&(gi($e),Ge($e)),b.g=ee}else Si(b);0<m.i.length&&Jn(m)}else Be[0]!="stop"&&Be[0]!="close"||pr(m,7);else m.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?pr(m,7):Tt(m):Be[0]!="noop"&&m.l&&m.l.ta(Be),m.v=0)}}ur(4)}catch{}}var ya=class{constructor(l,d){this.g=l,this.map=d}};function yi(l){this.l=l||10,g.PerformanceNavigationTiming?(l=g.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function an(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function va(l){return l.h?1:l.g?l.g.size:0}function qt(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function uo(l,d){l.g?l.g.add(d):l.h=d}function ba(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}yi.prototype.cancel=function(){if(this.i=wa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function wa(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const m of l.g.values())d=d.concat(m.D);return d}return Z(l.i)}function es(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(v(l)){for(var d=[],m=l.length,b=0;b<m;b++)d.push(l[b]);return d}d=[],m=0;for(b in l)d[m++]=l[b];return d}function ts(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(v(l)||typeof l=="string"){var d=[];l=l.length;for(var m=0;m<l;m++)d.push(m);return d}d=[],m=0;for(const b in l)d[m++]=b;return d}}}function Ar(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(v(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var m=ts(l),b=es(l),O=b.length,B=0;B<O;B++)d.call(void 0,b[B],m&&m[B],l)}var vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yu(l,d){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var b=l[m].indexOf("="),O=null;if(0<=b){var B=l[m].substring(0,b);O=l[m].substring(b+1)}else B=l[m];d(B,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function cr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof cr){this.h=l.h,bi(this,l.j),this.o=l.o,this.g=l.g,Or(this,l.s),this.l=l.l;var d=l.i,m=new Hn;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),Rr(this,m),this.m=l.m}else l&&(d=String(l).match(vi))?(this.h=!1,bi(this,d[1]||"",!0),this.o=De(d[2]||""),this.g=De(d[3]||"",!0),Or(this,d[4]),this.l=De(d[5]||"",!0),Rr(this,d[6]||"",!0),this.m=De(d[7]||"")):(this.h=!1,this.i=new Hn(null,this.h))}cr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Mr(d,ns,!0),":");var m=this.g;return(m||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Mr(d,ns,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Mr(m,m.charAt(0)=="/"?Ea:Sa,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Mr(m,co)),l.join("")};function ln(l){return new cr(l)}function bi(l,d,m){l.j=m?De(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Or(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Rr(l,d,m){d instanceof Hn?(l.i=d,Qn(l.i,l.h)):(m||(d=Mr(d,ka)),l.i=new Hn(d,l.h))}function qe(l,d,m){l.i.set(d,m)}function Pr(l){return qe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function De(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Mr(l,d,m){return typeof l=="string"?(l=encodeURI(l).replace(d,_a),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function _a(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ns=/[#\/\?@]/g,Sa=/[#\?:]/g,Ea=/[#\?]/g,ka=/[#\?@]/g,co=/#/g;function Hn(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function It(l){l.g||(l.g=new Map,l.h=0,l.i&&yu(l.i,function(d,m){l.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}i=Hn.prototype,i.add=function(l,d){It(this),this.i=null,l=wn(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(d),this.h+=1,this};function Rn(l,d){It(l),d=wn(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Pn(l,d){return It(l),d=wn(l,d),l.g.has(d)}i.forEach=function(l,d){It(this),this.g.forEach(function(m,b){m.forEach(function(O){l.call(d,O,b,this)},this)},this)},i.na=function(){It(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let b=0;b<d.length;b++){const O=l[b];for(let B=0;B<O.length;B++)m.push(d[b])}return m},i.V=function(l){It(this);let d=[];if(typeof l=="string")Pn(this,l)&&(d=d.concat(this.g.get(wn(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)d=d.concat(l[m])}return d},i.set=function(l,d){return It(this),this.i=null,l=wn(this,l),Pn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},i.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Fr(l,d,m){Rn(l,d),0<m.length&&(l.i=null,l.g.set(wn(l,d),Z(m)),l.h+=m.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var b=d[m];const B=encodeURIComponent(String(b)),ee=this.V(b);for(b=0;b<ee.length;b++){var O=B;ee[b]!==""&&(O+="="+encodeURIComponent(String(ee[b]))),l.push(O)}}return this.i=l.join("&")};function wn(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Qn(l,d){d&&!l.j&&(It(l),l.i=null,l.g.forEach(function(m,b){var O=b.toLowerCase();b!=O&&(Rn(this,b),Fr(this,O,m))},l)),l.j=d}function vu(l,d){const m=new di;if(g.Image){const b=new Image;b.onload=q(Ht,m,"TestLoadImage: loaded",!0,d,b),b.onerror=q(Ht,m,"TestLoadImage: error",!1,d,b),b.onabort=q(Ht,m,"TestLoadImage: abort",!1,d,b),b.ontimeout=q(Ht,m,"TestLoadImage: timeout",!1,d,b),g.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=l}else d(!1)}function xa(l,d){const m=new di,b=new AbortController,O=setTimeout(()=>{b.abort(),Ht(m,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:b.signal}).then(B=>{clearTimeout(O),B.ok?Ht(m,"TestPingServer: ok",!0,d):Ht(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),Ht(m,"TestPingServer: error",!1,d)})}function Ht(l,d,m,b,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),b(m)}catch{}}function bu(){this.g=new to}function Ca(l,d,m){const b=m||"";try{Ar(l,function(O,B){let ee=O;w(O)&&(ee=Zs(O)),d.push(b+B+"="+encodeURIComponent(ee))})}catch(O){throw d.push(b+"type="+encodeURIComponent("_badmap")),O}}function hr(l){this.l=l.Ub||null,this.j=l.eb||!1}J(hr,hi),hr.prototype.g=function(){return new wi(this.l,this.j)},hr.prototype.i=function(l){return function(){return l}}({});function wi(l,d){pt.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}J(wi,pt),i=wi.prototype,i.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,Fn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||g).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Fn(this)),this.g&&(this.readyState=3,Fn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ia(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ia(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Mn(this):Fn(this),this.readyState==3&&Ia(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,Mn(this))},i.Qa=function(l){this.g&&(this.response=l,Mn(this))},i.ga=function(){this.g&&Mn(this)};function Mn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Fn(l)}i.setRequestHeader=function(l,d){this.u.append(l,d)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=d.next();return l.join(`\r
`)};function Fn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function fr(l){let d="";return Le(l,function(m,b){d+=b,d+=":",d+=m,d+=`\r
`}),d}function zr(l,d,m){e:{for(b in m){var b=!1;break e}b=!0}b||(m=fr(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):qe(l,d,m))}function Ye(l){pt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}J(Ye,pt);var wu=/^https?$/i,ho=["POST","PUT"];i=Ye.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,d,m,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():An.g(),this.v=this.o?Wi(this.o):Wi(An),this.g.onreadystatechange=z(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(B){_i(this,B);return}if(l=m||"",m=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var O in b)m.set(O,b[O]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const B of b.keys())m.set(B,b.get(B));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(m.keys()).find(B=>B.toLowerCase()=="content-type"),O=g.FormData&&l instanceof g.FormData,!(0<=Array.prototype.indexOf.call(ho,d,void 0))||b||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ee]of m)this.g.setRequestHeader(B,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{is(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){_i(this,B)}};function _i(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,rs(l),un(l)}function rs(l){l.A||(l.A=!0,mt(l,"complete"),mt(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,mt(this,"complete"),mt(this,"abort"),un(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),un(this,!0)),Ye.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?fo(this):this.bb())},i.bb=function(){fo(this)};function fo(l){if(l.h&&typeof f<"u"&&(!l.v[1]||Qt(l)!=4||l.Z()!=2)){if(l.u&&Qt(l)==4)Xs(l.Ea,0,l);else if(mt(l,"readystatechange"),Qt(l)==4){l.h=!1;try{const ee=l.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var b;if(b=ee===0){var O=String(l.D).match(vi)[1]||null;!O&&g.self&&g.self.location&&(O=g.self.location.protocol.slice(0,-1)),b=!wu.test(O?O.toLowerCase():"")}m=b}if(m)mt(l,"complete"),mt(l,"success");else{l.m=6;try{var B=2<Qt(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",rs(l)}}finally{un(l)}}}}function un(l,d){if(l.g){is(l);const m=l.g,b=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||mt(l,"ready");try{m.onreadystatechange=b}catch{}}}function is(l){l.I&&(g.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function Qt(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<Qt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),eo(d)}};function po(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function ss(l){const d={};l=(l.g&&2<=Qt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<l.length;b++){if(ge(l[b]))continue;var m=D(l[b]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const B=d[O]||[];d[O]=B,B.push(m)}N(d,function(b){return b.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(l,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||d}function mo(l){this.Aa=0,this.i=[],this.j=new di,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xn("baseRetryDelayMs",5e3,l),this.cb=Xn("retryDelaySeedMs",1e4,l),this.Wa=Xn("forwardChannelMaxRetries",2,l),this.wa=Xn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new yi(l&&l.concurrentRequestLimit),this.Da=new bu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=mo.prototype,i.la=8,i.G=1,i.connect=function(l,d,m,b){ot(0),this.W=l,this.H=d||{},m&&b!==void 0&&(this.H.OSID=m,this.H.OAID=b),this.F=this.X,this.I=La(this,null,this.W),Jn(this)};function Tt(l){if(os(l),l.G==3){var d=l.U++,m=ln(l.I);if(qe(m,"SID",l.K),qe(m,"RID",d),qe(m,"TYPE","terminate"),dr(l,m),d=new On(l,l.j,d),d.L=2,d.v=Pr(ln(m)),m=!1,g.navigator&&g.navigator.sendBeacon)try{m=g.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&g.Image&&(new Image().src=d.v,m=!0),m||(d.g=Aa(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ge(d)}Da(l)}function zn(l){l.g&&(go(l),l.g.cancel(),l.g=null)}function os(l){zn(l),l.u&&(g.clearTimeout(l.u),l.u=null),us(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&g.clearTimeout(l.s),l.s=null)}function Jn(l){if(!an(l.h)&&!l.s){l.s=!0;var d=l.Ga;Ue||ne(),te||(Ue(),te=!0),fe.add(d,l),l.B=0}}function _u(l,d){return va(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Dn(z(l.Ga,l,d),Na(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new On(this,this.j,l);let B=this.o;if(this.S&&(B?(B=S(B),T(B,this.S)):B=this.S),this.m!==null||this.O||(O.H=B,B=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var b=this.i[m];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(d+=b,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Br(this,O,d),m=ln(this.I),qe(m,"RID",l),qe(m,"CVER",22),this.D&&qe(m,"X-HTTP-Session-Id",this.D),dr(this,m),B&&(this.O?d="headers="+encodeURIComponent(String(fr(B)))+"&"+d:this.m&&zr(m,this.m,B)),uo(this.h,O),this.Ua&&qe(m,"TYPE","init"),this.P?(qe(m,"$req",d),qe(m,"SID","null"),O.T=!0,Zi(O,m,null)):Zi(O,m,d),this.G=2}}else this.G==3&&(l?as(this,l):this.i.length==0||an(this.h)||as(this))};function as(l,d){var m;d?m=d.l:m=l.U++;const b=ln(l.I);qe(b,"SID",l.K),qe(b,"RID",m),qe(b,"AID",l.T),dr(l,b),l.m&&l.o&&zr(b,l.m,l.o),m=new On(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Br(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),uo(l.h,m),Zi(m,b,d)}function dr(l,d){l.H&&Le(l.H,function(m,b){qe(d,b,m)}),l.l&&Ar({},function(m,b){qe(d,b,m)})}function Br(l,d,m){m=Math.min(l.i.length,m);var b=l.l?z(l.l.Na,l.l,l):null;e:{var O=l.i;let B=-1;for(;;){const ee=["count="+m];B==-1?0<m?(B=O[0].g,ee.push("ofs="+B)):B=0:ee.push("ofs="+B);let $e=!0;for(let gt=0;gt<m;gt++){let Be=O[gt].g;const _t=O[gt].map;if(Be-=B,0>Be)B=Math.max(0,O[gt].g-100),$e=!1;else try{Ca(_t,ee,"req"+Be+"_")}catch{b&&b(_t)}}if($e){b=ee.join("&");break e}}}return l=l.i.splice(0,m),d.D=l,b}function Si(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Ue||ne(),te||(Ue(),te=!0),fe.add(d,l),l.v=0}}function ls(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Dn(z(l.Fa,l),Na(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,Ta(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Dn(z(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),zn(this),Ta(this))};function go(l){l.A!=null&&(g.clearTimeout(l.A),l.A=null)}function Ta(l){l.g=new On(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=ln(l.qa);qe(d,"RID","rpc"),qe(d,"SID",l.K),qe(d,"AID",l.T),qe(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&qe(d,"TO",l.ja),qe(d,"TYPE","xmlhttp"),dr(l,d),l.m&&l.o&&zr(d,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Pr(ln(d)),m.m=null,m.P=!0,ao(m,l)}i.Za=function(){this.C!=null&&(this.C=null,zn(this),ls(this),ot(19))};function us(l){l.C!=null&&(g.clearTimeout(l.C),l.C=null)}function cs(l,d){var m=null;if(l.g==d){us(l),go(l),l.g=null;var b=2}else if(qt(l.h,d))m=d.D,ba(l.h,d),b=1;else return;if(l.G!=0){if(d.o)if(b==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var O=l.B;b=fi(),mt(b,new Qi(b,m)),Jn(l)}else Si(l);else if(O=d.s,O==3||O==0&&0<d.X||!(b==1&&_u(l,d)||b==2&&ls(l)))switch(m&&0<m.length&&(d=l.h,d.i=d.i.concat(m)),O){case 1:pr(l,5);break;case 4:pr(l,10);break;case 3:pr(l,6);break;default:pr(l,2)}}}function Na(l,d){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*d}function pr(l,d){if(l.j.info("Error code "+d),d==2){var m=z(l.fb,l),b=l.Xa;const O=!b;b=new cr(b||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||bi(b,"https"),Pr(b),O?vu(b.toString(),m):xa(b.toString(),m)}else ot(2);l.G=0,l.l&&l.l.sa(d),Da(l),os(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Da(l){if(l.G=0,l.ka=[],l.l){const d=wa(l.h);(d.length!=0||l.i.length!=0)&&(U(l.ka,d),U(l.ka,l.i),l.h.i.length=0,Z(l.i),l.i.length=0),l.l.ra()}}function La(l,d,m){var b=m instanceof cr?ln(m):new cr(m);if(b.g!="")d&&(b.g=d+"."+b.g),Or(b,b.s);else{var O=g.location;b=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var B=new cr(null);b&&bi(B,b),d&&(B.g=d),O&&Or(B,O),m&&(B.l=m),b=B}return m=l.D,d=l.ya,m&&d&&qe(b,m,d),qe(b,"VER",l.la),dr(l,b),b}function Aa(l,d,m){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Ye(new hr({eb:m})):new Ye(l.pa),d.Ha(l.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function yo(){}i=yo.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function hs(){}hs.prototype.g=function(l,d){return new $t(l,d)};function $t(l,d){pt.call(this),this.g=new mo(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!ge(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!ge(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Yn(this)}J($t,pt),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Tt(this.g)},$t.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=Zs(l),l=m);d.i.push(new ya(d.Ya++,l)),d.G==3&&Jn(d)},$t.prototype.N=function(){this.g.l=null,delete this.j,Tt(this.g),delete this.g,$t.aa.N.call(this)};function Oa(l){Wn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const m in d){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}J(Oa,Wn);function Ra(){Hi.call(this),this.status=1}J(Ra,Hi);function Yn(l){this.g=l}J(Yn,yo),Yn.prototype.ua=function(){mt(this.g,"a")},Yn.prototype.ta=function(l){mt(this.g,new Oa(l))},Yn.prototype.sa=function(l){mt(this.g,new Ra)},Yn.prototype.ra=function(){mt(this.g,"b")},hs.prototype.createWebChannel=hs.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,Pm=function(){return new hs},Rm=function(){return fi()},Om=Gn,rh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ji.NO_ERROR=0,Ji.TIMEOUT=8,Ji.HTTP_ERROR=6,Rl=Ji,da.COMPLETE="complete",Am=da,Gi.EventType=vn,vn.OPEN="a",vn.CLOSE="b",vn.ERROR="c",vn.MESSAGE="d",pt.prototype.listen=pt.prototype.K,qo=Gi,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,Lm=Ye}).apply(typeof Tl<"u"?Tl:typeof self<"u"?self:typeof window<"u"?window:{});const Mp="@firebase/firestore";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Ws="10.14.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ui=new km("@firebase/firestore");function Vo(){return Ui.logLevel}function le(i,...e){if(Ui.logLevel<=Pe.DEBUG){const n=e.map(_h);Ui.debug(`Firestore (${Ws}): ${i}`,...n)}}function xr(i,...e){if(Ui.logLevel<=Pe.ERROR){const n=e.map(_h);Ui.error(`Firestore (${Ws}): ${i}`,...n)}}function zs(i,...e){if(Ui.logLevel<=Pe.WARN){const n=e.map(_h);Ui.warn(`Firestore (${Ws}): ${i}`,...n)}}function _h(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(i)}catch{return i}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function we(i="Unexpected state"){const e=`FIRESTORE (${Ws}) INTERNAL ASSERTION FAILED: `+i;throw xr(e),new Error(e)}function Ve(i,e){i||we()}function Se(i,e){return i}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Ks{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Er{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mm{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class B0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class U0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class j0{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ve(this.o===void 0);let s=this.i;const a=v=>this.i!==s?(s=this.i,n(v)):Promise.resolve();let c=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Er,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=c;e.enqueueRetryable(async()=>{await v.promise,await a(this.currentUser)})},g=v=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Er)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ve(typeof s.accessToken=="string"),new Mm(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string"),new Ut(e)}}class V0{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class q0{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new V0(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K0{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ve(this.o===void 0);const s=c=>{c.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.R;return this.R=c.token,le("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ve(typeof n.token=="string"),this.R=n.token,new $0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function W0(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=W0(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<n&&(s+=e.charAt(a[c]%e.length))}return s}}function ze(i,e){return i<e?-1:i>e?1:0}function Bs(i,e,n){return i.length===e.length&&i.every((s,a)=>n(s,e[a]))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ce(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new wt(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _e{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _e(e)}static min(){return new _e(new wt(0,0))}static max(){return new _e(new wt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zo{constructor(e,n,s){n===void 0?n=0:n>e.length&&we(),s===void 0?s=e.length-n:s>e.length-n&&we(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Zo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zo?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const c=e.get(a),f=n.get(a);if(c<f)return-1;if(c>f)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class et extends Zo{construct(e,n,s){return new et(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new et(n)}static emptyPath(){return new et([])}}const G0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Zo{construct(e,n,s){return new At(e,n,s)}static isValidIdentifier(e){return G0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new At(["__name__"])}static fromServerFormat(e){const n=[];let s="",a=0;const c=()=>{if(s.length===0)throw new ce(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;a<e.length;){const g=e[a];if(g==="\\"){if(a+1===e.length)throw new ce(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[a+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new ce(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=v,a+=2}else g==="`"?(f=!f,a++):g!=="."||f?(s+=g,a++):(c(),a++)}if(c(),f)throw new ce(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class me{constructor(e){this.path=e}static fromPath(e){return new me(et.fromString(e))}static fromName(e){return new me(et.fromString(e).popFirst(5))}static empty(){return new me(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new et(e.slice()))}}function H0(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=_e.fromTimestamp(s===1e9?new wt(n+1,0):new wt(n,s));return new si(a,me.empty(),e)}function Q0(i){return new si(i.readTime,i.key,-1)}class si{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new si(_e.min(),me.empty(),-1)}static max(){return new si(_e.max(),me.empty(),-1)}}function X0(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(i.documentKey,e.documentKey),n!==0?n:ze(i.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const J0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function sa(i){if(i.code!==K.FAILED_PRECONDITION||i.message!==J0)throw i;le("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,s)=>{n(e)})}static reject(e){return new G((n,s)=>{s(e)})}static waitFor(e){return new G((n,s)=>{let a=0,c=0,f=!1;e.forEach(g=>{++a,g.next(()=>{++c,f&&c===a&&n()},v=>s(v))}),f=!0,c===a&&n()})}static or(e){let n=G.resolve(!1);for(const s of e)n=n.next(a=>a?G.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,c)=>{s.push(n.call(this,a,c))}),this.waitFor(s)}static mapArray(e,n){return new G((s,a)=>{const c=e.length,f=new Array(c);let g=0;for(let v=0;v<c;v++){const w=v;n(e[w]).next(k=>{f[w]=k,++g,g===c&&s(f)},k=>a(k))}})}static doWhile(e,n){return new G((s,a)=>{const c=()=>{e()===!0?n().next(()=>{c()},a):s()};c()})}}function Z0(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function oa(i){return i.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Sh.oe=-1;function Yl(i){return i==null}function Vl(i){return i===0&&1/i==-1/0}function eb(i){return typeof i=="number"&&Number.isInteger(i)&&!Vl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Fp(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function qi(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function zm(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rt{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nl(this.root,e,this.comparator,!0)}}class Nl{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,n,s,a,c){this.key=e,this.value=n,this.color=s??Lt.RED,this.left=a??Lt.EMPTY,this.right=c??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,c){return new Lt(e??this.key,n??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,s),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Lt.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(i,e,n,s,a){return this}insert(i,e,n){return new Lt(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ot{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zp(this.data.getIterator())}getIteratorFrom(e){return new zp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ot(this.comparator);return n.data=e,n}}class zp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new mn([])}unionWith(e){let n=new Ot(At.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bs(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Bm("Invalid base64 string: "+a):a}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const tb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(i){if(Ve(!!i),typeof i=="string"){let e=0;const n=tb.exec(i);if(Ve(!!n),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ut(i.seconds),nanos:ut(i.nanos)}}function ut(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ji(i){return typeof i=="string"?Rt.fromBase64String(i):Rt.fromUint8Array(i)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Eh(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function kh(i){const e=i.mapValue.fields.__previous_value__;return Eh(e)?kh(e):e}function ea(i){const e=oi(i.mapValue.fields.__local_write_time__.timestampValue);return new wt(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nb{constructor(e,n,s,a,c,f,g,v,w){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=w}}class ta{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ta("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ta&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Dl={mapValue:{}};function Vi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Eh(i)?4:ib(i)?9007199254740991:rb(i)?10:11:we()}function or(i,e){if(i===e)return!0;const n=Vi(i);if(n!==Vi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ea(i).isEqual(ea(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=oi(s.timestampValue),f=oi(a.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(s,a){return ji(s.bytesValue).isEqual(ji(a.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,a){return ut(s.geoPointValue.latitude)===ut(a.geoPointValue.latitude)&&ut(s.geoPointValue.longitude)===ut(a.geoPointValue.longitude)}(i,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return ut(s.integerValue)===ut(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=ut(s.doubleValue),f=ut(a.doubleValue);return c===f?Vl(c)===Vl(f):isNaN(c)&&isNaN(f)}return!1}(i,e);case 9:return Bs(i.arrayValue.values||[],e.arrayValue.values||[],or);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},f=a.mapValue.fields||{};if(Fp(c)!==Fp(f))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(f[g]===void 0||!or(c[g],f[g])))return!1;return!0}(i,e);default:return we()}}function na(i,e){return(i.values||[]).find(n=>or(n,e))!==void 0}function Us(i,e){if(i===e)return 0;const n=Vi(i),s=Vi(e);if(n!==s)return ze(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(i.booleanValue,e.booleanValue);case 2:return function(a,c){const f=ut(a.integerValue||a.doubleValue),g=ut(c.integerValue||c.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1}(i,e);case 3:return Bp(i.timestampValue,e.timestampValue);case 4:return Bp(ea(i),ea(e));case 5:return ze(i.stringValue,e.stringValue);case 6:return function(a,c){const f=ji(a),g=ji(c);return f.compareTo(g)}(i.bytesValue,e.bytesValue);case 7:return function(a,c){const f=a.split("/"),g=c.split("/");for(let v=0;v<f.length&&v<g.length;v++){const w=ze(f[v],g[v]);if(w!==0)return w}return ze(f.length,g.length)}(i.referenceValue,e.referenceValue);case 8:return function(a,c){const f=ze(ut(a.latitude),ut(c.latitude));return f!==0?f:ze(ut(a.longitude),ut(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return Up(i.arrayValue,e.arrayValue);case 10:return function(a,c){var f,g,v,w;const k=a.fields||{},R=c.fields||{},z=(f=k.value)===null||f===void 0?void 0:f.arrayValue,q=(g=R.value)===null||g===void 0?void 0:g.arrayValue,J=ze(((v=z==null?void 0:z.values)===null||v===void 0?void 0:v.length)||0,((w=q==null?void 0:q.values)===null||w===void 0?void 0:w.length)||0);return J!==0?J:Up(z,q)}(i.mapValue,e.mapValue);case 11:return function(a,c){if(a===Dl.mapValue&&c===Dl.mapValue)return 0;if(a===Dl.mapValue)return 1;if(c===Dl.mapValue)return-1;const f=a.fields||{},g=Object.keys(f),v=c.fields||{},w=Object.keys(v);g.sort(),w.sort();for(let k=0;k<g.length&&k<w.length;++k){const R=ze(g[k],w[k]);if(R!==0)return R;const z=Us(f[g[k]],v[w[k]]);if(z!==0)return z}return ze(g.length,w.length)}(i.mapValue,e.mapValue);default:throw we()}}function Bp(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ze(i,e);const n=oi(i),s=oi(e),a=ze(n.seconds,s.seconds);return a!==0?a:ze(n.nanos,s.nanos)}function Up(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const c=Us(n[a],s[a]);if(c)return c}return ze(n.length,s.length)}function js(i){return ih(i)}function ih(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(e){const n=oi(e);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(e){return ji(e).toBase64()}(i.bytesValue):"referenceValue"in i?function(e){return me.fromName(e).toString()}(i.referenceValue):"geoPointValue"in i?function(e){return`geo(${e.latitude},${e.longitude})`}(i.geoPointValue):"arrayValue"in i?function(e){let n="[",s=!0;for(const a of e.values||[])s?s=!1:n+=",",n+=ih(a);return n+"]"}(i.arrayValue):"mapValue"in i?function(e){const n=Object.keys(e.fields||{}).sort();let s="{",a=!0;for(const c of n)a?a=!1:s+=",",s+=`${c}:${ih(e.fields[c])}`;return s+"}"}(i.mapValue):we()}function sh(i){return!!i&&"integerValue"in i}function xh(i){return!!i&&"arrayValue"in i}function jp(i){return!!i&&"nullValue"in i}function Vp(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Pl(i){return!!i&&"mapValue"in i}function rb(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Go(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return qi(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Go(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Go(i.arrayValue.values[n]);return e}return Object.assign({},i)}function ib(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Pl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Go(n)}setAll(e){let n=At.emptyPath(),s={},a=[];e.forEach((f,g)=>{if(!n.isImmediateParentOf(g)){const v=this.getFieldsMap(n);this.applyChanges(v,s,a),s={},a=[],n=g.popLast()}f?s[g.lastSegment()]=Go(f):a.push(g.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,a)}delete(e){const n=this.field(e.popLast());Pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return or(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Pl(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){qi(n,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new nn(Go(this.value))}}function Um(i){const e=[];return qi(i.fields,(n,s)=>{const a=new At([n]);if(Pl(s)){const c=Um(s.mapValue).fields;if(c.length===0)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)}),new mn(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jt{constructor(e,n,s,a,c,f,g){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=g}static newInvalidDocument(e){return new jt(e,0,_e.min(),_e.min(),_e.min(),nn.empty(),0)}static newFoundDocument(e,n,s,a){return new jt(e,1,n,_e.min(),s,a,0)}static newNoDocument(e,n){return new jt(e,2,n,_e.min(),_e.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,_e.min(),_e.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ql{constructor(e,n){this.position=e,this.inclusive=n}}function qp(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],f=i.position[a];if(c.field.isKeyField()?s=me.comparator(me.fromName(f.referenceValue),n.key):s=Us(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function $p(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!or(i.position[n],e.position[n]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $l{constructor(e,n="asc"){this.field=e,this.dir=n}}function sb(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jm{}class bt extends jm{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new ab(e,n,s):n==="array-contains"?new cb(e,s):n==="in"?new hb(e,s):n==="not-in"?new fb(e,s):n==="array-contains-any"?new db(e,s):new bt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new lb(e,s):new ub(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Us(n,this.value)):n!==null&&Vi(this.value)===Vi(n)&&this.matchesComparison(Us(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ar extends jm{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ar(e,n)}matches(e){return Vm(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Vm(i){return i.op==="and"}function qm(i){return ob(i)&&Vm(i)}function ob(i){for(const e of i.filters)if(e instanceof ar)return!1;return!0}function oh(i){if(i instanceof bt)return i.field.canonicalString()+i.op.toString()+js(i.value);if(qm(i))return i.filters.map(e=>oh(e)).join(",");{const e=i.filters.map(n=>oh(n)).join(",");return`${i.op}(${e})`}}function $m(i,e){return i instanceof bt?function(n,s){return s instanceof bt&&n.op===s.op&&n.field.isEqual(s.field)&&or(n.value,s.value)}(i,e):i instanceof ar?function(n,s){return s instanceof ar&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((a,c,f)=>a&&$m(c,s.filters[f]),!0):!1}(i,e):void we()}function Km(i){return i instanceof bt?function(e){return`${e.field.canonicalString()} ${e.op} ${js(e.value)}`}(i):i instanceof ar?function(e){return e.op.toString()+" {"+e.getFilters().map(Km).join(" ,")+"}"}(i):"Filter"}class ab extends bt{constructor(e,n,s){super(e,n,s),this.key=me.fromName(s.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class lb extends bt{constructor(e,n){super(e,"in",n),this.keys=Wm("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ub extends bt{constructor(e,n){super(e,"not-in",n),this.keys=Wm("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Wm(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>me.fromName(s.referenceValue))}class cb extends bt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xh(n)&&na(n.arrayValue,this.value)}}class hb extends bt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&na(this.value.arrayValue,n)}}class fb extends bt{constructor(e,n){super(e,"not-in",n)}matches(e){if(na(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!na(this.value.arrayValue,n)}}class db extends bt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>na(this.value.arrayValue,s))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pb{constructor(e,n=null,s=[],a=[],c=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=g,this.ue=null}}function Kp(i,e=null,n=[],s=[],a=null,c=null,f=null){return new pb(i,e,n,s,a,c,f)}function Ch(i){const e=Se(i);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>oh(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(a){return a.field.canonicalString()+a.dir}(s)).join(","),Yl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>js(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>js(s)).join(",")),e.ue=n}return e.ue}function Ih(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!sb(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!$m(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!$p(i.startAt,e.startAt)&&$p(i.endAt,e.endAt)}function ah(i){return me.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zl{constructor(e,n=null,s=[],a=[],c=null,f="F",g=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=g,this.endAt=v,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function mb(i,e,n,s,a,c,f,g){return new Zl(i,e,n,s,a,c,f,g)}function eu(i){return new Zl(i)}function Wp(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function gb(i){return i.collectionGroup!==null}function Ho(i){const e=Se(i);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Ot(At.comparator);return a.filters.forEach(f=>{f.getFlattenedFilters().forEach(g=>{g.isInequality()&&(c=c.add(g.field))})}),c})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new $l(a,s))}),n.has(At.keyField().canonicalString())||e.ce.push(new $l(At.keyField(),s))}return e.ce}function rr(i){const e=Se(i);return e.le||(e.le=yb(e,Ho(i))),e.le}function yb(i,e){if(i.limitType==="F")return Kp(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new $l(a.field,c)});const n=i.endAt?new ql(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new ql(i.startAt.position,i.startAt.inclusive):null;return Kp(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function lh(i,e,n){return new Zl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function tu(i,e){return Ih(rr(i),rr(e))&&i.limitType===e.limitType}function Gm(i){return`${Ch(rr(i))}|lt:${i.limitType}`}function Os(i){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(s=>Km(s)).join(", ")}]`),Yl(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>js(s)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>js(s)).join(",")),`Target(${n})`}(rr(i))}; limitType=${i.limitType})`}function nu(i,e){return e.isFoundDocument()&&function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):me.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(i,e)&&function(n,s){for(const a of Ho(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(i,e)&&function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0}(i,e)&&function(n,s){return!(n.startAt&&!function(a,c,f){const g=qp(a,c,f);return a.inclusive?g<=0:g<0}(n.startAt,Ho(n),s)||n.endAt&&!function(a,c,f){const g=qp(a,c,f);return a.inclusive?g>=0:g>0}(n.endAt,Ho(n),s))}(i,e)}function vb(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Hm(i){return(e,n)=>{let s=!1;for(const a of Ho(i)){const c=bb(a,e,n);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function bb(i,e,n){const s=i.field.isKeyField()?me.comparator(e.key,n.key):function(a,c,f){const g=c.data.field(a),v=f.data.field(a);return g!==null&&v!==null?Us(g,v):we()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return we()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){qi(this.inner,(n,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return zm(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wb=new rt(me.comparator);function Cr(){return wb}const Qm=new rt(me.comparator);function $o(...i){let e=Qm;for(const n of i)e=e.insert(n.key,n);return e}function Xm(i){let e=Qm;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function zi(){return Qo()}function Jm(){return Qo()}function Qo(){return new Gs(i=>i.toString(),(i,e)=>i.isEqual(e))}const _b=new rt(me.comparator),Sb=new Ot(me.comparator);function Ne(...i){let e=Sb;for(const n of i)e=e.add(n);return e}const Eb=new Ot(ze);function kb(){return Eb}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Th(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vl(e)?"-0":e}}function Ym(i){return{integerValue:""+i}}function xb(i,e){return eb(e)?Ym(e):Th(i,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ru{constructor(){this._=void 0}}function Cb(i,e,n){return i instanceof Kl?function(s,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Eh(a)&&(a=kh(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(n,e):i instanceof ra?eg(i,e):i instanceof ia?tg(i,e):function(s,a){const c=Zm(s,a),f=Gp(c)+Gp(s.Pe);return sh(c)&&sh(s.Pe)?Ym(f):Th(s.serializer,f)}(i,e)}function Ib(i,e,n){return i instanceof ra?eg(i,e):i instanceof ia?tg(i,e):n}function Zm(i,e){return i instanceof Wl?function(n){return sh(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class Kl extends ru{}class ra extends ru{constructor(e){super(),this.elements=e}}function eg(i,e){const n=ng(e);for(const s of i.elements)n.some(a=>or(a,s))||n.push(s);return{arrayValue:{values:n}}}class ia extends ru{constructor(e){super(),this.elements=e}}function tg(i,e){let n=ng(e);for(const s of i.elements)n=n.filter(a=>!or(a,s));return{arrayValue:{values:n}}}class Wl extends ru{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Gp(i){return ut(i.integerValue||i.doubleValue)}function ng(i){return xh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function Tb(i,e){return i.field.isEqual(e.field)&&function(n,s){return n instanceof ra&&s instanceof ra||n instanceof ia&&s instanceof ia?Bs(n.elements,s.elements,or):n instanceof Wl&&s instanceof Wl?or(n.Pe,s.Pe):n instanceof Kl&&s instanceof Kl}(i.transform,e.transform)}class Nb{constructor(e,n){this.version=e,this.transformResults=n}}class rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ml(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class iu{}function rg(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new su(i.key,rn.none()):new aa(i.key,i.data,rn.none());{const n=i.data,s=nn.empty();let a=new Ot(At.comparator);for(let c of e.fields)if(!a.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),a=a.add(c)}return new li(i.key,s,new mn(a.toArray()),rn.none())}}function Db(i,e,n){i instanceof aa?function(s,a,c){const f=s.value.clone(),g=Qp(s.fieldTransforms,a,c.transformResults);f.setAll(g),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(i,e,n):i instanceof li?function(s,a,c){if(!Ml(s.precondition,a))return void a.convertToUnknownDocument(c.version);const f=Qp(s.fieldTransforms,a,c.transformResults),g=a.data;g.setAll(ig(s)),g.setAll(f),a.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(i,e,n):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function Xo(i,e,n,s){return i instanceof aa?function(a,c,f,g){if(!Ml(a.precondition,c))return f;const v=a.value.clone(),w=Xp(a.fieldTransforms,g,c);return v.setAll(w),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),null}(i,e,n,s):i instanceof li?function(a,c,f,g){if(!Ml(a.precondition,c))return f;const v=Xp(a.fieldTransforms,g,c),w=c.data;return w.setAll(ig(a)),w.setAll(v),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(k=>k.field))}(i,e,n,s):function(a,c,f){return Ml(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f}(i,e,n)}function Lb(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=Zm(s.transform,a||null);c!=null&&(n===null&&(n=nn.empty()),n.set(s.field,c))}return n||null}function Hp(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Bs(n,s,(a,c)=>Tb(a,c))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class aa extends iu{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class li extends iu{constructor(e,n,s,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ig(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function Qp(i,e,n){const s=new Map;Ve(i.length===n.length);for(let a=0;a<n.length;a++){const c=i[a],f=c.transform,g=e.data.field(c.field);s.set(c.field,Ib(f,g,n[a]))}return s}function Xp(i,e,n){const s=new Map;for(const a of i){const c=a.transform,f=n.data.field(a.field);s.set(a.field,Cb(c,f,e))}return s}class su extends iu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ab extends iu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ob{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&Db(c,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Xo(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Xo(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Jm();return this.mutations.forEach(a=>{const c=e.get(a.key),f=c.overlayedDocument;let g=this.applyToLocalView(f,c.mutatedFields);g=n.has(a.key)?null:g;const v=rg(f,g);v!==null&&s.set(a.key,v),f.isValidDocument()||f.convertToNoDocument(_e.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ne())}isEqual(e){return this.batchId===e.batchId&&Bs(this.mutations,e.mutations,(n,s)=>Hp(n,s))&&Bs(this.baseMutations,e.baseMutations,(n,s)=>Hp(n,s))}}class Nh{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Ve(e.mutations.length===s.length);let a=function(){return _b}();const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new Nh(e,n,s,a)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ht,Ae;function Mb(i){switch(i){default:return we();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function sg(i){if(i===void 0)return xr("GRPC error has no .code"),K.UNKNOWN;switch(i){case ht.OK:return K.OK;case ht.CANCELLED:return K.CANCELLED;case ht.UNKNOWN:return K.UNKNOWN;case ht.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ht.INTERNAL:return K.INTERNAL;case ht.UNAVAILABLE:return K.UNAVAILABLE;case ht.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ht.NOT_FOUND:return K.NOT_FOUND;case ht.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ht.ABORTED:return K.ABORTED;case ht.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ht.DATA_LOSS:return K.DATA_LOSS;default:return we()}}(Ae=ht||(ht={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Fb(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zb=new Bi([4294967295,4294967295],0);function Jp(i){const e=Fb().encode(i),n=new Dm;return n.update(e),new Uint8Array(n.digest())}function Yp(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Bi([n,s],0),new Bi([a,c],0)]}class Dh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ko(`Invalid padding: ${n}`);if(s<0)throw new Ko(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ko(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Ko(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Bi.fromNumber(this.Ie)}Ee(e,n,s){let a=e.add(n.multiply(Bi.fromNumber(s)));return a.compare(zb)===1&&(a=new Bi([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Jp(e),[s,a]=Yp(n);for(let c=0;c<this.hashCount;c++){const f=this.Ee(s,a,c);if(!this.de(f))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Dh(c,a,n);return s.forEach(g=>f.insert(g)),f}insert(e){if(this.Ie===0)return;const n=Jp(e),[s,a]=Yp(n);for(let c=0;c<this.hashCount;c++){const f=this.Ee(s,a,c);this.Ae(f)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Ko extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ou{constructor(e,n,s,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,la.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ou(_e.min(),a,new rt(ze),Cr(),Ne())}}class la{constructor(e,n,s,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new la(s,n,Ne(),Ne(),Ne())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fl{constructor(e,n,s,a){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=a}}class og{constructor(e,n){this.targetId=e,this.me=n}}class ag{constructor(e,n,s=Rt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class Zp{constructor(){this.fe=0,this.ge=tm(),this.pe=Rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ne(),n=Ne(),s=Ne();return this.ge.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:we()}}),new la(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=tm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Bb{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cr(),this.qe=em(),this.Qe=new rt(ze)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const s=this.Ge(n);switch(e.state){case 0:this.ze(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),s.De(e.resumeToken));break;default:we()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((s,a)=>{this.ze(a)&&n(a)})}He(e){const n=e.targetId,s=e.me.count,a=this.Je(n);if(a){const c=a.target;if(ah(c))if(s===0){const f=new me(c.path);this.Ue(n,f,jt.newNoDocument(f,_e.min()))}else Ve(s===1);else{const f=this.Ye(n);if(f!==s){const g=this.Ze(e),v=g?this.Xe(g,e,f):1;if(v!==0){this.je(n);const w=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,w)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=n;let f,g;try{f=ji(s).toUint8Array()}catch(v){if(v instanceof Bm)return zs("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{g=new Dh(f,a,c)}catch(v){return zs(v instanceof Ko?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return g.Ie===0?null:g}Xe(e,n,s){return n.me.count===s-this.nt(e,n.targetId)?0:2}nt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let a=0;return s.forEach(c=>{const f=this.Le.tt(),g=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.Ue(n,c,null),a++)}),a}rt(e){const n=new Map;this.Be.forEach((c,f)=>{const g=this.Je(f);if(g){if(c.current&&ah(g.target)){const v=new me(g.target.path);this.ke.get(v)!==null||this.it(f,v)||this.Ue(f,v,jt.newNoDocument(v,e))}c.be&&(n.set(f,c.ve()),c.Ce())}});let s=Ne();this.qe.forEach((c,f)=>{let g=!0;f.forEachWhile(v=>{const w=this.Je(v);return!w||w.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(c))}),this.ke.forEach((c,f)=>f.setReadTime(e));const a=new ou(e,n,this.Qe,this.ke,s);return this.ke=Cr(),this.qe=em(),this.Qe=new rt(ze),a}$e(e,n){if(!this.ze(e))return;const s=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,s){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,n)?a.Fe(n,1):a.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Zp,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ot(ze),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Zp),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function em(){return new rt(me.comparator)}function tm(){return new rt(me.comparator)}const Ub={asc:"ASCENDING",desc:"DESCENDING"},jb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vb={and:"AND",or:"OR"};class qb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function uh(i,e){return i.useProto3Json||Yl(e)?e:{value:e}}function Gl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lg(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function $b(i,e){return Gl(i,e.toTimestamp())}function ir(i){return Ve(!!i),_e.fromTimestamp(function(e){const n=oi(e);return new wt(n.seconds,n.nanos)}(i))}function Lh(i,e){return ch(i,e).canonicalString()}function ch(i,e){const n=function(s){return new et(["projects",s.projectId,"databases",s.database])}(i).child("documents");return e===void 0?n:n.child(e)}function ug(i){const e=et.fromString(i);return Ve(pg(e)),e}function hh(i,e){return Lh(i.databaseId,e.path)}function Kc(i,e){const n=ug(e);if(n.get(1)!==i.databaseId.projectId)throw new ce(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ce(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new me(hg(n))}function cg(i,e){return Lh(i.databaseId,e)}function Kb(i){const e=ug(i);return e.length===4?et.emptyPath():hg(e)}function fh(i){return new et(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function hg(i){return Ve(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function nm(i,e,n){return{name:hh(i,e),fields:n.value.mapValue.fields}}function Wb(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(v,w){return v.useProto3Json?(Ve(w===void 0||typeof w=="string"),Rt.fromBase64String(w||"")):(Ve(w===void 0||w instanceof Buffer||w instanceof Uint8Array),Rt.fromUint8Array(w||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&function(v){const w=v.code===void 0?K.UNKNOWN:sg(v.code);return new ce(w,v.message||"")}(f);n=new ag(s,a,c,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Kc(i,s.document.name),c=ir(s.document.updateTime),f=s.document.createTime?ir(s.document.createTime):_e.min(),g=new nn({mapValue:{fields:s.document.fields}}),v=jt.newFoundDocument(a,c,f,g),w=s.targetIds||[],k=s.removedTargetIds||[];n=new Fl(w,k,v.key,v)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Kc(i,s.document),c=s.readTime?ir(s.readTime):_e.min(),f=jt.newNoDocument(a,c),g=s.removedTargetIds||[];n=new Fl([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Kc(i,s.document),c=s.removedTargetIds||[];n=new Fl([],c,a,null)}else{if(!("filter"in e))return we();{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,f=new Pb(a,c),g=s.targetId;n=new og(g,f)}}return n}function Gb(i,e){let n;if(e instanceof aa)n={update:nm(i,e.key,e.value)};else if(e instanceof su)n={delete:hh(i,e.key)};else if(e instanceof li)n={update:nm(i,e.key,e.data),updateMask:nw(e.fieldMask)};else{if(!(e instanceof Ab))return we();n={verify:hh(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(a,c){const f=c.transform;if(f instanceof Kl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ra)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ia)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Wl)return{fieldPath:c.field.canonicalString(),increment:f.Pe};throw we()}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:$b(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:we()}(i,e.precondition)),n}function Hb(i,e){return i&&i.length>0?(Ve(e!==void 0),i.map(n=>function(s,a){let c=s.updateTime?ir(s.updateTime):ir(a);return c.isEqual(_e.min())&&(c=ir(a)),new Nb(c,s.transformResults||[])}(n,e))):[]}function Qb(i,e){return{documents:[cg(i,e.path)]}}function Xb(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=cg(i,a);const c=function(v){if(v.length!==0)return dg(ar.create(v,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const f=function(v){if(v.length!==0)return v.map(w=>function(k){return{field:Rs(k.field),direction:Zb(k.dir)}}(w))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=uh(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{_t:n,parent:a}}function Jb(i){let e=Kb(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Ve(s===1);const k=n.from[0];k.allDescendants?a=k.collectionId:e=e.child(k.collectionId)}let c=[];n.where&&(c=function(k){const R=fg(k);return R instanceof ar&&qm(R)?R.getFilters():[R]}(n.where));let f=[];n.orderBy&&(f=function(k){return k.map(R=>function(z){return new $l(Ps(z.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(z.direction))}(R))}(n.orderBy));let g=null;n.limit&&(g=function(k){let R;return R=typeof k=="object"?k.value:k,Yl(R)?null:R}(n.limit));let v=null;n.startAt&&(v=function(k){const R=!!k.before,z=k.values||[];return new ql(z,R)}(n.startAt));let w=null;return n.endAt&&(w=function(k){const R=!k.before,z=k.values||[];return new ql(z,R)}(n.endAt)),mb(e,a,f,c,g,"F",v,w)}function Yb(i,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fg(i){return i.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ps(e.unaryFilter.field);return bt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Ps(e.unaryFilter.field);return bt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ps(e.unaryFilter.field);return bt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ps(e.unaryFilter.field);return bt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(i):i.fieldFilter!==void 0?function(e){return bt.create(Ps(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(e.fieldFilter.op),e.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(e){return ar.create(e.compositeFilter.filters.map(n=>fg(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return we()}}(e.compositeFilter.op))}(i):we()}function Zb(i){return Ub[i]}function ew(i){return jb[i]}function tw(i){return Vb[i]}function Rs(i){return{fieldPath:i.canonicalString()}}function Ps(i){return At.fromServerFormat(i.fieldPath)}function dg(i){return i instanceof bt?function(e){if(e.op==="=="){if(Vp(e.value))return{unaryFilter:{field:Rs(e.field),op:"IS_NAN"}};if(jp(e.value))return{unaryFilter:{field:Rs(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Vp(e.value))return{unaryFilter:{field:Rs(e.field),op:"IS_NOT_NAN"}};if(jp(e.value))return{unaryFilter:{field:Rs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rs(e.field),op:ew(e.op),value:e.value}}}(i):i instanceof ar?function(e){const n=e.getFilters().map(s=>dg(s));return n.length===1?n[0]:{compositeFilter:{op:tw(e.op),filters:n}}}(i):we()}function nw(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pg(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ei{constructor(e,n,s,a,c=_e.min(),f=_e.min(),g=Rt.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rw{constructor(e){this.ct=e}}function iw(i){const e=Jb({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?lh(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sw{constructor(){this.un=new ow}addToCollectionParentIndex(e,n){return this.un.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(si.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(si.min())}updateCollectionGroup(e,n,s){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class ow{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new Ot(et.comparator),c=!a.has(s);return this.index[n]=a.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Ot(et.comparator)).toArray()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Vs(0)}static kn(){return new Vs(-1)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class aw{constructor(){this.changes=new Gs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?G.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lw{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uw{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&Xo(s.mutation,a,mn.empty(),wt.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ne()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ne()){const a=zi();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(c=>{let f=$o();return c.forEach((g,v)=>{f=f.insert(g,v.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=zi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ne()))}populateOverlays(e,n,s){const a=[];return s.forEach(c=>{n.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((f,g)=>{n.set(f,g)})})}computeViews(e,n,s,a){let c=Cr();const f=Qo(),g=function(){return Qo()}();return n.forEach((v,w)=>{const k=s.get(w.key);a.has(w.key)&&(k===void 0||k.mutation instanceof li)?c=c.insert(w.key,w):k!==void 0?(f.set(w.key,k.mutation.getFieldMask()),Xo(k.mutation,w,k.mutation.getFieldMask(),wt.now())):f.set(w.key,mn.empty())}),this.recalculateAndSaveOverlays(e,c).next(v=>(v.forEach((w,k)=>f.set(w,k)),n.forEach((w,k)=>{var R;return g.set(w,new lw(k,(R=f.get(w))!==null&&R!==void 0?R:null))}),g))}recalculateAndSaveOverlays(e,n){const s=Qo();let a=new rt((f,g)=>f-g),c=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const g of f)g.keys().forEach(v=>{const w=n.get(v);if(w===null)return;let k=s.get(v)||mn.empty();k=g.applyToLocalView(w,k),s.set(v,k);const R=(a.get(g.batchId)||Ne()).add(v);a=a.insert(g.batchId,R)})}).next(()=>{const f=[],g=a.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),w=v.key,k=v.value,R=Jm();k.forEach(z=>{if(!c.has(z)){const q=rg(n.get(z),s.get(z));q!==null&&R.set(z,q),c=c.add(z)}}),f.push(this.documentOverlayCache.saveOverlays(e,w,R))}return G.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(c){return me.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-c.size):G.resolve(zi());let g=-1,v=c;return f.next(w=>G.forEach(w,(k,R)=>(g<R.largestBatchId&&(g=R.largestBatchId),c.get(k)?G.resolve():this.remoteDocumentCache.getEntry(e,k).next(z=>{v=v.insert(k,z)}))).next(()=>this.populateOverlays(e,w,c)).next(()=>this.computeViews(e,v,w,Ne())).next(k=>({batchId:g,changes:Xm(k)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next(s=>{let a=$o();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const c=n.collectionGroup;let f=$o();return this.indexManager.getCollectionParents(e,c).next(g=>G.forEach(g,v=>{const w=function(k,R){return new Zl(R,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)}(n,v.child(c));return this.getDocumentsMatchingCollectionQuery(e,w,s,a).next(k=>{k.forEach((R,z)=>{f=f.insert(R,z)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,a))).next(f=>{c.forEach((v,w)=>{const k=w.getKey();f.get(k)===null&&(f=f.insert(k,jt.newInvalidDocument(k)))});let g=$o();return f.forEach((v,w)=>{const k=c.get(v);k!==void 0&&Xo(k.mutation,w,mn.empty(),wt.now()),nu(n,w)&&(g=g.insert(v,w))}),g})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cw{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return G.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ir(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:iw(s.bundledQuery),readTime:ir(s.readTime)}}(n)),G.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hw{constructor(){this.overlays=new rt(me.comparator),this.Ir=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const s=zi();return G.forEach(n,a=>this.getOverlay(e,a).next(c=>{c!==null&&s.set(a,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,c)=>{this.ht(e,n,c)}),G.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.Ir.get(s);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.Ir.delete(s)),G.resolve()}getOverlaysForCollection(e,n,s){const a=zi(),c=n.length+1,f=new me(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const v=g.getNext().value,w=v.getKey();if(!n.isPrefixOf(w.path))break;w.path.length===c&&v.largestBatchId>s&&a.set(v.getKey(),v)}return G.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let c=new rt((w,k)=>w-k);const f=this.overlays.getIterator();for(;f.hasNext();){const w=f.getNext().value;if(w.getKey().getCollectionGroup()===n&&w.largestBatchId>s){let k=c.get(w.largestBatchId);k===null&&(k=zi(),c=c.insert(w.largestBatchId,k)),k.set(w.getKey(),w)}}const g=zi(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((w,k)=>g.set(w,k)),!(g.size()>=a)););return G.resolve(g)}ht(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const f=this.Ir.get(a.largestBatchId).delete(s.key);this.Ir.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new Rb(n,s));let c=this.Ir.get(n);c===void 0&&(c=Ne(),this.Ir.set(n,c)),this.Ir.set(n,c.add(s.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fw{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ah{constructor(){this.Tr=new Ot(Ct.Er),this.dr=new Ot(Ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const s=new Ct(e,n);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Vr(new Ct(e,n))}mr(e,n){e.forEach(s=>this.removeReference(s,n))}gr(e){const n=new me(new et([])),s=new Ct(n,e),a=new Ct(n,e+1),c=[];return this.dr.forEachInRange([s,a],f=>{this.Vr(f),c.push(f.key)}),c}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new me(new et([])),s=new Ct(n,e),a=new Ct(n,e+1);let c=Ne();return this.dr.forEachInRange([s,a],f=>{c=c.add(f.key)}),c}containsKey(e){const n=new Ct(e,0),s=this.Tr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ct{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return me.comparator(e.key,n.key)||ze(e.wr,n.wr)}static Ar(e,n){return ze(e.wr,n.wr)||me.comparator(e.key,n.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dw{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ot(Ct.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const c=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new Ob(c,n,s,a);this.mutationQueue.push(f);for(const g of a)this.br=this.br.add(new Ct(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return G.resolve(f)}lookupMutationBatch(e,n){return G.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.vr(s),c=a<0?0:a;return G.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ct(n,0),a=new Ct(n,Number.POSITIVE_INFINITY),c=[];return this.br.forEachInRange([s,a],f=>{const g=this.Dr(f.wr);c.push(g)}),G.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ot(ze);return n.forEach(a=>{const c=new Ct(a,0),f=new Ct(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([c,f],g=>{s=s.add(g.wr)})}),G.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let c=s;me.isDocumentKey(c)||(c=c.child(""));const f=new Ct(new me(c),0);let g=new Ot(ze);return this.br.forEachWhile(v=>{const w=v.key.path;return!!s.isPrefixOf(w)&&(w.length===a&&(g=g.add(v.wr)),!0)},f),G.resolve(this.Cr(g))}Cr(e){const n=[];return e.forEach(s=>{const a=this.Dr(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return G.forEach(n.mutations,a=>{const c=new Ct(a.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.br=s})}On(e){}containsKey(e,n){const s=new Ct(n,0),a=this.br.firstAfterOrEqual(s);return G.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pw{constructor(e){this.Mr=e,this.docs=function(){return new rt(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),c=a?a.size:0,f=this.Mr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return G.resolve(s?s.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let s=Cr();return n.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():jt.newInvalidDocument(a))}),G.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let c=Cr();const f=n.path,g=new me(f.child("")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:w,value:{document:k}}=v.getNext();if(!f.isPrefixOf(w.path))break;w.path.length>f.length+1||X0(Q0(k),s)<=0||(a.has(k.key)||nu(n,k))&&(c=c.insert(k.key,k.mutableCopy()))}return G.resolve(c)}getAllFromCollectionGroup(e,n,s,a){we()}Or(e,n){return G.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new mw(this)}getSize(e){return G.resolve(this.size)}}class mw extends aw{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.cr.addEntry(e,a)):this.cr.removeEntry(s)}),G.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gw{constructor(e){this.persistence=e,this.Nr=new Gs(n=>Ch(n),Ih),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ah,this.targetCount=0,this.kr=Vs.Bn()}forEachTarget(e,n){return this.Nr.forEach((s,a)=>n(a)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Lr&&(this.Lr=n),G.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Vs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Kn(n),G.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,s){let a=0;const c=[];return this.Nr.forEach((f,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.Nr.delete(f),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),a++)}),G.waitFor(c).next(()=>a)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const s=this.Nr.get(n)||null;return G.resolve(s)}addMatchingKeys(e,n,s){return this.Br.Rr(n,s),G.resolve()}removeMatchingKeys(e,n,s){this.Br.mr(n,s);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach(f=>{c.push(a.markPotentiallyOrphaned(e,f))}),G.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Br.yr(n);return G.resolve(s)}containsKey(e,n){return G.resolve(this.Br.containsKey(n))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yw{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Sh(0),this.Kr=!1,this.Kr=!0,this.$r=new fw,this.referenceDelegate=e(this),this.Ur=new gw(this),this.indexManager=new sw,this.remoteDocumentCache=function(s){return new pw(s)}(s=>this.referenceDelegate.Wr(s)),this.serializer=new rw(n),this.Gr=new cw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.qr[e.toKey()];return s||(s=new dw(n,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,s){le("MemoryPersistence","Starting transaction:",e);const a=new vw(this.Qr.next());return this.referenceDelegate.zr(),s(a).next(c=>this.referenceDelegate.jr(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Hr(e,n){return G.or(Object.values(this.qr).map(s=>()=>s.containsKey(e,n)))}}class vw extends Y0{constructor(e){super(),this.currentSequenceNumber=e}}class Oh{constructor(e){this.persistence=e,this.Jr=new Ah,this.Yr=null}static Zr(e){return new Oh(e)}get Xr(){if(this.Yr)return this.Yr;throw we()}addReference(e,n,s){return this.Jr.addReference(s,n),this.Xr.delete(s.toString()),G.resolve()}removeReference(e,n,s){return this.Jr.removeReference(s,n),this.Xr.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),G.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(a=>this.Xr.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(c=>this.Xr.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,s=>{const a=me.fromPath(s);return this.ei(e,a).next(c=>{c||n.removeEntry(a,_e.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(s=>{s?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return G.or([()=>G.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rh{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.$i=s,this.Ui=a}static Wi(e,n){let s=Ne(),a=Ne();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Rh(e,n.fromCache,s,a)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ww{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _v()?8:Z0(bv())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,s,a){const c={result:null};return this.Yi(e,n).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.Zi(e,n,a,s).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new bw;return this.Xi(e,n,f).next(g=>{if(c.result=g,this.zi)return this.es(e,n,f,g.size)})}).next(()=>c.result)}es(e,n,s,a){return s.documentReadCount<this.ji?(Vo()<=Pe.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Os(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(Vo()<=Pe.DEBUG&&le("QueryEngine","Query:",Os(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.Hi*a?(Vo()<=Pe.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Os(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rr(n))):G.resolve())}Yi(e,n){if(Wp(n))return G.resolve(null);let s=rr(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=lh(n,null,"F"),s=rr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const f=Ne(...c);return this.Ji.getDocuments(e,f).next(g=>this.indexManager.getMinOffset(e,s).next(v=>{const w=this.ts(n,g);return this.ns(n,w,f,v.readTime)?this.Yi(e,lh(n,null,"F")):this.rs(e,w,n,v)}))})))}Zi(e,n,s,a){return Wp(n)||a.isEqual(_e.min())?G.resolve(null):this.Ji.getDocuments(e,s).next(c=>{const f=this.ts(n,c);return this.ns(n,f,s,a)?G.resolve(null):(Vo()<=Pe.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Os(n)),this.rs(e,f,n,H0(a,-1)).next(g=>g))})}ts(e,n){let s=new Ot(Hm(e));return n.forEach((a,c)=>{nu(e,c)&&(s=s.add(c))}),s}ns(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Xi(e,n,s){return Vo()<=Pe.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Os(n)),this.Ji.getDocumentsMatchingQuery(e,n,si.min(),s)}rs(e,n,s,a){return this.Ji.getDocumentsMatchingQuery(e,s,a).next(c=>(n.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _w{constructor(e,n,s,a){this.persistence=e,this.ss=n,this.serializer=a,this.os=new rt(ze),this._s=new Gs(c=>Ch(c),Ih),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uw(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Sw(i,e,n,s){return new _w(i,e,n,s)}async function mg(i,e){const n=Se(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,n.ls(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const f=[],g=[];let v=Ne();for(const w of a){f.push(w.batchId);for(const k of w.mutations)v=v.add(k.key)}for(const w of c){g.push(w.batchId);for(const k of w.mutations)v=v.add(k.key)}return n.localDocuments.getDocuments(s,v).next(w=>({hs:w,removedBatchIds:f,addedBatchIds:g}))})})}function Ew(i,e){const n=Se(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=n.cs.newChangeBuffer({trackRemovals:!0});return function(f,g,v,w){const k=v.batch,R=k.keys();let z=G.resolve();return R.forEach(q=>{z=z.next(()=>w.getEntry(g,q)).next(J=>{const Z=v.docVersions.get(q);Ve(Z!==null),J.version.compareTo(Z)<0&&(k.applyToRemoteDocument(J,v),J.isValidDocument()&&(J.setReadTime(v.commitVersion),w.addEntry(J)))})}),z.next(()=>f.mutationQueue.removeMutationBatch(g,k))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let g=Ne();for(let v=0;v<f.mutationResults.length;++v)f.mutationResults[v].transformResults.length>0&&(g=g.add(f.batch.mutations[v].key));return g}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function gg(i){const e=Se(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function kw(i,e){const n=Se(i),s=e.snapshotVersion;let a=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=n.cs.newChangeBuffer({trackRemovals:!0});a=n.os;const g=[];e.targetChanges.forEach((k,R)=>{const z=a.get(R);if(!z)return;g.push(n.Ur.removeMatchingKeys(c,k.removedDocuments,R).next(()=>n.Ur.addMatchingKeys(c,k.addedDocuments,R)));let q=z.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(R)!==null?q=q.withResumeToken(Rt.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):k.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(k.resumeToken,s)),a=a.insert(R,q),function(J,Z,U){return J.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(z,q,k)&&g.push(n.Ur.updateTargetData(c,q))});let v=Cr(),w=Ne();if(e.documentUpdates.forEach(k=>{e.resolvedLimboDocuments.has(k)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,k))}),g.push(xw(c,f,e.documentUpdates).next(k=>{v=k.Ps,w=k.Is})),!s.isEqual(_e.min())){const k=n.Ur.getLastRemoteSnapshotVersion(c).next(R=>n.Ur.setTargetsMetadata(c,c.currentSequenceNumber,s));g.push(k)}return G.waitFor(g).next(()=>f.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,v,w)).next(()=>v)}).then(c=>(n.os=a,c))}function xw(i,e,n){let s=Ne(),a=Ne();return n.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let f=Cr();return n.forEach((g,v)=>{const w=c.get(g);v.isFoundDocument()!==w.isFoundDocument()&&(a=a.add(g)),v.isNoDocument()&&v.version.isEqual(_e.min())?(e.removeEntry(g,v.readTime),f=f.insert(g,v)):!w.isValidDocument()||v.version.compareTo(w.version)>0||v.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(v),f=f.insert(g,v)):le("LocalStore","Ignoring outdated watch update for ",g,". Current version:",w.version," Watch version:",v.version)}),{Ps:f,Is:a}})}function Cw(i,e){const n=Se(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Iw(i,e){const n=Se(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Ur.getTargetData(s,e).next(c=>c?(a=c,G.resolve(a)):n.Ur.allocateTargetId(s).next(f=>(a=new ei(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Ur.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.os.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.os=n.os.insert(s.targetId,s),n._s.set(e,s.targetId)),s})}async function dh(i,e,n){const s=Se(i),a=s.os.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,a))}catch(f){if(!oa(f))throw f;le("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}s.os=s.os.remove(e),s._s.delete(a.target)}function rm(i,e,n){const s=Se(i);let a=_e.min(),c=Ne();return s.persistence.runTransaction("Execute query","readwrite",f=>function(g,v,w){const k=Se(g),R=k._s.get(w);return R!==void 0?G.resolve(k.os.get(R)):k.Ur.getTargetData(v,w)}(s,f,rr(e)).next(g=>{if(g)return a=g.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(f,g.targetId).next(v=>{c=v})}).next(()=>s.ss.getDocumentsMatchingQuery(f,e,n?a:_e.min(),n?c:Ne())).next(g=>(Tw(s,vb(e),g),{documents:g,Ts:c})))}function Tw(i,e,n){let s=i.us.get(e)||_e.min();n.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.us.set(e,s)}class im{constructor(){this.activeTargetIds=kb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nw{constructor(){this.so=new im,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,s){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new im,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dw{_o(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Ll=null;function Wc(){return Ll===null?Ll=function(){return 268435456+Math.round(2147483648*Math.random())}():Ll++,"0x"+Ll.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Lw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Aw{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Bt="WebChannelConnection";class Ow extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+e.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(e,n,s,a,c){const f=Wc(),g=this.xo(e,n.toUriEncodedString());le("RestConnection",`Sending RPC '${e}' ${f}:`,g,s);const v={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(v,a,c),this.No(e,g,v,s).then(w=>(le("RestConnection",`Received RPC '${e}' ${f}: `,w),w),w=>{throw zs("RestConnection",`RPC '${e}' ${f} failed with error: `,w,"url: ",g,"request:",s),w})}Lo(e,n,s,a,c,f){return this.Mo(e,n,s,a,c)}Oo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ws}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,c)=>e[c]=a),s&&s.headers.forEach((a,c)=>e[c]=a)}xo(e,n){const s=Lw[e];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,s,a){const c=Wc();return new Promise((f,g)=>{const v=new Lm;v.setWithCredentials(!0),v.listenOnce(Am.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Rl.NO_ERROR:const k=v.getResponseJson();le(Bt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(k)),f(k);break;case Rl.TIMEOUT:le(Bt,`RPC '${e}' ${c} timed out`),g(new ce(K.DEADLINE_EXCEEDED,"Request time out"));break;case Rl.HTTP_ERROR:const R=v.getStatus();if(le(Bt,`RPC '${e}' ${c} failed with status:`,R,"response text:",v.getResponseText()),R>0){let z=v.getResponseJson();Array.isArray(z)&&(z=z[0]);const q=z==null?void 0:z.error;if(q&&q.status&&q.message){const J=function(Z){const U=Z.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(U)>=0?U:K.UNKNOWN}(q.status);g(new ce(J,q.message))}else g(new ce(K.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new ce(K.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{le(Bt,`RPC '${e}' ${c} completed.`)}});const w=JSON.stringify(a);le(Bt,`RPC '${e}' ${c} sending request:`,a),v.send(n,"POST",w,s,15)})}Bo(e,n,s){const a=Wc(),c=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Pm(),g=Rm(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(v.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(v.useFetchStreams=!0),this.Oo(v.initMessageHeaders,n,s),v.encodeInitMessageHeaders=!0;const k=c.join("");le(Bt,`Creating RPC '${e}' stream ${a}: ${k}`,v);const R=f.createWebChannel(k,v);let z=!1,q=!1;const J=new Aw({Io:U=>{q?le(Bt,`Not sending because RPC '${e}' stream ${a} is closed:`,U):(z||(le(Bt,`Opening RPC '${e}' stream ${a} transport.`),R.open(),z=!0),le(Bt,`RPC '${e}' stream ${a} sending:`,U),R.send(U))},To:()=>R.close()}),Z=(U,Ee,ge)=>{U.listen(Ee,ke=>{try{ge(ke)}catch(ve){setTimeout(()=>{throw ve},0)}})};return Z(R,qo.EventType.OPEN,()=>{q||(le(Bt,`RPC '${e}' stream ${a} transport opened.`),J.yo())}),Z(R,qo.EventType.CLOSE,()=>{q||(q=!0,le(Bt,`RPC '${e}' stream ${a} transport closed`),J.So())}),Z(R,qo.EventType.ERROR,U=>{q||(q=!0,zs(Bt,`RPC '${e}' stream ${a} transport errored:`,U),J.So(new ce(K.UNAVAILABLE,"The operation could not be completed")))}),Z(R,qo.EventType.MESSAGE,U=>{var Ee;if(!q){const ge=U.data[0];Ve(!!ge);const ke=ge,ve=ke.error||((Ee=ke[0])===null||Ee===void 0?void 0:Ee.error);if(ve){le(Bt,`RPC '${e}' stream ${a} received error:`,ve);const Qe=ve.status;let Le=function(S){const x=ht[S];if(x!==void 0)return sg(x)}(Qe),N=ve.message;Le===void 0&&(Le=K.INTERNAL,N="Unknown error status: "+Qe+" with message "+ve.message),q=!0,J.So(new ce(Le,N)),R.close()}else le(Bt,`RPC '${e}' stream ${a} received:`,ge),J.bo(ge)}}),Z(g,Om.STAT_EVENT,U=>{U.stat===rh.PROXY?le(Bt,`RPC '${e}' stream ${a} detected buffering proxy`):U.stat===rh.NOPROXY&&le(Bt,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{J.wo()},0),J}}function Gc(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function au(i){return new qb(i,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yg{constructor(e,n,s=1e3,a=1.5,c=6e4){this.ui=e,this.timerId=n,this.ko=s,this.qo=a,this.Qo=c,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),a=Math.max(0,n-s);a>0&&le("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vg{constructor(e,n,s,a,c,f,g,v){this.ui=e,this.Ho=s,this.Jo=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new yg(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(xr(n.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Yo===n&&this.P_(s,a)},s=>{e(()=>{const a=new ce(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(a)})})}P_(e,n){const s=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{s(()=>this.I_(a))}),this.stream.onMessage(a=>{s(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Rw extends vg{constructor(e,n,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Wb(this.serializer,e),s=function(a){if(!("targetChange"in a))return _e.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?_e.min():c.readTime?ir(c.readTime):_e.min()}(e);return this.listener.d_(n,s)}A_(e){const n={};n.database=fh(this.serializer),n.addTarget=function(a,c){let f;const g=c.target;if(f=ah(g)?{documents:Qb(a,g)}:{query:Xb(a,g)._t},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=lg(a,c.resumeToken);const v=uh(a,c.expectedCount);v!==null&&(f.expectedCount=v)}else if(c.snapshotVersion.compareTo(_e.min())>0){f.readTime=Gl(a,c.snapshotVersion.toTimestamp());const v=uh(a,c.expectedCount);v!==null&&(f.expectedCount=v)}return f}(this.serializer,e);const s=Yb(this.serializer,e);s&&(n.labels=s),this.a_(n)}R_(e){const n={};n.database=fh(this.serializer),n.removeTarget=e,this.a_(n)}}class Pw extends vg{constructor(e,n,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Hb(e.writeResults,e.commitTime),s=ir(e.commitTime);return this.listener.g_(s,n)}p_(){const e={};e.database=fh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>Gb(this.serializer,s))};this.a_(n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mw extends class{}{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new ce(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Mo(e,ch(n,s),a,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ce(K.UNKNOWN,c.toString())})}Lo(e,n,s,a,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,g])=>this.connection.Lo(e,ch(n,s),a,f,g,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ce(K.UNKNOWN,f.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Fw{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(xr(n),this.D_=!1):le("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zw{constructor(e,n,s,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=c,this.k_._o(f=>{s.enqueueAndForget(async()=>{$i(this)&&(le("RemoteStore","Restarting streams for network reachability change."),await async function(g){const v=Se(g);v.L_.add(4),await ua(v),v.q_.set("Unknown"),v.L_.delete(4),await lu(v)}(this))})}),this.q_=new Fw(s,a)}}async function lu(i){if($i(i))for(const e of i.B_)await e(!0)}async function ua(i){for(const e of i.B_)await e(!1)}function bg(i,e){const n=Se(i);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),zh(n)?Fh(n):Hs(n).r_()&&Mh(n,e))}function Ph(i,e){const n=Se(i),s=Hs(n);n.N_.delete(e),s.r_()&&wg(n,e),n.N_.size===0&&(s.r_()?s.o_():$i(n)&&n.q_.set("Unknown"))}function Mh(i,e){if(i.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hs(i).A_(e)}function wg(i,e){i.Q_.xe(e),Hs(i).R_(e)}function Fh(i){i.Q_=new Bb({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>i.N_.get(e)||null,tt:()=>i.datastore.serializer.databaseId}),Hs(i).start(),i.q_.v_()}function zh(i){return $i(i)&&!Hs(i).n_()&&i.N_.size>0}function $i(i){return Se(i).L_.size===0}function _g(i){i.Q_=void 0}async function Bw(i){i.q_.set("Online")}async function Uw(i){i.N_.forEach((e,n)=>{Mh(i,e)})}async function jw(i,e){_g(i),zh(i)?(i.q_.M_(e),Fh(i)):i.q_.set("Unknown")}async function Vw(i,e,n){if(i.q_.set("Online"),e instanceof ag&&e.state===2&&e.cause)try{await async function(s,a){const c=a.cause;for(const f of a.targetIds)s.N_.has(f)&&(await s.remoteSyncer.rejectListen(f,c),s.N_.delete(f),s.Q_.removeTarget(f))}(i,e)}catch(s){le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Hl(i,s)}else if(e instanceof Fl?i.Q_.Ke(e):e instanceof og?i.Q_.He(e):i.Q_.We(e),!n.isEqual(_e.min()))try{const s=await gg(i.localStore);n.compareTo(s)>=0&&await function(a,c){const f=a.Q_.rt(c);return f.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const w=a.N_.get(v);w&&a.N_.set(v,w.withResumeToken(g.resumeToken,c))}}),f.targetMismatches.forEach((g,v)=>{const w=a.N_.get(g);if(!w)return;a.N_.set(g,w.withResumeToken(Rt.EMPTY_BYTE_STRING,w.snapshotVersion)),wg(a,g);const k=new ei(w.target,g,v,w.sequenceNumber);Mh(a,k)}),a.remoteSyncer.applyRemoteEvent(f)}(i,n)}catch(s){le("RemoteStore","Failed to raise snapshot:",s),await Hl(i,s)}}async function Hl(i,e,n){if(!oa(e))throw e;i.L_.add(1),await ua(i),i.q_.set("Offline"),n||(n=()=>gg(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{le("RemoteStore","Retrying IndexedDB access"),await n(),i.L_.delete(1),await lu(i)})}function Sg(i,e){return e().catch(n=>Hl(i,n,e))}async function uu(i){const e=Se(i),n=ai(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qw(e);)try{const a=await Cw(e.localStore,s);if(a===null){e.O_.length===0&&n.o_();break}s=a.batchId,$w(e,a)}catch(a){await Hl(e,a)}Eg(e)&&kg(e)}function qw(i){return $i(i)&&i.O_.length<10}function $w(i,e){i.O_.push(e);const n=ai(i);n.r_()&&n.V_&&n.m_(e.mutations)}function Eg(i){return $i(i)&&!ai(i).n_()&&i.O_.length>0}function kg(i){ai(i).start()}async function Kw(i){ai(i).p_()}async function Ww(i){const e=ai(i);for(const n of i.O_)e.m_(n.mutations)}async function Gw(i,e,n){const s=i.O_.shift(),a=Nh.from(s,e,n);await Sg(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await uu(i)}async function Hw(i,e){e&&ai(i).V_&&await async function(n,s){if(function(a){return Mb(a)&&a!==K.ABORTED}(s.code)){const a=n.O_.shift();ai(n).s_(),await Sg(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s)),await uu(n)}}(i,e),Eg(i)&&kg(i)}async function om(i,e){const n=Se(i);n.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const s=$i(n);n.L_.add(3),await ua(n),s&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await lu(n)}async function Qw(i,e){const n=Se(i);e?(n.L_.delete(2),await lu(n)):e||(n.L_.add(2),await ua(n),n.q_.set("Unknown"))}function Hs(i){return i.K_||(i.K_=function(e,n,s){const a=Se(e);return a.w_(),new Rw(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{Eo:Bw.bind(null,i),Ro:Uw.bind(null,i),mo:jw.bind(null,i),d_:Vw.bind(null,i)}),i.B_.push(async e=>{e?(i.K_.s_(),zh(i)?Fh(i):i.q_.set("Unknown")):(await i.K_.stop(),_g(i))})),i.K_}function ai(i){return i.U_||(i.U_=function(e,n,s){const a=Se(e);return a.w_(),new Pw(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Kw.bind(null,i),mo:Hw.bind(null,i),f_:Ww.bind(null,i),g_:Gw.bind(null,i)}),i.B_.push(async e=>{e?(i.U_.s_(),await uu(i)):(await i.U_.stop(),i.O_.length>0&&(le("RemoteStore",`Stopping write stream with ${i.O_.length} pending writes`),i.O_=[]))})),i.U_}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bh{constructor(e,n,s,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,c){const f=Date.now()+s,g=new Bh(e,n,f,a,c);return g.start(s),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uh(i,e){if(xr("AsyncQueue",`${e}: ${i}`),oa(i))return new ce(K.UNAVAILABLE,`${e}: ${i}`);throw i}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fs{constructor(e){this.comparator=e?(n,s)=>e(n,s)||me.comparator(n.key,s.key):(n,s)=>me.comparator(n.key,s.key),this.keyedMap=$o(),this.sortedSet=new rt(this.comparator)}static emptySet(e){return new Fs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Fs;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class am{constructor(){this.W_=new rt(me.comparator)}track(e){const n=e.doc.key,s=this.W_.get(n);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(n,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(n):e.type===1&&s.type===2?this.W_=this.W_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):we():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,s)=>{e.push(s)}),e}}class qs{constructor(e,n,s,a,c,f,g,v,w){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=w}static fromInitialDocuments(e,n,s,a,c){const f=[];return n.forEach(g=>{f.push({type:0,doc:g})}),new qs(e,n,Fs.emptySet(n),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xw{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Jw{constructor(){this.queries=lm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,n){const s=Se(e),a=s.queries;s.queries=lm(),a.forEach((c,f)=>{for(const g of f.j_)g.onError(n)})})(this,new ce(K.ABORTED,"Firestore shutting down"))}}function lm(){return new Gs(i=>Gm(i),tu)}async function jh(i,e){const n=Se(i);let s=3;const a=e.query;let c=n.queries.get(a);c?!c.H_()&&e.J_()&&(s=2):(c=new Xw,s=e.J_()?0:1);try{switch(s){case 0:c.z_=await n.onListen(a,!0);break;case 1:c.z_=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(f){const g=Uh(f,`Initialization of query '${Os(e.query)}' failed`);return void e.onError(g)}n.queries.set(a,c),c.j_.push(e),e.Z_(n.onlineState),c.z_&&e.X_(c.z_)&&qh(n)}async function Vh(i,e){const n=Se(i),s=e.query;let a=3;const c=n.queries.get(s);if(c){const f=c.j_.indexOf(e);f>=0&&(c.j_.splice(f,1),c.j_.length===0?a=e.J_()?0:1:!c.H_()&&e.J_()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Yw(i,e){const n=Se(i);let s=!1;for(const a of e){const c=a.query,f=n.queries.get(c);if(f){for(const g of f.j_)g.X_(a)&&(s=!0);f.z_=a}}s&&qh(n)}function Zw(i,e,n){const s=Se(i),a=s.queries.get(e);if(a)for(const c of a.j_)c.onError(n);s.queries.delete(e)}function qh(i){i.Y_.forEach(e=>{e.next()})}var ph,um;(um=ph||(ph={})).ea="default",um.Cache="cache";class $h{constructor(e,n,s){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new qs(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const s=n!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ph.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xg{constructor(e){this.key=e}}class Cg{constructor(e){this.key=e}}class e1{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ne(),this.mutatedKeys=Ne(),this.Aa=Hm(e),this.Ra=new Fs(this.Aa)}get Va(){return this.Ta}ma(e,n){const s=n?n.fa:new am,a=n?n.Ra:this.Ra;let c=n?n.mutatedKeys:this.mutatedKeys,f=a,g=!1;const v=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,w=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((k,R)=>{const z=a.get(k),q=nu(this.query,R)?R:null,J=!!z&&this.mutatedKeys.has(z.key),Z=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let U=!1;z&&q?z.data.isEqual(q.data)?J!==Z&&(s.track({type:3,doc:q}),U=!0):this.ga(z,q)||(s.track({type:2,doc:q}),U=!0,(v&&this.Aa(q,v)>0||w&&this.Aa(q,w)<0)&&(g=!0)):!z&&q?(s.track({type:0,doc:q}),U=!0):z&&!q&&(s.track({type:1,doc:z}),U=!0,(v||w)&&(g=!0)),U&&(q?(f=f.add(q),c=Z?c.add(k):c.delete(k)):(f=f.delete(k),c=c.delete(k)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const k=this.query.limitType==="F"?f.last():f.first();f=f.delete(k.key),c=c.delete(k.key),s.track({type:1,doc:k})}return{Ra:f,fa:s,ns:g,mutatedKeys:c}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const c=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const f=e.fa.G_();f.sort((k,R)=>function(z,q){const J=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return J(z)-J(q)}(k.type,R.type)||this.Aa(k.doc,R.doc)),this.pa(s),a=a!=null&&a;const g=n&&!a?this.ya():[],v=this.da.size===0&&this.current&&!a?1:0,w=v!==this.Ea;return this.Ea=v,f.length!==0||w?{snapshot:new qs(this.query,e.Ra,c,f,e.mutatedKeys,v===0,w,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:g}:{wa:g}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new am,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ne(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const n=[];return e.forEach(s=>{this.da.has(s)||n.push(new Cg(s))}),this.da.forEach(s=>{e.has(s)||n.push(new xg(s))}),n}ba(e){this.Ta=e.Ts,this.da=Ne();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return qs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class t1{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class n1{constructor(e){this.key=e,this.va=!1}}class r1{constructor(e,n,s,a,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Ca={},this.Fa=new Gs(g=>Gm(g),tu),this.Ma=new Map,this.xa=new Set,this.Oa=new rt(me.comparator),this.Na=new Map,this.La=new Ah,this.Ba={},this.ka=new Map,this.qa=Vs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function i1(i,e,n=!0){const s=Ag(i);let a;const c=s.Fa.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Da()):a=await Ig(s,e,n,!0),a}async function s1(i,e){const n=Ag(i);await Ig(n,e,!0,!1)}async function Ig(i,e,n,s){const a=await Iw(i.localStore,rr(e)),c=a.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let g;return s&&(g=await o1(i,e,c,f==="current",a.resumeToken)),i.isPrimaryClient&&n&&bg(i.remoteStore,a),g}async function o1(i,e,n,s,a){i.Ka=(R,z,q)=>async function(J,Z,U,Ee){let ge=Z.view.ma(U);ge.ns&&(ge=await rm(J.localStore,Z.query,!1).then(({documents:Le})=>Z.view.ma(Le,ge)));const ke=Ee&&Ee.targetChanges.get(Z.targetId),ve=Ee&&Ee.targetMismatches.get(Z.targetId)!=null,Qe=Z.view.applyChanges(ge,J.isPrimaryClient,ke,ve);return hm(J,Z.targetId,Qe.wa),Qe.snapshot}(i,R,z,q);const c=await rm(i.localStore,e,!0),f=new e1(e,c.Ts),g=f.ma(c.documents),v=la.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),w=f.applyChanges(g,i.isPrimaryClient,v);hm(i,n,w.wa);const k=new t1(e,n,f);return i.Fa.set(e,k),i.Ma.has(n)?i.Ma.get(n).push(e):i.Ma.set(n,[e]),w.snapshot}async function a1(i,e,n){const s=Se(i),a=s.Fa.get(e),c=s.Ma.get(a.targetId);if(c.length>1)return s.Ma.set(a.targetId,c.filter(f=>!tu(f,e))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await dh(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&Ph(s.remoteStore,a.targetId),mh(s,a.targetId)}).catch(sa)):(mh(s,a.targetId),await dh(s.localStore,a.targetId,!0))}async function l1(i,e){const n=Se(i),s=n.Fa.get(e),a=n.Ma.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Ph(n.remoteStore,s.targetId))}async function u1(i,e,n){const s=g1(i);try{const a=await function(c,f){const g=Se(c),v=wt.now(),w=f.reduce((z,q)=>z.add(q.key),Ne());let k,R;return g.persistence.runTransaction("Locally write mutations","readwrite",z=>{let q=Cr(),J=Ne();return g.cs.getEntries(z,w).next(Z=>{q=Z,q.forEach((U,Ee)=>{Ee.isValidDocument()||(J=J.add(U))})}).next(()=>g.localDocuments.getOverlayedDocuments(z,q)).next(Z=>{k=Z;const U=[];for(const Ee of f){const ge=Lb(Ee,k.get(Ee.key).overlayedDocument);ge!=null&&U.push(new li(Ee.key,ge,Um(ge.value.mapValue),rn.exists(!0)))}return g.mutationQueue.addMutationBatch(z,v,U,f)}).next(Z=>{R=Z;const U=Z.applyToLocalDocumentSet(k,J);return g.documentOverlayCache.saveOverlays(z,Z.batchId,U)})}).then(()=>({batchId:R.batchId,changes:Xm(k)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(c,f,g){let v=c.Ba[c.currentUser.toKey()];v||(v=new rt(ze)),v=v.insert(f,g),c.Ba[c.currentUser.toKey()]=v}(s,a.batchId,n),await ca(s,a.changes),await uu(s.remoteStore)}catch(a){const c=Uh(a,"Failed to persist write");n.reject(c)}}async function Tg(i,e){const n=Se(i);try{const s=await kw(n.localStore,e);e.targetChanges.forEach((a,c)=>{const f=n.Na.get(c);f&&(Ve(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?f.va=!0:a.modifiedDocuments.size>0?Ve(f.va):a.removedDocuments.size>0&&(Ve(f.va),f.va=!1))}),await ca(n,s,e)}catch(s){await sa(s)}}function cm(i,e,n){const s=Se(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.Fa.forEach((c,f)=>{const g=f.view.Z_(e);g.snapshot&&a.push(g.snapshot)}),function(c,f){const g=Se(c);g.onlineState=f;let v=!1;g.queries.forEach((w,k)=>{for(const R of k.j_)R.Z_(f)&&(v=!0)}),v&&qh(g)}(s.eventManager,e),a.length&&s.Ca.d_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function c1(i,e,n){const s=Se(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Na.get(e),c=a&&a.key;if(c){let f=new rt(me.comparator);f=f.insert(c,jt.newNoDocument(c,_e.min()));const g=Ne().add(c),v=new ou(_e.min(),new Map,new rt(ze),f,g);await Tg(s,v),s.Oa=s.Oa.remove(c),s.Na.delete(e),Kh(s)}else await dh(s.localStore,e,!1).then(()=>mh(s,e,n)).catch(sa)}async function h1(i,e){const n=Se(i),s=e.batch.batchId;try{const a=await Ew(n.localStore,e);Dg(n,s,null),Ng(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ca(n,a)}catch(a){await sa(a)}}async function f1(i,e,n){const s=Se(i);try{const a=await function(c,f){const g=Se(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let w;return g.mutationQueue.lookupMutationBatch(v,f).next(k=>(Ve(k!==null),w=k.keys(),g.mutationQueue.removeMutationBatch(v,k))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,w,f)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w)).next(()=>g.localDocuments.getDocuments(v,w))})}(s.localStore,e);Dg(s,e,n),Ng(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ca(s,a)}catch(a){await sa(a)}}function Ng(i,e){(i.ka.get(e)||[]).forEach(n=>{n.resolve()}),i.ka.delete(e)}function Dg(i,e,n){const s=Se(i);let a=s.Ba[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),s.Ba[s.currentUser.toKey()]=a}}function mh(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Ma.get(e))i.Fa.delete(s),n&&i.Ca.$a(s,n);i.Ma.delete(e),i.isPrimaryClient&&i.La.gr(e).forEach(s=>{i.La.containsKey(s)||Lg(i,s)})}function Lg(i,e){i.xa.delete(e.path.canonicalString());const n=i.Oa.get(e);n!==null&&(Ph(i.remoteStore,n),i.Oa=i.Oa.remove(e),i.Na.delete(n),Kh(i))}function hm(i,e,n){for(const s of n)s instanceof xg?(i.La.addReference(s.key,e),d1(i,s)):s instanceof Cg?(le("SyncEngine","Document no longer in limbo: "+s.key),i.La.removeReference(s.key,e),i.La.containsKey(s.key)||Lg(i,s.key)):we()}function d1(i,e){const n=e.key,s=n.path.canonicalString();i.Oa.get(n)||i.xa.has(s)||(le("SyncEngine","New document in limbo: "+n),i.xa.add(s),Kh(i))}function Kh(i){for(;i.xa.size>0&&i.Oa.size<i.maxConcurrentLimboResolutions;){const e=i.xa.values().next().value;i.xa.delete(e);const n=new me(et.fromString(e)),s=i.qa.next();i.Na.set(s,new n1(n)),i.Oa=i.Oa.insert(n,s),bg(i.remoteStore,new ei(rr(eu(n.path)),s,"TargetPurposeLimboResolution",Sh.oe))}}async function ca(i,e,n){const s=Se(i),a=[],c=[],f=[];s.Fa.isEmpty()||(s.Fa.forEach((g,v)=>{f.push(s.Ka(v,e,n).then(w=>{var k;if((w||n)&&s.isPrimaryClient){const R=w?!w.fromCache:(k=n==null?void 0:n.targetChanges.get(v.targetId))===null||k===void 0?void 0:k.current;s.sharedClientState.updateQueryState(v.targetId,R?"current":"not-current")}if(w){a.push(w);const R=Rh.Wi(v.targetId,w);c.push(R)}}))}),await Promise.all(f),s.Ca.d_(a),await async function(g,v){const w=Se(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>G.forEach(v,R=>G.forEach(R.$i,z=>w.persistence.referenceDelegate.addReference(k,R.targetId,z)).next(()=>G.forEach(R.Ui,z=>w.persistence.referenceDelegate.removeReference(k,R.targetId,z)))))}catch(k){if(!oa(k))throw k;le("LocalStore","Failed to update sequence numbers: "+k)}for(const k of v){const R=k.targetId;if(!k.fromCache){const z=w.os.get(R),q=z.snapshotVersion,J=z.withLastLimboFreeSnapshotVersion(q);w.os=w.os.insert(R,J)}}}(s.localStore,c))}async function p1(i,e){const n=Se(i);if(!n.currentUser.isEqual(e)){le("SyncEngine","User change. New user:",e.toKey());const s=await mg(n.localStore,e);n.currentUser=e,function(a,c){a.ka.forEach(f=>{f.forEach(g=>{g.reject(new ce(K.CANCELLED,c))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ca(n,s.hs)}}function m1(i,e){const n=Se(i),s=n.Na.get(e);if(s&&s.va)return Ne().add(s.key);{let a=Ne();const c=n.Ma.get(e);if(!c)return a;for(const f of c){const g=n.Fa.get(f);a=a.unionWith(g.view.Va)}return a}}function Ag(i){const e=Se(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=m1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c1.bind(null,e),e.Ca.d_=Yw.bind(null,e.eventManager),e.Ca.$a=Zw.bind(null,e.eventManager),e}function g1(i){const e=Se(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f1.bind(null,e),e}class Ql{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=au(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Sw(this.persistence,new ww,e.initialUser,this.serializer)}Ga(e){return new yw(Oh.Zr,this.serializer)}Wa(e){return new Nw}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ql.provider={build:()=>new Ql};class gh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>cm(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=p1.bind(null,this.syncEngine),await Qw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Jw}()}createDatastore(e){const n=au(e.databaseInfo.databaseId),s=function(a){return new Ow(a)}(e.databaseInfo);return function(a,c,f,g){return new Mw(a,c,f,g)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(n,s,a,c,f){return new zw(n,s,a,c,f)}(this.localStore,this.datastore,e.asyncQueue,n=>cm(this.syncEngine,n,0),function(){return sm.D()?new sm:new Dw}())}createSyncEngine(e,n){return function(s,a,c,f,g,v,w){const k=new r1(s,a,c,f,g,v);return w&&(k.Qa=!0),k}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=Se(s);le("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await ua(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}gh.provider={build:()=>new gh};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wh{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class y1{constructor(e,n,s,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Ut.UNAUTHENTICATED,this.clientId=Fm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async f=>{le("FirestoreClient","Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(le("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Uh(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Hc(i,e){i.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await mg(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function fm(i,e){i.asyncQueue.verifyOperationInProgress();const n=await v1(i);le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>om(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>om(e.remoteStore,a)),i._onlineComponents=e}async function v1(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hc(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;zs("Error using user provided cache. Falling back to memory cache: "+n),await Hc(i,new Ql)}}else le("FirestoreClient","Using default OfflineComponentProvider"),await Hc(i,new Ql);return i._offlineComponents}async function Og(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),await fm(i,i._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),await fm(i,new gh))),i._onlineComponents}function b1(i){return Og(i).then(e=>e.syncEngine)}async function Xl(i){const e=await Og(i),n=e.eventManager;return n.onListen=i1.bind(null,e.syncEngine),n.onUnlisten=a1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=s1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=l1.bind(null,e.syncEngine),n}function w1(i,e,n={}){const s=new Er;return i.asyncQueue.enqueueAndForget(async()=>function(a,c,f,g,v){const w=new Wh({next:R=>{w.Za(),c.enqueueAndForget(()=>Vh(a,k));const z=R.docs.has(f);!z&&R.fromCache?v.reject(new ce(K.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&R.fromCache&&g&&g.source==="server"?v.reject(new ce(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(R)},error:R=>v.reject(R)}),k=new $h(eu(f.path),w,{includeMetadataChanges:!0,_a:!0});return jh(a,k)}(await Xl(i),i.asyncQueue,e,n,s)),s.promise}function _1(i,e,n={}){const s=new Er;return i.asyncQueue.enqueueAndForget(async()=>function(a,c,f,g,v){const w=new Wh({next:R=>{w.Za(),c.enqueueAndForget(()=>Vh(a,k)),R.fromCache&&g.source==="server"?v.reject(new ce(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(R)},error:R=>v.reject(R)}),k=new $h(f,w,{includeMetadataChanges:!0,_a:!0});return jh(a,k)}(await Xl(i),i.asyncQueue,e,n,s)),s.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Rg(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dm=new Map;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Pg(i,e,n){if(!n)throw new ce(K.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function S1(i,e,n,s){if(e===!0&&s===!0)throw new ce(K.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function pm(i){if(!me.isDocumentKey(i))throw new ce(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function mm(i){if(me.isDocumentKey(i))throw new ce(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Gh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":we()}function gn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ce(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gh(i);throw new ce(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gm{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}S1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rg((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cu{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gm(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new B0;switch(n.type){case"firstParty":return new q0(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ce(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=dm.get(e);n&&(le("ComponentProvider","Removing Datastore"),dm.delete(e),n.terminate())}(this),Promise.resolve()}}function E1(i,e,n,s={}){var a;const c=(i=gn(i,cu))._getSettings(),f=`${e}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==f&&zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:f,ssl:!1})),s.mockUserToken){let g,v;if(typeof s.mockUserToken=="string")g=s.mockUserToken,v=Ut.MOCK_USER;else{g=vv(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new ce(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Ut(w)}i._authCredentials=new U0(new Mm(g,v))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ha{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ha(this.firestore,e,this._query)}}class sn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class ii extends ha{constructor(e,n,s){super(e,n,eu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new me(e))}withConverter(e){return new ii(this.firestore,e,this._path)}}function ti(i,e,...n){if(i=sr(i),Pg("collection","path",e),i instanceof cu){const s=et.fromString(e,...n);return mm(s),new ii(i,null,s)}{if(!(i instanceof sn||i instanceof ii))throw new ce(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(et.fromString(e,...n));return mm(s),new ii(i.firestore,null,s)}}function pn(i,e,...n){if(i=sr(i),arguments.length===1&&(e=Fm.newId()),Pg("doc","path",e),i instanceof cu){const s=et.fromString(e,...n);return pm(s),new sn(i,null,new me(s))}{if(!(i instanceof sn||i instanceof ii))throw new ce(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(et.fromString(e,...n));return pm(s),new sn(i.firestore,i instanceof ii?i.converter:null,new me(s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ym{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new yg(this,"async_queue_retry"),this.Vu=()=>{const s=Gc();s&&le("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const n=Gc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Gc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Er;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!oa(e))throw e;le("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(s=>{this.Eu=s,this.du=!1;const a=function(c){let f=c.message||"";return c.stack&&(f=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),f}(s);throw xr("INTERNAL UNHANDLED ERROR: ",a),s}).then(s=>(this.du=!1,s))));return this.mu=n,n}enqueueAfterDelay(e,n,s){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const a=Bh.createAndSchedule(this,e,n,s,c=>this.yu(c));return this.Tu.push(a),a}fu(){this.Eu&&we()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function vm(i){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const a of n)if(a in s&&typeof s[a]=="function")return!0;return!1}(i,["next","error","complete"])}class Ir extends cu{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new ym,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ym(e),this._firestoreClient=void 0,await e}}}function k1(i,e){const n=typeof i=="object"?i:I0(),s=typeof i=="string"?i:"(default)",a=E0(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=gv("firestore");c&&E1(a,...c)}return a}function fa(i){if(i._terminated)throw new ce(K.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||x1(i),i._firestoreClient}function x1(i){var e,n,s;const a=i._freezeSettings(),c=function(f,g,v,w){return new nb(f,g,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,Rg(w.experimentalLongPollingOptions),w.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new y1(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}}(i._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $s{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $s(Rt.fromBase64String(e))}catch(n){throw new ce(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $s(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hh{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const C1=/^__.*__$/;class I1{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new li(e,this.data,this.fieldMask,n,this.fieldTransforms):new aa(e,this.data,n,this.fieldTransforms)}}class Mg{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new li(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Fg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class Jh{constructor(e,n,s,a,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.vu(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Jh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Fu({path:s,xu:!1});return a.Ou(e),a}Nu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Fu({path:s,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Fg(this.Cu)&&C1.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class T1{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||au(e)}Qu(e,n,s,a=!1){return new Jh({Cu:e,methodName:n,qu:s,path:At.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yh(i){const e=i._freezeSettings(),n=au(i._databaseId);return new T1(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Zh(i,e,n,s,a,c={}){const f=i.Qu(c.merge||c.mergeFields?2:0,e,n,a);ef("Data must be an object, but it was:",f,s);const g=zg(s,f);let v,w;if(c.merge)v=new mn(f.fieldMask),w=f.fieldTransforms;else if(c.mergeFields){const k=[];for(const R of c.mergeFields){const z=yh(e,R,n);if(!f.contains(z))throw new ce(K.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);Ug(k,z)||k.push(z)}v=new mn(k),w=f.fieldTransforms.filter(R=>v.covers(R.field))}else v=null,w=f.fieldTransforms;return new I1(new nn(g),v,w)}class fu extends Hh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fu}}function N1(i,e,n,s){const a=i.Qu(1,e,n);ef("Data must be an object, but it was:",a,s);const c=[],f=nn.empty();qi(s,(v,w)=>{const k=tf(e,v,n);w=sr(w);const R=a.Nu(k);if(w instanceof fu)c.push(k);else{const z=du(w,R);z!=null&&(c.push(k),f.set(k,z))}});const g=new mn(c);return new Mg(f,g,a.fieldTransforms)}function D1(i,e,n,s,a,c){const f=i.Qu(1,e,n),g=[yh(e,s,n)],v=[a];if(c.length%2!=0)throw new ce(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<c.length;z+=2)g.push(yh(e,c[z])),v.push(c[z+1]);const w=[],k=nn.empty();for(let z=g.length-1;z>=0;--z)if(!Ug(w,g[z])){const q=g[z];let J=v[z];J=sr(J);const Z=f.Nu(q);if(J instanceof fu)w.push(q);else{const U=du(J,Z);U!=null&&(w.push(q),k.set(q,U))}}const R=new mn(w);return new Mg(k,R,f.fieldTransforms)}function du(i,e){if(Bg(i=sr(i)))return ef("Unsupported field value:",e,i),zg(i,e);if(i instanceof Hh)return function(n,s){if(!Fg(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const a=[];let c=0;for(const f of n){let g=du(f,s.Lu(c));g==null&&(g={nullValue:"NULL_VALUE"}),a.push(g),c++}return{arrayValue:{values:a}}}(i,e)}return function(n,s){if((n=sr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return xb(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=wt.fromDate(n);return{timestampValue:Gl(s.serializer,a)}}if(n instanceof wt){const a=new wt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Gl(s.serializer,a)}}if(n instanceof Qh)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof $s)return{bytesValue:lg(s.serializer,n._byteString)};if(n instanceof sn){const a=s.databaseId,c=n.firestore._databaseId;if(!c.isEqual(a))throw s.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Lh(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Xh)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw c.Bu("VectorValues must only contain numeric values.");return Th(c.serializer,f)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${Gh(n)}`)}(i,e)}function zg(i,e){const n={};return zm(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qi(i,(s,a)=>{const c=du(a,e.Mu(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function Bg(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof wt||i instanceof Qh||i instanceof $s||i instanceof sn||i instanceof Hh||i instanceof Xh)}function ef(i,e,n){if(!Bg(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const s=Gh(n);throw s==="an object"?e.Bu(i+" a custom object"):e.Bu(i+" "+s)}}function yh(i,e,n){if((e=sr(e))instanceof hu)return e._internalPath;if(typeof e=="string")return tf(i,e);throw Jl("Field path arguments must be of type string or ",i,!1,void 0,n)}const L1=new RegExp("[~\\*/\\[\\]]");function tf(i,e,n){if(e.search(L1)>=0)throw Jl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new hu(...e.split("."))._internalPath}catch{throw Jl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Jl(i,e,n,s,a){const c=s&&!s.isEmpty(),f=a!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(c||f)&&(v+=" (found",c&&(v+=` in field ${s}`),f&&(v+=` in document ${a}`),v+=")"),new ce(K.INVALID_ARGUMENT,g+i+v)}function Ug(i,e){return i.some(n=>n.isEqual(e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jg{constructor(e,n,s,a,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Vg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class A1 extends jg{data(){return super.data()}}function Vg(i,e){return typeof e=="string"?tf(i,e):e instanceof hu?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qg(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ce(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class O1{convertValue(e,n="none"){switch(Vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return qi(e,(a,c)=>{s[a]=this.convertValue(c,n)}),s}convertVectorValue(e){var n,s,a;const c=(a=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(f=>ut(f.doubleValue));return new Xh(c)}convertGeoPoint(e){return new Qh(ut(e.latitude),ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=kh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ea(e));default:return null}}convertTimestamp(e){const n=oi(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=et.fromString(e);Ve(pg(s));const a=new ta(s.get(1),s.get(3)),c=new me(s.popFirst(5));return a.isEqual(n)||xr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nf(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $g extends jg{constructor(e,n,s,a,c,f){super(e,n,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Vg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class zl extends $g{data(e={}){return super.data(e)}}class Kg{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Wo(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new zl(this._firestore,this._userDataWriter,s.key,s,new Wo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(f=>{const g=new zl(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Wo(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>a||f.type!==3).map(f=>{const g=new zl(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Wo(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let v=-1,w=-1;return f.type!==0&&(v=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),w=c.indexOf(f.doc.key)),{type:R1(f.type),doc:g,oldIndex:v,newIndex:w}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function R1(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Al(i){i=gn(i,sn);const e=gn(i.firestore,Ir);return w1(fa(e),i._key).then(n=>Wg(e,i,n))}class rf extends O1{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,n)}}function Ol(i){i=gn(i,ha);const e=gn(i.firestore,Ir),n=fa(e),s=new rf(e);return qg(i._query),_1(n,i._query).then(a=>new Kg(e,s,i,a))}function Fi(i,e,n){i=gn(i,sn);const s=gn(i.firestore,Ir),a=nf(i.converter,e,n);return pu(s,[Zh(Yh(s),"setDoc",i._key,a,i.converter!==null,n).toMutation(i._key,rn.none())])}function P1(i){return pu(gn(i.firestore,Ir),[new su(i._key,rn.none())])}function M1(i,e){const n=gn(i.firestore,Ir),s=pn(i),a=nf(i.converter,e);return pu(n,[Zh(Yh(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,rn.exists(!1))]).then(()=>s)}function Qc(i,...e){var n,s,a;i=sr(i);let c={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||vm(e[f])||(c=e[f],f++);const g={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(vm(e[f])){const R=e[f];e[f]=(n=R.next)===null||n===void 0?void 0:n.bind(R),e[f+1]=(s=R.error)===null||s===void 0?void 0:s.bind(R),e[f+2]=(a=R.complete)===null||a===void 0?void 0:a.bind(R)}let v,w,k;if(i instanceof sn)w=gn(i.firestore,Ir),k=eu(i._key.path),v={next:R=>{e[f]&&e[f](Wg(w,i,R))},error:e[f+1],complete:e[f+2]};else{const R=gn(i,ha);w=gn(R.firestore,Ir),k=R._query;const z=new rf(w);v={next:q=>{e[f]&&e[f](new Kg(w,z,R,q))},error:e[f+1],complete:e[f+2]},qg(i._query)}return function(R,z,q,J){const Z=new Wh(J),U=new $h(z,Z,q);return R.asyncQueue.enqueueAndForget(async()=>jh(await Xl(R),U)),()=>{Z.Za(),R.asyncQueue.enqueueAndForget(async()=>Vh(await Xl(R),U))}}(fa(w),k,g,v)}function pu(i,e){return function(n,s){const a=new Er;return n.asyncQueue.enqueueAndForget(async()=>u1(await b1(n),s,a)),a.promise}(fa(i),e)}function Wg(i,e,n){const s=n.docs.get(e._key),a=new rf(i);return new $g(i,a,e._key,s,new Wo(n.hasPendingWrites,n.fromCache),e.converter)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class F1{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Yh(e)}set(e,n,s){this._verifyNotCommitted();const a=Xc(e,this._firestore),c=nf(a.converter,n,s),f=Zh(this._dataReader,"WriteBatch.set",a._key,c,a.converter!==null,s);return this._mutations.push(f.toMutation(a._key,rn.none())),this}update(e,n,s,...a){this._verifyNotCommitted();const c=Xc(e,this._firestore);let f;return f=typeof(n=sr(n))=="string"||n instanceof hu?D1(this._dataReader,"WriteBatch.update",c._key,n,s,a):N1(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(f.toMutation(c._key,rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Xc(e,this._firestore);return this._mutations=this._mutations.concat(new su(n._key,rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xc(i,e){if((i=sr(i)).firestore!==e)throw new ce(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function z1(i){return fa(i=gn(i,Ir)),new F1(i,e=>pu(i,e))}(function(i,e=!0){(function(n){Ws=n})(C0),jl(new Jo("firestore",(n,{instanceIdentifier:s,options:a})=>{const c=n.getProvider("app").getImmediate(),f=new Ir(new j0(n.getProvider("auth-internal")),new K0(n.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ce(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ta(g.options.projectId,v)}(c,s),c);return a=Object.assign({useFetchStreams:e},a),f._setSettings(a),f},"PUBLIC").setMultipleInstances(!0)),Ms(Mp,"4.7.3",i),Ms(Mp,"4.7.3","esm2017")})();const B1={apiKey:"AIzaSyBbk4SiSqWANAiet8EVvTrIC21aAWBvg",authDomain:"myattendanceproject-45c1b.firebaseapp.com",projectId:"myattendanceproject-45c1b",storageBucket:"myattendanceproject-45c1b.appspot.com",messagingSenderId:"601661458034",appId:"1:601661458034:web:8134e270349f9a0b3a3c97"},U1=Im(B1),lt=k1(U1);function j1(){const[i,e]=je.useState([]),[n,s]=je.useState([]),[a,c]=je.useState([]),[f,g]=je.useState(null),[v,w]=je.useState(!1),[k,R]=je.useState(""),[z,q]=je.useState(null);je.useEffect(()=>{const U=Qc(ti(lt,"point_shop"),ke=>e(ke.docs.map(ve=>({id:ve.id,...ve.data()})))),Ee=Qc(ti(lt,"point_logs"),ke=>s(ke.docs.map(ve=>({id:ve.id,...ve.data()})))),ge=Qc(ti(lt,"students"),ke=>c(ke.docs.map(ve=>({id:ve.id,...ve.data()}))));return()=>{U(),Ee(),ge()}},[]);const J=async()=>{const U=a.find(ge=>{const ke=(ge.birth||"").slice(-4),ve=(ge.parentPhone||"").slice(-4);return ke+ve===k});if(!U){alert("학생 인증 실패! 생일 4자리 + 엄마번호 뒤 4자리를 확인해주세요.");return}if((U.availablePoints||0)<f.point)return alert("포인트가 부족합니다");if(!window.confirm(`현재 가용 포인트는 ${U.availablePoints}pt입니다. ${f.point}pt를 사용하시겠습니까?`))return;const Ee={studentId:U.id,name:U.name,item:f.name,point:f.point,date:new Date().toISOString().split("T")[0]};await M1(ti(lt,"point_logs"),Ee),await Fi(pn(lt,"students",U.id),{availablePoints:(U.availablePoints||0)-f.point},{merge:!0}),w(!1),q(U),setTimeout(()=>q(null),5e3)},Z=async U=>{if(prompt("관리자 비밀번호를 입력하세요")!=="ys0246")return alert("비밀번호가 틀립니다.");const Ee=a.find(ge=>ge.id===U.studentId);Ee&&(await P1(pn(lt,"point_logs",U.id)),await Fi(pn(lt,"students",Ee.id),{availablePoints:(Ee.availablePoints||0)+U.point},{merge:!0}))};return Q.jsxs("div",{className:"flex",children:[Q.jsxs("div",{className:"w-2/3 relative",children:[Q.jsx("p",{className:"text-sm mb-1 text-blue-700",children:"📣 생일 4자리 + 엄마번호 4자리로 인증 후 사용"}),Q.jsx("p",{className:"text-sm mb-2 text-gray-600",children:"🎲 랜덤 Lucky 2pt는 수업 10분 전 ~ 5분 후까지! 지각 시 0pt"}),z&&Q.jsxs("div",{className:"text-green-600 font-bold mb-3",children:["✅ ",z.name,"님 ",f==null?void 0:f.point,"pt 사용 완료!"]}),Q.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.map(U=>Q.jsxs("div",{className:"text-center relative",children:[Q.jsx("img",{src:U.imageUrl,alt:U.name,className:"w-full h-32 object-cover rounded shadow"}),Q.jsx("div",{className:"text-sm font-semibold mt-1",children:U.name}),Q.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[U.point,"pt"]}),Q.jsx("button",{className:"text-xs bg-blue-600 text-white px-3 py-1 rounded shadow",onClick:()=>{g(U),w(!0)},children:"사용"})]},U.id))})]}),Q.jsxs("div",{className:"w-1/3 pl-4 border-l",children:[Q.jsx("h3",{className:"text-lg font-bold mb-2",children:"🧾 사용 내역"}),n.map(U=>Q.jsxs("div",{className:"text-sm border-b py-1 flex justify-between items-center",children:[Q.jsxs("div",{children:[U.name," - ",U.item," - ",U.point,"pt",Q.jsx("div",{className:"text-xs text-gray-500",children:U.date})]}),Q.jsx("button",{className:"text-red-500 text-xs",onClick:()=>Z(U),children:"삭제"})]},U.id))]}),v&&f&&Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{className:"fixed inset-0 z-40",style:{backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(2px)"}}),Q.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 text-center",style:{backgroundColor:"white",width:"480px",padding:"2rem",borderRadius:"1rem",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.2)",border:"2px solid #ccc"},children:[Q.jsxs("h2",{className:"text-xl font-bold text-blue-700 mb-4",style:{backgroundColor:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem"},children:["✅ ",f.name," - ",f.point,"pt 사용"]}),Q.jsx("input",{type:"text",value:k,onChange:U=>R(U.target.value),placeholder:"생일4 + 엄마번호4",maxLength:8,className:"w-full p-2 border rounded mb-4 text-center",style:{backgroundColor:"#fff"}}),Q.jsxs("div",{className:"flex justify-between gap-4",children:[Q.jsx("button",{onClick:()=>{w(!1),g(null),R("")},className:"bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded w-1/2",children:"취소"}),Q.jsx("button",{onClick:J,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded w-1/2",children:"사용하기"})]})]})]})]})}function V1(){const[i,e]=je.useState([]),[n,s]=je.useState({}),[a,c]=je.useState([]),[f,g]=je.useState("attendance"),[v,w]=je.useState({}),[k,R]=je.useState(""),[z,q]=je.useState(localStorage.getItem("authenticated")==="true"),[J,Z]=je.useState(new Date),[U,Ee]=je.useState(0),[ge,ke]=je.useState(null),[ve,Qe]=je.useState(!1),[Le,N]=je.useState([]),[S,x]=je.useState({}),T=Object.keys(n).length,D=J.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});[...i].sort((V,Y)=>V.name.localeCompare(Y.name));const A=["출석","숙제","수업태도","시험","문제집완료"],E=new Date,Ke=E.toISOString().split("T")[0],ft=["일","월","화","수","목","금","토"][E.getDay()];je.useEffect(()=>{(async()=>{const V=(await Ol(ti(lt,"students"))).docs.map(Me=>({id:Me.id,...Me.data()})),Y=z1(lt);V.forEach(Me=>{if(typeof Me.points=="number"){const Vt={출석:Me.points,숙제:0,수업태도:0,시험:0,문제집완료:0};Y.set(pn(lt,"students",Me.id),{points:Vt},{merge:!0}),Me.points=Vt}else A.forEach(Vt=>{(!Me.points||Me.points[Vt]===void 0)&&(Me.points||(Me.points={}),Me.points[Vt]=0)})}),await Y.commit(),e(V);const se=pn(lt,"attendance",Ke),ye=await Al(se);ye.exists()&&s(ye.data());const We=(await Ol(ti(lt,"makeups"))).docs.map(Me=>({id:Me.id,...Me.data()})).filter(Me=>Me.date===Ke);c(We)})()},[]);const[dt,Ue]=je.useState([]);je.useEffect(()=>{(async()=>{const V=(await Ol(ti(lt,"schedule_changes"))).docs.map(Y=>({id:Y.id,...Y.data()}));Ue(V)})()},[]),je.useEffect(()=>{(async()=>{const V=(await Ol(ti(lt,"students_high"))).docs.map(Y=>({id:Y.id,...Y.data()}));N(V)})()},[]),je.useEffect(()=>{(async()=>{const V=new Date().toISOString().split("T")[0],Y=await Al(pn(lt,"high-attendance",V));Y.exists()&&x(Y.data())})()},[]);const te=(V,Y)=>{const se=dt.filter(ye=>ye.studentId===V).filter(ye=>ye.effectiveDate<=Y);if(se.length===0){const ye=i.find(We=>We.id===V);return(ye==null?void 0:ye.schedules)||[]}return se.sort((ye,We)=>We.effectiveDate.localeCompare(ye.effectiveDate)),se[0].schedules},fe=()=>{const V={},Y=E.toISOString().split("T")[0];return i.forEach(se=>{se.active===!1||se.pauseDate&&se.pauseDate<=Y||te(se.id,Y).forEach(({day:ye,time:We})=>{ye===ft&&(V[We]||(V[We]=[]),V[We].push(se))})}),V},ne=je.useMemo(()=>fe(),[i,dt]);je.useEffect(()=>{(async()=>{const V=new Date().toISOString().split("T")[0],Y=pn(lt,"dailyLucky",V),se=await Al(Y);if(se.exists()){const ye=se.data();ke(ye.name)}})()},[]);const L=async(V,Y)=>{var se;const ye=new Date().toISOString().split("T")[0],We=n[V.name];if(We&&(We.status==="onTime"||We.status==="tardy")){alert("이미 출석 처리된 학생입니다.");return}if(prompt(`${V.name} 생일 뒷 4자리를 입력하세요 (예: 0412)`)!==((se=V.birth)==null?void 0:se.slice(-4))){alert("생일이 일치하지 않습니다.");return}const Me=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),[Vt,Tr]=Y.split(":"),Nr=new Date;Nr.setHours(+Vt,+Tr,0);const Tn=(new Date-Nr)/6e4;let Nn=0,Kn="onTime",yn=!1;if(Tn>15)Kn="tardy",Nn=0;else if(Tn>=-10&&Tn<=5){const it=pn(lt,"dailyLucky",ye);(await Al(it)).exists()?Nn=1:(Nn=2,yn=!0,await Fi(it,{name:V.name,time:Me}))}else Tn>=-15&&Tn<-10&&(Nn=1);await Fi(pn(lt,"attendance",ye),{[V.name]:{time:Me,status:Kn}},{merge:!0}),s(it=>({...it,[V.name]:{time:Me,status:Kn}}));const on={...V.points,출석:(V.points.출석||0)+Nn};await Fi(pn(lt,"students",V.id),{points:on},{merge:!0}),e(it=>it.map(Gt=>Gt.id===V.id?{...Gt,points:on}:Gt)),w(it=>({...it,[V.name]:!0})),setTimeout(()=>w(it=>({...it,[V.name]:!1})),1500),yn?(ke(V.name),Qe(!0),setTimeout(()=>Qe(!1),2500),alert(`🎉 Lucky!!! ${V.name}님 2pt 당첨!`)):alert(`✅ ${V.name}님 출석 완료! (+${Nn}pt)`),e(it=>it.map(Gt=>Gt.id===V.id?{...Gt,points:on}:Gt)),w(it=>({...it,[V.name]:!0})),setTimeout(()=>w(it=>({...it,[V.name]:!1})),1500),alert(`✅ ${V.name}님 출석 완료! (+1pt)`)},j=()=>{k==="1234"?(q(!0),localStorage.setItem("authenticated","true")):alert("비밀번호가 틀렸습니다.")},he=()=>{q(!1),localStorage.removeItem("authenticated")};if(!z)return Q.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:Q.jsxs("div",{className:"bg-white p-6 rounded shadow-md",children:[Q.jsx("input",{type:"password",placeholder:"출석 체크 비밀번호",className:"border p-2 mr-2",value:k,onChange:V=>R(V.target.value)}),Q.jsx("button",{onClick:j,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"로그인"})]})});const Ce=async V=>{const Y=n[V];if(prompt("지각 상태입니다. 선생님 비밀번호를 입력하세요")==="0301"){const se={time:Y.time,status:"onTime"};await Fi(pn(lt,"attendance",Ke),{[V]:se},{merge:!0}),s(ye=>({...ye,[V]:se})),alert(`${V}님의 출석 상태가 초록으로 변경되었습니다!`)}},xe=V=>A.reduce((Y,se)=>Y+(V[se]||0),0),Te=V=>!Array.isArray(i)||i.length===0?[]:[...i].map(Y=>{var se;return{name:Y.name,value:((se=Y.points)==null?void 0:se[V])||0}}).sort((Y,se)=>se.value-Y.value).slice(0,5),Oe=async V=>{var Y;if(prompt(`${V.name} 생일 뒷 4자리를 입력하세요 (예: 0412)`)!==((Y=V.birth)==null?void 0:Y.slice(-4))){alert("생일이 일치하지 않습니다.");return}const se=new Date,ye=se.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),We=se.toISOString().split("T")[0];await Fi(pn(lt,"high-attendance",We),{[V.name]:{time:ye,status:"출석"}},{merge:!0}),x(Me=>({...Me,[V.name]:{time:ye,status:"출석"}})),alert(`✅ ${V.name}님 고등부 출석 완료!`)};return Q.jsxs(Q.Fragment,{children:[ve&&Q.jsxs("div",{className:"fixed top-10 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-white text-2xl font-bold px-6 py-3 rounded shadow-lg z-50 animate-bounce",children:["🎉 Lucky!!! ",ge,"님 2pt!"]}),Q.jsxs("div",{className:"flex items-center gap-2 justify-center text-sm text-blue-700 bg-blue-100 px-4 py-2 rounded mb-4",children:[Q.jsx("span",{children:"📣"}),Q.jsxs("div",{children:[Q.jsx("div",{children:"생일 4자리 입력시 출석완료!"}),Q.jsx("div",{children:" 랜덤 Lucky 2pt는 10분전~5분후까지만! 지각시 0pt"})]})]}),Q.jsxs("div",{className:"bg-gray-100 min-h-screen p-6",children:[Q.jsxs("div",{className:"max-w-5xl mx-auto flex space-x-4 mb-6",children:[Q.jsx("button",{className:`px-4 py-2 rounded ${f==="attendance"?"bg-blue-500 text-white":"bg-white text-gray-700"}`,onClick:()=>g("attendance"),children:"출석 체크"}),Q.jsx("button",{onClick:()=>g("ranking"),className:`px-4 py-2 rounded ${f==="ranking"?"bg-blue-500 text-white":"bg-white text-gray-700"}`,children:"포인트 랭킹"}),Q.jsx("button",{className:`px-4 py-2 rounded ${f==="shop"?"bg-blue-500 text-white":"bg-white text-gray-700"}`,onClick:()=>g("shop"),children:"포인트상점"})]}),f==="attendance"&&Q.jsxs(Q.Fragment,{children:[Q.jsxs("div",{className:"max-w-5xl mx-auto flex justify-between items-center mb-8",children:[Q.jsxs("div",{children:[Q.jsxs("h1",{className:"text-3xl font-bold mb-2 text-gray-700",children:["📌 출석 체크 - ",ft,"요일"]}),Q.jsxs("div",{className:"text-gray-600",children:["📅 ",Ke," / ⏰ ",D," / ✅ 출석 인원: ",T]}),Q.jsxs("div",{className:"text-center text-lg text-yellow-600 font-bold mb-4",children:["🎉 오늘의 Lucky 당첨자: ",ge?`${ge}님`:"아직 없음"]})]}),Q.jsx("button",{onClick:he,className:"bg-red-400 text-white px-4 py-2 rounded",children:"로그아웃"})]}),Object.keys(ne).sort().map(V=>Q.jsxs("div",{className:"max-w-5xl mx-auto mb-6 bg-white p-4 rounded-lg shadow-md",children:[Q.jsxs("h2",{className:"text-xl font-semibold mb-4 border-b pb-2 text-gray-800",children:[V," 수업"]}),Q.jsx("div",{className:"grid grid-cols-6 gap-4",children:ne[V].map(Y=>{const se=n[Y.name],ye=se&&(se.status==="onTime"||se.status==="tardy"),We=v[Y.name];return Q.jsxs("div",{className:`
        card
        ${ye?se.status==="tardy"?"tardy":"attended":""}
        ${We?"animated":""}
        ${ye?"cursor-not-allowed opacity-80":"cursor-pointer hover:shadow-lg"}
      `,onClick:()=>{ye?se.status==="tardy"&&Ce(Y.name):L(Y,V)},children:[Y.name===ge&&Q.jsx("div",{className:"text-3xl text-yellow-500 text-center mb-1",children:"👑"}),Q.jsxs("div",{className:"text-right text-xs font-semibold text-gray-700 leading-none mb-1",children:["총 ",xe(Y.points),"pt",Q.jsx("br",{}),Q.jsxs("span",{className:"text-green-600",children:["가용 ",Y.availablePoints??xe(Y.points),"pt"]})]}),Q.jsx("p",{className:"name m-0 leading-none mb-1",children:Y.name}),ye&&Q.jsxs("p",{className:"time-text m-0 leading-none mt-1",children:[se.status==="tardy"?"⚠️ 지각":"✅ 출석",Q.jsx("br",{}),se.time]})]},Y.id)})})]},V)),Q.jsxs("div",{className:"max-w-5xl mx-auto mt-8",children:[Q.jsx("h2",{className:"text-xl font-bold mb-4",children:"🎓 고등부 출석"}),Q.jsx("div",{className:"grid grid-cols-6 gap-4",children:Le.map(V=>{const Y=S[V.name],se=(Y==null?void 0:Y.status)==="출석";return Q.jsxs("div",{className:`card ${se?"attended":""} cursor-pointer hover:shadow-lg`,onClick:()=>Oe(V),children:[Q.jsx("p",{className:"name m-0 leading-none mb-1",children:V.name}),se&&Q.jsxs("p",{className:"time-text m-0 leading-none mt-1",children:["✅ 출석",Q.jsx("br",{}),Y.time]})]},V.id)})})]})]}),f==="ranking"&&Q.jsxs("div",{className:"max-w-5xl mx-auto bg-white p-6 rounded-lg shadow-md",children:[Q.jsx("h2",{className:"text-xl font-semibold mb-4",children:"🏆 포인트 랭킹 (실시간)"}),Q.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:A.map(V=>{const Y=Te(V);return Q.jsxs("div",{className:"bg-gray-50 p-4 border rounded shadow",children:[Q.jsxs("h4",{className:"font-bold text-center mb-2",children:[V," TOP 5"]}),Q.jsx("ol",{className:"text-sm space-y-1",children:[...Array(5)].map((se,ye)=>Q.jsxs("li",{children:[ye+1,"등"," ",Y[ye]?Q.jsxs(Q.Fragment,{children:[Q.jsx("b",{children:Y[ye].name})," (",Y[ye].value,"pt)"]}):Q.jsx("span",{className:"text-gray-400",children:"-"})]},ye))})]},V)})}),Q.jsx("h3",{className:"text-lg font-bold mt-8 mb-2",children:"💯 총합 TOP 5"}),Q.jsx("ol",{className:"text-sm space-y-1",children:[...Array(5)].map((V,Y)=>{const se=[...i].map(ye=>({name:ye.name,total:xe(ye.points)})).sort((ye,We)=>We.total-ye.total);return Q.jsxs("li",{children:[Y+1,"등"," ",se[Y]?Q.jsxs(Q.Fragment,{children:[Q.jsx("b",{children:se[Y].name})," (",se[Y].total,"pt)"]}):Q.jsx("span",{className:"text-gray-400",children:"-"})]},Y)})})]}),f==="shop"&&Q.jsx(j1,{})]})]})}ov.createRoot(document.getElementById("root")).render(Q.jsx(Zy.StrictMode,{children:Q.jsx(V1,{})}));
