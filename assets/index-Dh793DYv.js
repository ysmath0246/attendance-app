(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function wg(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var fp={exports:{}},Va={},dp={exports:{}},xe={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var pp;function Yy(){if(pp)return xe;pp=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),O=Symbol.iterator;function F(R){return R===null||typeof R!="object"?null:(R=O&&R[O]||R["@@iterator"],typeof R=="function"?R:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,Z={};function V(R,j,he){this.props=R,this.context=j,this.refs=Z,this.updater=he||q}V.prototype.isReactComponent={},V.prototype.setState=function(R,j){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,j,"setState")},V.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function Se(){}Se.prototype=V.prototype;function me(R,j,he){this.props=R,this.context=j,this.refs=Z,this.updater=he||q}var _e=me.prototype=new Se;_e.constructor=me,J(_e,V.prototype),_e.isPureReactComponent=!0;var ve=Array.isArray,We=Object.prototype.hasOwnProperty,Re={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function k(R,j,he){var Ce,Te={},Ne=null,Le=null;if(j!=null)for(Ce in j.ref!==void 0&&(Le=j.ref),j.key!==void 0&&(Ne=""+j.key),j)We.call(j,Ce)&&!I.hasOwnProperty(Ce)&&(Te[Ce]=j[Ce]);var B=arguments.length-2;if(B===1)Te.children=he;else if(1<B){for(var X=Array(B),ie=0;ie<B;ie++)X[ie]=arguments[ie+2];Te.children=X}if(R&&R.defaultProps)for(Ce in B=R.defaultProps,B)Te[Ce]===void 0&&(Te[Ce]=B[Ce]);return{$$typeof:s,type:R,key:Ne,ref:Le,props:Te,_owner:Re.current}}function T(R,j){return{$$typeof:s,type:R.type,key:j,ref:R.ref,props:R.props,_owner:R._owner}}function N(R){return typeof R=="object"&&R!==null&&R.$$typeof===s}function A(R){var j={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(he){return j[he]})}var D=/\/+/g;function S(R,j){return typeof R=="object"&&R!==null&&R.key!=null?A(""+R.key):j.toString(36)}function Ke(R,j,he,Ce,Te){var Ne=typeof R;(Ne==="undefined"||Ne==="boolean")&&(R=null);var Le=!1;if(R===null)Le=!0;else switch(Ne){case"string":case"number":Le=!0;break;case"object":switch(R.$$typeof){case s:case e:Le=!0}}if(Le)return Le=R,Te=Te(Le),R=Ce===""?"."+S(Le,0):Ce,ve(Te)?(he="",R!=null&&(he=R.replace(D,"$&/")+"/"),Ke(Te,j,he,"",function(ie){return ie})):Te!=null&&(N(Te)&&(Te=T(Te,he+(!Te.key||Le&&Le.key===Te.key?"":(""+Te.key).replace(D,"$&/")+"/")+R)),j.push(Te)),1;if(Le=0,Ce=Ce===""?".":Ce+":",ve(R))for(var B=0;B<R.length;B++){Ne=R[B];var X=Ce+S(Ne,B);Le+=Ke(Ne,j,he,X,Te)}else if(X=F(R),typeof X=="function")for(R=X.call(R),B=0;!(Ne=R.next()).done;)Ne=Ne.value,X=Ce+S(Ne,B++),Le+=Ke(Ne,j,he,X,Te);else if(Ne==="object")throw j=String(R),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return Le}function ft(R,j,he){if(R==null)return R;var Ce=[],Te=0;return Ke(R,Ce,"","",function(Ne){return j.call(he,Ne,Te++)}),Ce}function dt(R){if(R._status===-1){var j=R._result;j=j(),j.then(function(he){(R._status===0||R._status===-1)&&(R._status=1,R._result=he)},function(he){(R._status===0||R._status===-1)&&(R._status=2,R._result=he)}),R._status===-1&&(R._status=0,R._result=j)}if(R._status===1)return R._result.default;throw R._result}var Ve={current:null},te={transition:null},fe={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:te,ReactCurrentOwner:Re};function ne(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:ft,forEach:function(R,j,he){ft(R,function(){j.apply(this,arguments)},he)},count:function(R){var j=0;return ft(R,function(){j++}),j},toArray:function(R){return ft(R,function(j){return j})||[]},only:function(R){if(!N(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},xe.Component=V,xe.Fragment=n,xe.Profiler=o,xe.PureComponent=me,xe.StrictMode=i,xe.Suspense=v,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,xe.act=ne,xe.cloneElement=function(R,j,he){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var Ce=J({},R.props),Te=R.key,Ne=R.ref,Le=R._owner;if(j!=null){if(j.ref!==void 0&&(Ne=j.ref,Le=Re.current),j.key!==void 0&&(Te=""+j.key),R.type&&R.type.defaultProps)var B=R.type.defaultProps;for(X in j)We.call(j,X)&&!I.hasOwnProperty(X)&&(Ce[X]=j[X]===void 0&&B!==void 0?B[X]:j[X])}var X=arguments.length-2;if(X===1)Ce.children=he;else if(1<X){B=Array(X);for(var ie=0;ie<X;ie++)B[ie]=arguments[ie+2];Ce.children=B}return{$$typeof:s,type:R.type,key:Te,ref:Ne,props:Ce,_owner:Le}},xe.createContext=function(R){return R={$$typeof:f,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:c,_context:R},R.Consumer=R},xe.createElement=k,xe.createFactory=function(R){var j=k.bind(null,R);return j.type=R,j},xe.createRef=function(){return{current:null}},xe.forwardRef=function(R){return{$$typeof:m,render:R}},xe.isValidElement=N,xe.lazy=function(R){return{$$typeof:_,_payload:{_status:-1,_result:R},_init:dt}},xe.memo=function(R,j){return{$$typeof:b,type:R,compare:j===void 0?null:j}},xe.startTransition=function(R){var j=te.transition;te.transition={};try{R()}finally{te.transition=j}},xe.unstable_act=ne,xe.useCallback=function(R,j){return Ve.current.useCallback(R,j)},xe.useContext=function(R){return Ve.current.useContext(R)},xe.useDebugValue=function(){},xe.useDeferredValue=function(R){return Ve.current.useDeferredValue(R)},xe.useEffect=function(R,j){return Ve.current.useEffect(R,j)},xe.useId=function(){return Ve.current.useId()},xe.useImperativeHandle=function(R,j,he){return Ve.current.useImperativeHandle(R,j,he)},xe.useInsertionEffect=function(R,j){return Ve.current.useInsertionEffect(R,j)},xe.useLayoutEffect=function(R,j){return Ve.current.useLayoutEffect(R,j)},xe.useMemo=function(R,j){return Ve.current.useMemo(R,j)},xe.useReducer=function(R,j,he){return Ve.current.useReducer(R,j,he)},xe.useRef=function(R){return Ve.current.useRef(R)},xe.useState=function(R){return Ve.current.useState(R)},xe.useSyncExternalStore=function(R,j,he){return Ve.current.useSyncExternalStore(R,j,he)},xe.useTransition=function(){return Ve.current.useTransition()},xe.version="18.3.1",xe}var gp;function vh(){return gp||(gp=1,dp.exports=Yy()),dp.exports}/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var mp;function Jy(){if(mp)return Va;mp=1;var s=vh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(m,v,b){var _,O={},F=null,q=null;b!==void 0&&(F=""+b),v.key!==void 0&&(F=""+v.key),v.ref!==void 0&&(q=v.ref);for(_ in v)i.call(v,_)&&!c.hasOwnProperty(_)&&(O[_]=v[_]);if(m&&m.defaultProps)for(_ in v=m.defaultProps,v)O[_]===void 0&&(O[_]=v[_]);return{$$typeof:e,type:m,key:F,ref:q,props:O,_owner:o.current}}return Va.Fragment=n,Va.jsx=f,Va.jsxs=f,Va}var yp;function Xy(){return yp||(yp=1,fp.exports=Jy()),fp.exports}var W=Xy(),je=vh();const Zy=wg(je);var xl={},Vc={exports:{}},tn={},vp={exports:{}},wp={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var bp;function ev(){return bp||(bp=1,function(s){function e(te,fe){var ne=te.length;te.push(fe);e:for(;0<ne;){var R=ne-1>>>1,j=te[R];if(0<o(j,fe))te[R]=fe,te[ne]=j,ne=R;else break e}}function n(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var fe=te[0],ne=te.pop();if(ne!==fe){te[0]=ne;e:for(var R=0,j=te.length,he=j>>>1;R<he;){var Ce=2*(R+1)-1,Te=te[Ce],Ne=Ce+1,Le=te[Ne];if(0>o(Te,ne))Ne<j&&0>o(Le,Te)?(te[R]=Le,te[Ne]=ne,R=Ne):(te[R]=Te,te[Ce]=ne,R=Ce);else if(Ne<j&&0>o(Le,ne))te[R]=Le,te[Ne]=ne,R=Ne;else break e}}return fe}function o(te,fe){var ne=te.sortIndex-fe.sortIndex;return ne!==0?ne:te.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var v=[],b=[],_=1,O=null,F=3,q=!1,J=!1,Z=!1,V=typeof setTimeout=="function"?setTimeout:null,Se=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _e(te){for(var fe=n(b);fe!==null;){if(fe.callback===null)i(b);else if(fe.startTime<=te)i(b),fe.sortIndex=fe.expirationTime,e(v,fe);else break;fe=n(b)}}function ve(te){if(Z=!1,_e(te),!J)if(n(v)!==null)J=!0,dt(We);else{var fe=n(b);fe!==null&&Ve(ve,fe.startTime-te)}}function We(te,fe){J=!1,Z&&(Z=!1,Se(k),k=-1),q=!0;var ne=F;try{for(_e(fe),O=n(v);O!==null&&(!(O.expirationTime>fe)||te&&!A());){var R=O.callback;if(typeof R=="function"){O.callback=null,F=O.priorityLevel;var j=R(O.expirationTime<=fe);fe=s.unstable_now(),typeof j=="function"?O.callback=j:O===n(v)&&i(v),_e(fe)}else i(v);O=n(v)}if(O!==null)var he=!0;else{var Ce=n(b);Ce!==null&&Ve(ve,Ce.startTime-fe),he=!1}return he}finally{O=null,F=ne,q=!1}}var Re=!1,I=null,k=-1,T=5,N=-1;function A(){return!(s.unstable_now()-N<T)}function D(){if(I!==null){var te=s.unstable_now();N=te;var fe=!0;try{fe=I(!0,te)}finally{fe?S():(Re=!1,I=null)}}else Re=!1}var S;if(typeof me=="function")S=function(){me(D)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,ft=Ke.port2;Ke.port1.onmessage=D,S=function(){ft.postMessage(null)}}else S=function(){V(D,0)};function dt(te){I=te,Re||(Re=!0,S())}function Ve(te,fe){k=V(function(){te(s.unstable_now())},fe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(te){te.callback=null},s.unstable_continueExecution=function(){J||q||(J=!0,dt(We))},s.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<te?Math.floor(1e3/te):5},s.unstable_getCurrentPriorityLevel=function(){return F},s.unstable_getFirstCallbackNode=function(){return n(v)},s.unstable_next=function(te){switch(F){case 1:case 2:case 3:var fe=3;break;default:fe=F}var ne=F;F=fe;try{return te()}finally{F=ne}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(te,fe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ne=F;F=te;try{return fe()}finally{F=ne}},s.unstable_scheduleCallback=function(te,fe,ne){var R=s.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?R+ne:R):ne=R,te){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=ne+j,te={id:_++,callback:fe,priorityLevel:te,startTime:ne,expirationTime:j,sortIndex:-1},ne>R?(te.sortIndex=ne,e(b,te),n(v)===null&&te===n(b)&&(Z?(Se(k),k=-1):Z=!0,Ve(ve,ne-R))):(te.sortIndex=j,e(v,te),J||q||(J=!0,dt(We))),te},s.unstable_shouldYield=A,s.unstable_wrapCallback=function(te){var fe=F;return function(){var ne=F;F=fe;try{return te.apply(this,arguments)}finally{F=ne}}}}(wp)),wp}var Ep;function tv(){return Ep||(Ep=1,vp.exports=ev()),vp.exports}/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var kp;function nv(){if(kp)return tn;kp=1;var s=vh(),e=tv();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function c(t,r){f(t,r),f(t+"Capture",r)}function f(t,r){for(o[t]=r,t=0;t<r.length;t++)i.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,b=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},O={};function F(t){return v.call(O,t)?!0:v.call(_,t)?!1:b.test(t)?O[t]=!0:(_[t]=!0,!1)}function q(t,r,a,u){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function J(t,r,a,u){if(r===null||typeof r>"u"||q(t,r,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Z(t,r,a,u,h,p,y){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=y}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){V[t]=new Z(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];V[r]=new Z(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){V[t]=new Z(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){V[t]=new Z(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){V[t]=new Z(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){V[t]=new Z(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){V[t]=new Z(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){V[t]=new Z(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){V[t]=new Z(t,5,!1,t.toLowerCase(),null,!1,!1)});var Se=/[\-:]([a-z])/g;function me(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Se,me);V[r]=new Z(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Se,me);V[r]=new Z(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Se,me);V[r]=new Z(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){V[t]=new Z(t,1,!1,t.toLowerCase(),null,!1,!1)}),V.xlinkHref=new Z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){V[t]=new Z(t,1,!1,t.toLowerCase(),null,!0,!0)});function _e(t,r,a,u){var h=V.hasOwnProperty(r)?V[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(J(r,a,h,u)&&(a=null),u||h===null?F(r)&&(a===null?t.removeAttribute(r):t.setAttribute(r,""+a)):h.mustUseProperty?t[h.propertyName]=a===null?h.type===3?!1:"":a:(r=h.attributeName,u=h.attributeNamespace,a===null?t.removeAttribute(r):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,u?t.setAttributeNS(u,r,a):t.setAttribute(r,a))))}var ve=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,We=Symbol.for("react.element"),Re=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),A=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),Ke=Symbol.for("react.suspense_list"),ft=Symbol.for("react.memo"),dt=Symbol.for("react.lazy"),Ve=Symbol.for("react.offscreen"),te=Symbol.iterator;function fe(t){return t===null||typeof t!="object"?null:(t=te&&t[te]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,R;function j(t){if(R===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);R=r&&r[1]||""}return`
`+R+t}var he=!1;function Ce(t,r){if(!t||he)return"";he=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var u=U}Reflect.construct(t,[],r)}else{try{r.call()}catch(U){u=U}t.call(r.prototype)}else{try{throw Error()}catch(U){u=U}t()}}catch(U){if(U&&u&&typeof U.stack=="string"){for(var h=U.stack.split(`
`),p=u.stack.split(`
`),y=h.length-1,E=p.length-1;1<=y&&0<=E&&h[y]!==p[E];)E--;for(;1<=y&&0<=E;y--,E--)if(h[y]!==p[E]){if(y!==1||E!==1)do if(y--,E--,0>E||h[y]!==p[E]){var C=`
`+h[y].replace(" at new "," at ");return t.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",t.displayName)),C}while(1<=y&&0<=E);break}}}finally{he=!1,Error.prepareStackTrace=a}return(t=t?t.displayName||t.name:"")?j(t):""}function Te(t){switch(t.tag){case 5:return j(t.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return t=Ce(t.type,!1),t;case 11:return t=Ce(t.type.render,!1),t;case 1:return t=Ce(t.type,!0),t;default:return""}}function Ne(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case I:return"Fragment";case Re:return"Portal";case T:return"Profiler";case k:return"StrictMode";case S:return"Suspense";case Ke:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case A:return(t.displayName||"Context")+".Consumer";case N:return(t._context.displayName||"Context")+".Provider";case D:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ft:return r=t.displayName||null,r!==null?r:Ne(t.type)||"Memo";case dt:r=t._payload,t=t._init;try{return Ne(t(r))}catch{}}return null}function Le(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(r);case 8:return r===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function B(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function X(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ie(t){var r=X(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,p=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(y){u=""+y,p.call(this,y)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function ye(t){t._valueTracker||(t._valueTracker=ie(t))}function Qe(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return t&&(u=X(t)?t.checked?"true":"false":t.value),t=u,t!==a?(r.setValue(t),!0):!1}function Me(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bt(t,r){var a=r.checked;return ne({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??t._wrapperState.initialChecked})}function Nr(t,r){var a=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;a=B(r.value!=null?r.value:a),t._wrapperState={initialChecked:u,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Ir(t,r){r=r.checked,r!=null&&_e(t,"checked",r,!1)}function Nn(t,r){Ir(t,r);var a=B(r.value),u=r.type;if(a!=null)u==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+a):t.value!==""+a&&(t.value=""+a);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Kn(t,r.type,a):r.hasOwnProperty("defaultValue")&&Kn(t,r.type,B(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function In(t,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,a||r===t.value||(t.value=r),t.defaultValue=r}a=t.name,a!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,a!==""&&(t.name=a)}function Kn(t,r,a){(r!=="number"||Me(t.ownerDocument)!==t)&&(a==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+a&&(t.defaultValue=""+a))}var yn=Array.isArray;function an(t,r,a,u){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&u&&(t[a].defaultSelected=!0)}else{for(a=""+B(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function st(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return ne({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ht(t,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(n(92));if(yn(a)){if(1<a.length)throw Error(n(93));a=a[0]}r=a}r==null&&(r=""),a=r}t._wrapperState={initialValue:B(a)}}function Ks(t,r){var a=B(r.value),u=B(r.defaultValue);a!=null&&(a=""+a,a!==t.value&&(t.value=a),r.defaultValue==null&&t.defaultValue!==a&&(t.defaultValue=a)),u!=null&&(t.defaultValue=""+u)}function Wi(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function pt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?pt(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lr,Yi=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,a,u,h)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(lr=lr||document.createElement("div"),lr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=lr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Ar(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var us={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cs=["Webkit","ms","Moz","O"];Object.keys(us).forEach(function(t){cs.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),us[r]=us[t]})});function Ji(t,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||us.hasOwnProperty(t)&&us[t]?(""+r).trim():r+"px"}function Xi(t,r){t=t.style;for(var a in r)if(r.hasOwnProperty(a)){var u=a.indexOf("--")===0,h=Ji(a,r[a],u);a==="float"&&(a="cssFloat"),u?t.setProperty(a,h):t[a]=h}}var Zi=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ea(t,r){if(r){if(Zi[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function ta(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hs=null;function Qs(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hs=null,vn=null,Qn=null;function Gs(t){if(t=Ta(t)){if(typeof Hs!="function")throw Error(n(280));var r=t.stateNode;r&&(r=Bo(r),Hs(t.stateNode,t.type,r))}}function Hn(t){vn?Qn?Qn.push(t):Qn=[t]:vn=t}function na(){if(vn){var t=vn,r=Qn;if(Qn=vn=null,Gs(t),r)for(t=0;t<r.length;t++)Gs(r[t])}}function fs(t,r){return t(r)}function ra(){}var ur=!1;function sa(t,r,a){if(ur)return t(r,a);ur=!0;try{return fs(t,r,a)}finally{ur=!1,(vn!==null||Qn!==null)&&(ra(),na())}}function at(t,r){var a=t.stateNode;if(a===null)return null;var u=Bo(a);if(u===null)return null;a=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(n(231,r,typeof a));return a}var Ws=!1;if(m)try{var An={};Object.defineProperty(An,"passive",{get:function(){Ws=!0}}),window.addEventListener("test",An,An),window.removeEventListener("test",An,An)}catch{Ws=!1}function ds(t,r,a,u,h,p,y,E,C){var U=Array.prototype.slice.call(arguments,3);try{r.apply(a,U)}catch(Q){this.onError(Q)}}var ps=!1,Ys=null,Rn=!1,ia=null,gu={onError:function(t){ps=!0,Ys=t}};function Js(t,r,a,u,h,p,y,E,C){ps=!1,Ys=null,ds.apply(gu,arguments)}function fo(t,r,a,u,h,p,y,E,C){if(Js.apply(this,arguments),ps){if(ps){var U=Ys;ps=!1,Ys=null}else throw Error(n(198));Rn||(Rn=!0,ia=U)}}function Dn(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function gs(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Ln(t){if(Dn(t)!==t)throw Error(n(188))}function po(t){var r=t.alternate;if(!r){if(r=Dn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var a=t,u=r;;){var h=a.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){a=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===a)return Ln(h),t;if(p===u)return Ln(h),r;p=p.sibling}throw Error(n(188))}if(a.return!==u.return)a=h,u=p;else{for(var y=!1,E=h.child;E;){if(E===a){y=!0,a=h,u=p;break}if(E===u){y=!0,u=h,a=p;break}E=E.sibling}if(!y){for(E=p.child;E;){if(E===a){y=!0,a=p,u=h;break}if(E===u){y=!0,u=p,a=h;break}E=E.sibling}if(!y)throw Error(n(189))}}if(a.alternate!==u)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?t:r}function aa(t){return t=po(t),t!==null?Xs(t):null}function Xs(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Xs(t);if(r!==null)return r;t=t.sibling}return null}var Zs=e.unstable_scheduleCallback,oa=e.unstable_cancelCallback,go=e.unstable_shouldYield,mu=e.unstable_requestPaint,He=e.unstable_now,mo=e.unstable_getCurrentPriorityLevel,ms=e.unstable_ImmediatePriority,Rr=e.unstable_UserBlockingPriority,wn=e.unstable_NormalPriority,la=e.unstable_LowPriority,yo=e.unstable_IdlePriority,ys=null,on=null;function vo(t){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(ys,t,void 0,(t.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:bo,ua=Math.log,wo=Math.LN2;function bo(t){return t>>>=0,t===0?32:31-(ua(t)/wo|0)|0}var ei=64,ti=4194304;function Dr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vs(t,r){var a=t.pendingLanes;if(a===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,y=a&268435455;if(y!==0){var E=y&~h;E!==0?u=Dr(E):(p&=y,p!==0&&(u=Dr(p)))}else y=a&~h,y!==0?u=Dr(y):p!==0&&(u=Dr(p));if(u===0)return 0;if(r!==0&&r!==u&&(r&h)===0&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((u&4)!==0&&(u|=a&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)a=31-qt(r),h=1<<a,u|=t[a],r&=~h;return u}function yu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cr(t,r){for(var a=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var y=31-qt(p),E=1<<y,C=h[y];C===-1?((E&a)===0||(E&u)!==0)&&(h[y]=yu(E,r)):C<=r&&(t.expiredLanes|=E),p&=~E}}function ln(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ws(){var t=ei;return ei<<=1,(ei&4194240)===0&&(ei=64),t}function Lr(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Or(t,r,a){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-qt(r),t[r]=a}function qe(t,r){var a=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<a;){var h=31-qt(a),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,a&=~p}}function Pr(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var u=31-qt(a),h=1<<u;h&r|t[u]&r&&(t[u]|=r),a&=~h}}var Ae=0;function Mr(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Eo,ni,ko,So,_o,ca=!1,Gn=[],xt=null,On=null,Pn=null,Ur=new Map,bn=new Map,Wn=[],vu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function To(t,r){switch(t){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":Ur.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":bn.delete(r.pointerId)}}function Gt(t,r,a,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Ta(r),r!==null&&ni(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function wu(t,r,a,u,h){switch(r){case"focusin":return xt=Gt(xt,t,r,a,u,h),!0;case"dragenter":return On=Gt(On,t,r,a,u,h),!0;case"mouseover":return Pn=Gt(Pn,t,r,a,u,h),!0;case"pointerover":var p=h.pointerId;return Ur.set(p,Gt(Ur.get(p)||null,t,r,a,u,h)),!0;case"gotpointercapture":return p=h.pointerId,bn.set(p,Gt(bn.get(p)||null,t,r,a,u,h)),!0}return!1}function Co(t){var r=_s(t.target);if(r!==null){var a=Dn(r);if(a!==null){if(r=a.tag,r===13){if(r=gs(a),r!==null){t.blockedOn=r,_o(t.priority,function(){ko(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=ri(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(a===null){a=t.nativeEvent;var u=new a.constructor(a.type,a);hs=u,a.target.dispatchEvent(u),hs=null}else return r=Ta(a),r!==null&&ni(r),t.blockedOn=a,!1;r.shift()}return!0}function bs(t,r,a){hr(t)&&a.delete(r)}function xo(){ca=!1,xt!==null&&hr(xt)&&(xt=null),On!==null&&hr(On)&&(On=null),Pn!==null&&hr(Pn)&&(Pn=null),Ur.forEach(bs),bn.forEach(bs)}function Mn(t,r){t.blockedOn===r&&(t.blockedOn=null,ca||(ca=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xo)))}function Un(t){function r(h){return Mn(h,t)}if(0<Gn.length){Mn(Gn[0],t);for(var a=1;a<Gn.length;a++){var u=Gn[a];u.blockedOn===t&&(u.blockedOn=null)}}for(xt!==null&&Mn(xt,t),On!==null&&Mn(On,t),Pn!==null&&Mn(Pn,t),Ur.forEach(r),bn.forEach(r),a=0;a<Wn.length;a++)u=Wn[a],u.blockedOn===t&&(u.blockedOn=null);for(;0<Wn.length&&(a=Wn[0],a.blockedOn===null);)Co(a),a.blockedOn===null&&Wn.shift()}var fr=ve.ReactCurrentBatchConfig,Fr=!0;function Xe(t,r,a,u){var h=Ae,p=fr.transition;fr.transition=null;try{Ae=1,ha(t,r,a,u)}finally{Ae=h,fr.transition=p}}function bu(t,r,a,u){var h=Ae,p=fr.transition;fr.transition=null;try{Ae=4,ha(t,r,a,u)}finally{Ae=h,fr.transition=p}}function ha(t,r,a,u){if(Fr){var h=ri(t,r,a,u);if(h===null)Ru(t,r,u,Es,a),To(t,u);else if(wu(h,t,r,a,u))u.stopPropagation();else if(To(t,u),r&4&&-1<vu.indexOf(t)){for(;h!==null;){var p=Ta(h);if(p!==null&&Eo(p),p=ri(t,r,a,u),p===null&&Ru(t,r,u,Es,a),p===h)break;h=p}h!==null&&u.stopPropagation()}else Ru(t,r,u,null,a)}}var Es=null;function ri(t,r,a,u){if(Es=null,t=Qs(u),t=_s(t),t!==null)if(r=Dn(t),r===null)t=null;else if(a=r.tag,a===13){if(t=gs(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Es=t,null}function fa(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mo()){case ms:return 1;case Rr:return 4;case wn:case la:return 16;case yo:return 536870912;default:return 16}default:return 16}}var un=null,si=null,Wt=null;function da(){if(Wt)return Wt;var t,r=si,a=r.length,u,h="value"in un?un.value:un.textContent,p=h.length;for(t=0;t<a&&r[t]===h[t];t++);var y=a-t;for(u=1;u<=y&&r[a-u]===h[p-u];u++);return Wt=h.slice(t,1<u?1-u:void 0)}function ii(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Yn(){return!0}function pa(){return!1}function Nt(t){function r(a,u,h,p,y){this._reactName=a,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Yn:pa,this.isPropagationStopped=pa,this}return ne(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){},isPersistent:Yn}),r}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ai=Nt(Fn),Jn=ne({},Fn,{view:0,detail:0}),Eu=Nt(Jn),oi,dr,zr,ks=ne({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zr&&(zr&&t.type==="mousemove"?(oi=t.screenX-zr.screenX,dr=t.screenY-zr.screenY):dr=oi=0,zr=t),oi)},movementY:function(t){return"movementY"in t?t.movementY:dr}}),li=Nt(ks),ga=ne({},ks,{dataTransfer:0}),No=Nt(ga),ui=ne({},Jn,{relatedTarget:0}),ci=Nt(ui),Io=ne({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),pr=Nt(Io),Ao=ne({},Fn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ro=Nt(Ao),Do=ne({},Fn,{data:0}),ma=Nt(Do),hi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$t={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oo(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Lo[t])?!!r[t]:!1}function Xn(){return Oo}var l=ne({},Jn,{key:function(t){if(t.key){var r=hi[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ii(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$t[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xn,charCode:function(t){return t.type==="keypress"?ii(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ii(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=Nt(l),g=ne({},ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=Nt(g),L=ne({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xn}),z=Nt(L),ee=ne({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$e=Nt(ee),mt=ne({},ks,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ze=Nt(mt),Et=[9,13,27,32],kt=m&&"CompositionEvent"in window,En=null;m&&"documentMode"in document&&(En=document.documentMode);var cn=m&&"TextEvent"in window&&!En,Ss=m&&(!kt||En&&8<En&&11>=En),fi=" ",sf=!1;function af(t,r){switch(t){case"keyup":return Et.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function of(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var di=!1;function Hm(t,r){switch(t){case"compositionend":return of(r);case"keypress":return r.which!==32?null:(sf=!0,fi);case"textInput":return t=r.data,t===fi&&sf?null:t;default:return null}}function Gm(t,r){if(di)return t==="compositionend"||!kt&&af(t,r)?(t=da(),Wt=si=un=null,di=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ss&&r.locale!=="ko"?null:r.data;default:return null}}var Wm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Wm[t.type]:r==="textarea"}function uf(t,r,a,u){Hn(u),r=zo(r,"onChange"),0<r.length&&(a=new ai("onChange","change",null,a,u),t.push({event:a,listeners:r}))}var ya=null,va=null;function Ym(t){xf(t,0)}function Po(t){var r=vi(t);if(Qe(r))return t}function Jm(t,r){if(t==="change")return r}var cf=!1;if(m){var ku;if(m){var Su="oninput"in document;if(!Su){var hf=document.createElement("div");hf.setAttribute("oninput","return;"),Su=typeof hf.oninput=="function"}ku=Su}else ku=!1;cf=ku&&(!document.documentMode||9<document.documentMode)}function ff(){ya&&(ya.detachEvent("onpropertychange",df),va=ya=null)}function df(t){if(t.propertyName==="value"&&Po(va)){var r=[];uf(r,va,t,Qs(t)),sa(Ym,r)}}function Xm(t,r,a){t==="focusin"?(ff(),ya=r,va=a,ya.attachEvent("onpropertychange",df)):t==="focusout"&&ff()}function Zm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Po(va)}function ey(t,r){if(t==="click")return Po(r)}function ty(t,r){if(t==="input"||t==="change")return Po(r)}function ny(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var zn=typeof Object.is=="function"?Object.is:ny;function wa(t,r){if(zn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var h=a[u];if(!v.call(r,h)||!zn(t[h],r[h]))return!1}return!0}function pf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gf(t,r){var a=pf(t);t=0;for(var u;a;){if(a.nodeType===3){if(u=t+a.textContent.length,t<=r&&u>=r)return{node:a,offset:r-t};t=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=pf(a)}}function mf(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?mf(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function yf(){for(var t=window,r=Me();r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Me(t.document)}return r}function _u(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function ry(t){var r=yf(),a=t.focusedElem,u=t.selectionRange;if(r!==a&&a&&a.ownerDocument&&mf(a.ownerDocument.documentElement,a)){if(u!==null&&_u(a)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(t,a.value.length);else if(t=(r=a.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=a.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=gf(a,p);var y=gf(a,u);h&&y&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==y.node||t.focusOffset!==y.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(y.node,y.offset)):(r.setEnd(y.node,y.offset),t.addRange(r)))}}for(r=[],t=a;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)t=r[a],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sy=m&&"documentMode"in document&&11>=document.documentMode,pi=null,Tu=null,ba=null,Cu=!1;function vf(t,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Cu||pi==null||pi!==Me(u)||(u=pi,"selectionStart"in u&&_u(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ba&&wa(ba,u)||(ba=u,u=zo(Tu,"onSelect"),0<u.length&&(r=new ai("onSelect","select",null,r,a),t.push({event:r,listeners:u}),r.target=pi)))}function Mo(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var gi={animationend:Mo("Animation","AnimationEnd"),animationiteration:Mo("Animation","AnimationIteration"),animationstart:Mo("Animation","AnimationStart"),transitionend:Mo("Transition","TransitionEnd")},xu={},wf={};m&&(wf=document.createElement("div").style,"AnimationEvent"in window||(delete gi.animationend.animation,delete gi.animationiteration.animation,delete gi.animationstart.animation),"TransitionEvent"in window||delete gi.transitionend.transition);function Uo(t){if(xu[t])return xu[t];if(!gi[t])return t;var r=gi[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in wf)return xu[t]=r[a];return t}var bf=Uo("animationend"),Ef=Uo("animationiteration"),kf=Uo("animationstart"),Sf=Uo("transitionend"),_f=new Map,Tf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vr(t,r){_f.set(t,r),c(r,[t])}for(var Nu=0;Nu<Tf.length;Nu++){var Iu=Tf[Nu],iy=Iu.toLowerCase(),ay=Iu[0].toUpperCase()+Iu.slice(1);Vr(iy,"on"+ay)}Vr(bf,"onAnimationEnd"),Vr(Ef,"onAnimationIteration"),Vr(kf,"onAnimationStart"),Vr("dblclick","onDoubleClick"),Vr("focusin","onFocus"),Vr("focusout","onBlur"),Vr(Sf,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ea));function Cf(t,r,a){var u=t.type||"unknown-event";t.currentTarget=a,fo(u,r,void 0,t),t.currentTarget=null}function xf(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var u=t[a],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var y=u.length-1;0<=y;y--){var E=u[y],C=E.instance,U=E.currentTarget;if(E=E.listener,C!==p&&h.isPropagationStopped())break e;Cf(h,E,U),p=C}else for(y=0;y<u.length;y++){if(E=u[y],C=E.instance,U=E.currentTarget,E=E.listener,C!==p&&h.isPropagationStopped())break e;Cf(h,E,U),p=C}}}if(Rn)throw t=ia,Rn=!1,ia=null,t}function Ye(t,r){var a=r[Uu];a===void 0&&(a=r[Uu]=new Set);var u=t+"__bubble";a.has(u)||(Nf(r,t,2,!1),a.add(u))}function Au(t,r,a){var u=0;r&&(u|=4),Nf(a,t,u,r)}var Fo="_reactListening"+Math.random().toString(36).slice(2);function ka(t){if(!t[Fo]){t[Fo]=!0,i.forEach(function(a){a!=="selectionchange"&&(oy.has(a)||Au(a,!1,t),Au(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Fo]||(r[Fo]=!0,Au("selectionchange",!1,r))}}function Nf(t,r,a,u){switch(fa(r)){case 1:var h=Xe;break;case 4:h=bu;break;default:h=ha}a=h.bind(null,r,a,t),h=void 0,!Ws||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function Ru(t,r,a,u,h){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var E=u.stateNode.containerInfo;if(E===h||E.nodeType===8&&E.parentNode===h)break;if(y===4)for(y=u.return;y!==null;){var C=y.tag;if((C===3||C===4)&&(C=y.stateNode.containerInfo,C===h||C.nodeType===8&&C.parentNode===h))return;y=y.return}for(;E!==null;){if(y=_s(E),y===null)return;if(C=y.tag,C===5||C===6){u=p=y;continue e}E=E.parentNode}}u=u.return}sa(function(){var U=p,Q=Qs(a),G=[];e:{var $=_f.get(t);if($!==void 0){var re=ai,ae=t;switch(t){case"keypress":if(ii(a)===0)break e;case"keydown":case"keyup":re=d;break;case"focusin":ae="focus",re=ci;break;case"focusout":ae="blur",re=ci;break;case"beforeblur":case"afterblur":re=ci;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=li;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=No;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=z;break;case bf:case Ef:case kf:re=pr;break;case Sf:re=$e;break;case"scroll":re=Eu;break;case"wheel":re=ze;break;case"copy":case"cut":case"paste":re=Ro;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=w}var oe=(r&4)!==0,ot=!oe&&t==="scroll",P=oe?$!==null?$+"Capture":null:$;oe=[];for(var x=U,M;x!==null;){M=x;var Y=M.stateNode;if(M.tag===5&&Y!==null&&(M=Y,P!==null&&(Y=at(x,P),Y!=null&&oe.push(Sa(x,Y,M)))),ot)break;x=x.return}0<oe.length&&($=new re($,ae,null,a,Q),G.push({event:$,listeners:oe}))}}if((r&7)===0){e:{if($=t==="mouseover"||t==="pointerover",re=t==="mouseout"||t==="pointerout",$&&a!==hs&&(ae=a.relatedTarget||a.fromElement)&&(_s(ae)||ae[gr]))break e;if((re||$)&&($=Q.window===Q?Q:($=Q.ownerDocument)?$.defaultView||$.parentWindow:window,re?(ae=a.relatedTarget||a.toElement,re=U,ae=ae?_s(ae):null,ae!==null&&(ot=Dn(ae),ae!==ot||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(re=null,ae=U),re!==ae)){if(oe=li,Y="onMouseLeave",P="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(oe=w,Y="onPointerLeave",P="onPointerEnter",x="pointer"),ot=re==null?$:vi(re),M=ae==null?$:vi(ae),$=new oe(Y,x+"leave",re,a,Q),$.target=ot,$.relatedTarget=M,Y=null,_s(Q)===U&&(oe=new oe(P,x+"enter",ae,a,Q),oe.target=M,oe.relatedTarget=ot,Y=oe),ot=Y,re&&ae)t:{for(oe=re,P=ae,x=0,M=oe;M;M=mi(M))x++;for(M=0,Y=P;Y;Y=mi(Y))M++;for(;0<x-M;)oe=mi(oe),x--;for(;0<M-x;)P=mi(P),M--;for(;x--;){if(oe===P||P!==null&&oe===P.alternate)break t;oe=mi(oe),P=mi(P)}oe=null}else oe=null;re!==null&&If(G,$,re,oe,!1),ae!==null&&ot!==null&&If(G,ot,ae,oe,!0)}}e:{if($=U?vi(U):window,re=$.nodeName&&$.nodeName.toLowerCase(),re==="select"||re==="input"&&$.type==="file")var ue=Jm;else if(lf($))if(cf)ue=ty;else{ue=Zm;var de=Xm}else(re=$.nodeName)&&re.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(ue=ey);if(ue&&(ue=ue(t,U))){uf(G,ue,a,Q);break e}de&&de(t,$,U),t==="focusout"&&(de=$._wrapperState)&&de.controlled&&$.type==="number"&&Kn($,"number",$.value)}switch(de=U?vi(U):window,t){case"focusin":(lf(de)||de.contentEditable==="true")&&(pi=de,Tu=U,ba=null);break;case"focusout":ba=Tu=pi=null;break;case"mousedown":Cu=!0;break;case"contextmenu":case"mouseup":case"dragend":Cu=!1,vf(G,a,Q);break;case"selectionchange":if(sy)break;case"keydown":case"keyup":vf(G,a,Q)}var pe;if(kt)e:{switch(t){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else di?af(t,a)&&(we="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(Ss&&a.locale!=="ko"&&(di||we!=="onCompositionStart"?we==="onCompositionEnd"&&di&&(pe=da()):(un=Q,si="value"in un?un.value:un.textContent,di=!0)),de=zo(U,we),0<de.length&&(we=new ma(we,t,null,a,Q),G.push({event:we,listeners:de}),pe?we.data=pe:(pe=of(a),pe!==null&&(we.data=pe)))),(pe=cn?Hm(t,a):Gm(t,a))&&(U=zo(U,"onBeforeInput"),0<U.length&&(Q=new ma("onBeforeInput","beforeinput",null,a,Q),G.push({event:Q,listeners:U}),Q.data=pe))}xf(G,r)})}function Sa(t,r,a){return{instance:t,listener:r,currentTarget:a}}function zo(t,r){for(var a=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=at(t,a),p!=null&&u.unshift(Sa(t,p,h)),p=at(t,r),p!=null&&u.push(Sa(t,p,h))),t=t.return}return u}function mi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function If(t,r,a,u,h){for(var p=r._reactName,y=[];a!==null&&a!==u;){var E=a,C=E.alternate,U=E.stateNode;if(C!==null&&C===u)break;E.tag===5&&U!==null&&(E=U,h?(C=at(a,p),C!=null&&y.unshift(Sa(a,C,E))):h||(C=at(a,p),C!=null&&y.push(Sa(a,C,E)))),a=a.return}y.length!==0&&t.push({event:r,listeners:y})}var ly=/\r\n?/g,uy=/\u0000|\uFFFD/g;function Af(t){return(typeof t=="string"?t:""+t).replace(ly,`
`).replace(uy,"")}function Vo(t,r,a){if(r=Af(r),Af(t)!==r&&a)throw Error(n(425))}function jo(){}var Du=null,Lu=null;function Ou(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Pu=typeof setTimeout=="function"?setTimeout:void 0,cy=typeof clearTimeout=="function"?clearTimeout:void 0,Rf=typeof Promise=="function"?Promise:void 0,hy=typeof queueMicrotask=="function"?queueMicrotask:typeof Rf<"u"?function(t){return Rf.resolve(null).then(t).catch(fy)}:Pu;function fy(t){setTimeout(function(){throw t})}function Mu(t,r){var a=r,u=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(u===0){t.removeChild(h),Un(r);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=h}while(a);Un(r)}function jr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Df(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}var yi=Math.random().toString(36).slice(2),Zn="__reactFiber$"+yi,_a="__reactProps$"+yi,gr="__reactContainer$"+yi,Uu="__reactEvents$"+yi,dy="__reactListeners$"+yi,py="__reactHandles$"+yi;function _s(t){var r=t[Zn];if(r)return r;for(var a=t.parentNode;a;){if(r=a[gr]||a[Zn]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=Df(t);t!==null;){if(a=t[Zn])return a;t=Df(t)}return r}t=a,a=t.parentNode}return null}function Ta(t){return t=t[Zn]||t[gr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Bo(t){return t[_a]||null}var Fu=[],wi=-1;function Br(t){return{current:t}}function Je(t){0>wi||(t.current=Fu[wi],Fu[wi]=null,wi--)}function Ge(t,r){wi++,Fu[wi]=t.current,t.current=r}var qr={},Pt=Br(qr),Yt=Br(!1),Ts=qr;function bi(t,r){var a=t.type.contextTypes;if(!a)return qr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in a)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function Jt(t){return t=t.childContextTypes,t!=null}function qo(){Je(Yt),Je(Pt)}function Lf(t,r,a){if(Pt.current!==qr)throw Error(n(168));Ge(Pt,r),Ge(Yt,a)}function Of(t,r,a){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,Le(t)||"Unknown",h));return ne({},a,u)}function $o(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qr,Ts=Pt.current,Ge(Pt,t),Ge(Yt,Yt.current),!0}function Pf(t,r,a){var u=t.stateNode;if(!u)throw Error(n(169));a?(t=Of(t,r,Ts),u.__reactInternalMemoizedMergedChildContext=t,Je(Yt),Je(Pt),Ge(Pt,t)):Je(Yt),Ge(Yt,a)}var mr=null,Ko=!1,zu=!1;function Mf(t){mr===null?mr=[t]:mr.push(t)}function gy(t){Ko=!0,Mf(t)}function $r(){if(!zu&&mr!==null){zu=!0;var t=0,r=Ae;try{var a=mr;for(Ae=1;t<a.length;t++){var u=a[t];do u=u(!0);while(u!==null)}mr=null,Ko=!1}catch(h){throw mr!==null&&(mr=mr.slice(t+1)),Zs(ms,$r),h}finally{Ae=r,zu=!1}}return null}var Ei=[],ki=0,Qo=null,Ho=0,kn=[],Sn=0,Cs=null,yr=1,vr="";function xs(t,r){Ei[ki++]=Ho,Ei[ki++]=Qo,Qo=t,Ho=r}function Uf(t,r,a){kn[Sn++]=yr,kn[Sn++]=vr,kn[Sn++]=Cs,Cs=t;var u=yr;t=vr;var h=32-qt(u)-1;u&=~(1<<h),a+=1;var p=32-qt(r)+h;if(30<p){var y=h-h%5;p=(u&(1<<y)-1).toString(32),u>>=y,h-=y,yr=1<<32-qt(r)+h|a<<h|u,vr=p+t}else yr=1<<p|a<<h|u,vr=t}function Vu(t){t.return!==null&&(xs(t,1),Uf(t,1,0))}function ju(t){for(;t===Qo;)Qo=Ei[--ki],Ei[ki]=null,Ho=Ei[--ki],Ei[ki]=null;for(;t===Cs;)Cs=kn[--Sn],kn[Sn]=null,vr=kn[--Sn],kn[Sn]=null,yr=kn[--Sn],kn[Sn]=null}var hn=null,fn=null,Ze=!1,Vn=null;function Ff(t,r){var a=xn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=t,r=t.deletions,r===null?(t.deletions=[a],t.flags|=16):r.push(a)}function zf(t,r){switch(t.tag){case 5:var a=t.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,hn=t,fn=jr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,hn=t,fn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Cs!==null?{id:yr,overflow:vr}:null,t.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=xn(18,null,null,0),a.stateNode=r,a.return=t,t.child=a,hn=t,fn=null,!0):!1;default:return!1}}function Bu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qu(t){if(Ze){var r=fn;if(r){var a=r;if(!zf(t,r)){if(Bu(t))throw Error(n(418));r=jr(a.nextSibling);var u=hn;r&&zf(t,r)?Ff(u,a):(t.flags=t.flags&-4097|2,Ze=!1,hn=t)}}else{if(Bu(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ze=!1,hn=t}}}function Vf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hn=t}function Go(t){if(t!==hn)return!1;if(!Ze)return Vf(t),Ze=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Ou(t.type,t.memoizedProps)),r&&(r=fn)){if(Bu(t))throw jf(),Error(n(418));for(;r;)Ff(t,r),r=jr(r.nextSibling)}if(Vf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"){if(r===0){fn=jr(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}t=t.nextSibling}fn=null}}else fn=hn?jr(t.stateNode.nextSibling):null;return!0}function jf(){for(var t=fn;t;)t=jr(t.nextSibling)}function Si(){fn=hn=null,Ze=!1}function $u(t){Vn===null?Vn=[t]:Vn.push(t)}var my=ve.ReactCurrentBatchConfig;function Ca(t,r,a){if(t=a.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(n(309));var u=a.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(y){var E=h.refs;y===null?delete E[p]:E[p]=y},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!a._owner)throw Error(n(290,t))}return t}function Wo(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Bf(t){var r=t._init;return r(t._payload)}function qf(t){function r(P,x){if(t){var M=P.deletions;M===null?(P.deletions=[x],P.flags|=16):M.push(x)}}function a(P,x){if(!t)return null;for(;x!==null;)r(P,x),x=x.sibling;return null}function u(P,x){for(P=new Map;x!==null;)x.key!==null?P.set(x.key,x):P.set(x.index,x),x=x.sibling;return P}function h(P,x){return P=Xr(P,x),P.index=0,P.sibling=null,P}function p(P,x,M){return P.index=M,t?(M=P.alternate,M!==null?(M=M.index,M<x?(P.flags|=2,x):M):(P.flags|=2,x)):(P.flags|=1048576,x)}function y(P){return t&&P.alternate===null&&(P.flags|=2),P}function E(P,x,M,Y){return x===null||x.tag!==6?(x=Oc(M,P.mode,Y),x.return=P,x):(x=h(x,M),x.return=P,x)}function C(P,x,M,Y){var ue=M.type;return ue===I?Q(P,x,M.props.children,Y,M.key):x!==null&&(x.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===dt&&Bf(ue)===x.type)?(Y=h(x,M.props),Y.ref=Ca(P,x,M),Y.return=P,Y):(Y=wl(M.type,M.key,M.props,null,P.mode,Y),Y.ref=Ca(P,x,M),Y.return=P,Y)}function U(P,x,M,Y){return x===null||x.tag!==4||x.stateNode.containerInfo!==M.containerInfo||x.stateNode.implementation!==M.implementation?(x=Pc(M,P.mode,Y),x.return=P,x):(x=h(x,M.children||[]),x.return=P,x)}function Q(P,x,M,Y,ue){return x===null||x.tag!==7?(x=Ps(M,P.mode,Y,ue),x.return=P,x):(x=h(x,M),x.return=P,x)}function G(P,x,M){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Oc(""+x,P.mode,M),x.return=P,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case We:return M=wl(x.type,x.key,x.props,null,P.mode,M),M.ref=Ca(P,null,x),M.return=P,M;case Re:return x=Pc(x,P.mode,M),x.return=P,x;case dt:var Y=x._init;return G(P,Y(x._payload),M)}if(yn(x)||fe(x))return x=Ps(x,P.mode,M,null),x.return=P,x;Wo(P,x)}return null}function $(P,x,M,Y){var ue=x!==null?x.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return ue!==null?null:E(P,x,""+M,Y);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case We:return M.key===ue?C(P,x,M,Y):null;case Re:return M.key===ue?U(P,x,M,Y):null;case dt:return ue=M._init,$(P,x,ue(M._payload),Y)}if(yn(M)||fe(M))return ue!==null?null:Q(P,x,M,Y,null);Wo(P,M)}return null}function re(P,x,M,Y,ue){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return P=P.get(M)||null,E(x,P,""+Y,ue);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case We:return P=P.get(Y.key===null?M:Y.key)||null,C(x,P,Y,ue);case Re:return P=P.get(Y.key===null?M:Y.key)||null,U(x,P,Y,ue);case dt:var de=Y._init;return re(P,x,M,de(Y._payload),ue)}if(yn(Y)||fe(Y))return P=P.get(M)||null,Q(x,P,Y,ue,null);Wo(x,Y)}return null}function ae(P,x,M,Y){for(var ue=null,de=null,pe=x,we=x=0,Tt=null;pe!==null&&we<M.length;we++){pe.index>we?(Tt=pe,pe=null):Tt=pe.sibling;var Ue=$(P,pe,M[we],Y);if(Ue===null){pe===null&&(pe=Tt);break}t&&pe&&Ue.alternate===null&&r(P,pe),x=p(Ue,x,we),de===null?ue=Ue:de.sibling=Ue,de=Ue,pe=Tt}if(we===M.length)return a(P,pe),Ze&&xs(P,we),ue;if(pe===null){for(;we<M.length;we++)pe=G(P,M[we],Y),pe!==null&&(x=p(pe,x,we),de===null?ue=pe:de.sibling=pe,de=pe);return Ze&&xs(P,we),ue}for(pe=u(P,pe);we<M.length;we++)Tt=re(pe,P,we,M[we],Y),Tt!==null&&(t&&Tt.alternate!==null&&pe.delete(Tt.key===null?we:Tt.key),x=p(Tt,x,we),de===null?ue=Tt:de.sibling=Tt,de=Tt);return t&&pe.forEach(function(Zr){return r(P,Zr)}),Ze&&xs(P,we),ue}function oe(P,x,M,Y){var ue=fe(M);if(typeof ue!="function")throw Error(n(150));if(M=ue.call(M),M==null)throw Error(n(151));for(var de=ue=null,pe=x,we=x=0,Tt=null,Ue=M.next();pe!==null&&!Ue.done;we++,Ue=M.next()){pe.index>we?(Tt=pe,pe=null):Tt=pe.sibling;var Zr=$(P,pe,Ue.value,Y);if(Zr===null){pe===null&&(pe=Tt);break}t&&pe&&Zr.alternate===null&&r(P,pe),x=p(Zr,x,we),de===null?ue=Zr:de.sibling=Zr,de=Zr,pe=Tt}if(Ue.done)return a(P,pe),Ze&&xs(P,we),ue;if(pe===null){for(;!Ue.done;we++,Ue=M.next())Ue=G(P,Ue.value,Y),Ue!==null&&(x=p(Ue,x,we),de===null?ue=Ue:de.sibling=Ue,de=Ue);return Ze&&xs(P,we),ue}for(pe=u(P,pe);!Ue.done;we++,Ue=M.next())Ue=re(pe,P,we,Ue.value,Y),Ue!==null&&(t&&Ue.alternate!==null&&pe.delete(Ue.key===null?we:Ue.key),x=p(Ue,x,we),de===null?ue=Ue:de.sibling=Ue,de=Ue);return t&&pe.forEach(function(Wy){return r(P,Wy)}),Ze&&xs(P,we),ue}function ot(P,x,M,Y){if(typeof M=="object"&&M!==null&&M.type===I&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case We:e:{for(var ue=M.key,de=x;de!==null;){if(de.key===ue){if(ue=M.type,ue===I){if(de.tag===7){a(P,de.sibling),x=h(de,M.props.children),x.return=P,P=x;break e}}else if(de.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===dt&&Bf(ue)===de.type){a(P,de.sibling),x=h(de,M.props),x.ref=Ca(P,de,M),x.return=P,P=x;break e}a(P,de);break}else r(P,de);de=de.sibling}M.type===I?(x=Ps(M.props.children,P.mode,Y,M.key),x.return=P,P=x):(Y=wl(M.type,M.key,M.props,null,P.mode,Y),Y.ref=Ca(P,x,M),Y.return=P,P=Y)}return y(P);case Re:e:{for(de=M.key;x!==null;){if(x.key===de)if(x.tag===4&&x.stateNode.containerInfo===M.containerInfo&&x.stateNode.implementation===M.implementation){a(P,x.sibling),x=h(x,M.children||[]),x.return=P,P=x;break e}else{a(P,x);break}else r(P,x);x=x.sibling}x=Pc(M,P.mode,Y),x.return=P,P=x}return y(P);case dt:return de=M._init,ot(P,x,de(M._payload),Y)}if(yn(M))return ae(P,x,M,Y);if(fe(M))return oe(P,x,M,Y);Wo(P,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,x!==null&&x.tag===6?(a(P,x.sibling),x=h(x,M),x.return=P,P=x):(a(P,x),x=Oc(M,P.mode,Y),x.return=P,P=x),y(P)):a(P,x)}return ot}var _i=qf(!0),$f=qf(!1),Yo=Br(null),Jo=null,Ti=null,Ku=null;function Qu(){Ku=Ti=Jo=null}function Hu(t){var r=Yo.current;Je(Yo),t._currentValue=r}function Gu(t,r,a){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===a)break;t=t.return}}function Ci(t,r){Jo=t,Ku=Ti=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Xt=!0),t.firstContext=null)}function _n(t){var r=t._currentValue;if(Ku!==t)if(t={context:t,memoizedValue:r,next:null},Ti===null){if(Jo===null)throw Error(n(308));Ti=t,Jo.dependencies={lanes:0,firstContext:t}}else Ti=Ti.next=t;return r}var Ns=null;function Wu(t){Ns===null?Ns=[t]:Ns.push(t)}function Kf(t,r,a,u){var h=r.interleaved;return h===null?(a.next=a,Wu(r)):(a.next=h.next,h.next=a),r.interleaved=a,wr(t,u)}function wr(t,r){t.lanes|=r;var a=t.alternate;for(a!==null&&(a.lanes|=r),a=t,t=t.return;t!==null;)t.childLanes|=r,a=t.alternate,a!==null&&(a.childLanes|=r),a=t,t=t.return;return a.tag===3?a.stateNode:null}var Kr=!1;function Yu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function br(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Qr(t,r,a){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Oe&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,wr(t,a)}return h=u.interleaved,h===null?(r.next=r,Wu(u)):(r.next=h.next,h.next=r),u.interleaved=r,wr(t,a)}function Xo(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,a|=u,r.lanes=a,Pr(t,a)}}function Hf(t,r){var a=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var h=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var y={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?h=p=y:p=p.next=y,a=a.next}while(a!==null);p===null?h=p=r:p=p.next=r}else h=p=r;a={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}function Zo(t,r,a,u){var h=t.updateQueue;Kr=!1;var p=h.firstBaseUpdate,y=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var C=E,U=C.next;C.next=null,y===null?p=U:y.next=U,y=C;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,E=Q.lastBaseUpdate,E!==y&&(E===null?Q.firstBaseUpdate=U:E.next=U,Q.lastBaseUpdate=C))}if(p!==null){var G=h.baseState;y=0,Q=U=C=null,E=p;do{var $=E.lane,re=E.eventTime;if((u&$)===$){Q!==null&&(Q=Q.next={eventTime:re,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var ae=t,oe=E;switch($=r,re=a,oe.tag){case 1:if(ae=oe.payload,typeof ae=="function"){G=ae.call(re,G,$);break e}G=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=oe.payload,$=typeof ae=="function"?ae.call(re,G,$):ae,$==null)break e;G=ne({},G,$);break e;case 2:Kr=!0}}E.callback!==null&&E.lane!==0&&(t.flags|=64,$=h.effects,$===null?h.effects=[E]:$.push(E))}else re={eventTime:re,lane:$,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Q===null?(U=Q=re,C=G):Q=Q.next=re,y|=$;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;$=E,E=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);if(Q===null&&(C=G),h.baseState=C,h.firstBaseUpdate=U,h.lastBaseUpdate=Q,r=h.shared.interleaved,r!==null){h=r;do y|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Rs|=y,t.lanes=y,t.memoizedState=G}}function Gf(t,r,a){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=a,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var xa={},er=Br(xa),Na=Br(xa),Ia=Br(xa);function Is(t){if(t===xa)throw Error(n(174));return t}function Ju(t,r){switch(Ge(Ia,r),Ge(Na,t),Ge(er,xa),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:gt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=gt(r,t)}Je(er),Ge(er,r)}function xi(){Je(er),Je(Na),Je(Ia)}function Wf(t){Is(Ia.current);var r=Is(er.current),a=gt(r,t.type);r!==a&&(Ge(Na,t),Ge(er,a))}function Xu(t){Na.current===t&&(Je(er),Je(Na))}var tt=Br(0);function el(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Zu=[];function ec(){for(var t=0;t<Zu.length;t++)Zu[t]._workInProgressVersionPrimary=null;Zu.length=0}var tl=ve.ReactCurrentDispatcher,tc=ve.ReactCurrentBatchConfig,As=0,nt=null,yt=null,St=null,nl=!1,Aa=!1,Ra=0,yy=0;function Mt(){throw Error(n(321))}function nc(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!zn(t[a],r[a]))return!1;return!0}function rc(t,r,a,u,h,p){if(As=p,nt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,tl.current=t===null||t.memoizedState===null?Ey:ky,t=a(u,h),Aa){p=0;do{if(Aa=!1,Ra=0,25<=p)throw Error(n(301));p+=1,St=yt=null,r.updateQueue=null,tl.current=Sy,t=a(u,h)}while(Aa)}if(tl.current=il,r=yt!==null&&yt.next!==null,As=0,St=yt=nt=null,nl=!1,r)throw Error(n(300));return t}function sc(){var t=Ra!==0;return Ra=0,t}function tr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?nt.memoizedState=St=t:St=St.next=t,St}function Tn(){if(yt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var r=St===null?nt.memoizedState:St.next;if(r!==null)St=r,yt=t;else{if(t===null)throw Error(n(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},St===null?nt.memoizedState=St=t:St=St.next=t}return St}function Da(t,r){return typeof r=="function"?r(t):r}function ic(t){var r=Tn(),a=r.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=t;var u=yt,h=u.baseQueue,p=a.pending;if(p!==null){if(h!==null){var y=h.next;h.next=p.next,p.next=y}u.baseQueue=h=p,a.pending=null}if(h!==null){p=h.next,u=u.baseState;var E=y=null,C=null,U=p;do{var Q=U.lane;if((As&Q)===Q)C!==null&&(C=C.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),u=U.hasEagerState?U.eagerState:t(u,U.action);else{var G={lane:Q,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};C===null?(E=C=G,y=u):C=C.next=G,nt.lanes|=Q,Rs|=Q}U=U.next}while(U!==null&&U!==p);C===null?y=u:C.next=E,zn(u,r.memoizedState)||(Xt=!0),r.memoizedState=u,r.baseState=y,r.baseQueue=C,a.lastRenderedState=u}if(t=a.interleaved,t!==null){h=t;do p=h.lane,nt.lanes|=p,Rs|=p,h=h.next;while(h!==t)}else h===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function ac(t){var r=Tn(),a=r.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=t;var u=a.dispatch,h=a.pending,p=r.memoizedState;if(h!==null){a.pending=null;var y=h=h.next;do p=t(p,y.action),y=y.next;while(y!==h);zn(p,r.memoizedState)||(Xt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,u]}function Yf(){}function Jf(t,r){var a=nt,u=Tn(),h=r(),p=!zn(u.memoizedState,h);if(p&&(u.memoizedState=h,Xt=!0),u=u.queue,oc(ed.bind(null,a,u,t),[t]),u.getSnapshot!==r||p||St!==null&&St.memoizedState.tag&1){if(a.flags|=2048,La(9,Zf.bind(null,a,u,h,r),void 0,null),_t===null)throw Error(n(349));(As&30)!==0||Xf(a,r,h)}return h}function Xf(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=nt.updateQueue,r===null?(r={lastEffect:null,stores:null},nt.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Zf(t,r,a,u){r.value=a,r.getSnapshot=u,td(r)&&nd(t)}function ed(t,r,a){return a(function(){td(r)&&nd(t)})}function td(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!zn(t,a)}catch{return!0}}function nd(t){var r=wr(t,1);r!==null&&$n(r,t,1,-1)}function rd(t){var r=tr();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:t},r.queue=t,t=t.dispatch=by.bind(null,nt,t),[r.memoizedState,t]}function La(t,r,a,u){return t={tag:t,create:r,destroy:a,deps:u,next:null},r=nt.updateQueue,r===null?(r={lastEffect:null,stores:null},nt.updateQueue=r,r.lastEffect=t.next=t):(a=r.lastEffect,a===null?r.lastEffect=t.next=t:(u=a.next,a.next=t,t.next=u,r.lastEffect=t)),t}function sd(){return Tn().memoizedState}function rl(t,r,a,u){var h=tr();nt.flags|=t,h.memoizedState=La(1|r,a,void 0,u===void 0?null:u)}function sl(t,r,a,u){var h=Tn();u=u===void 0?null:u;var p=void 0;if(yt!==null){var y=yt.memoizedState;if(p=y.destroy,u!==null&&nc(u,y.deps)){h.memoizedState=La(r,a,p,u);return}}nt.flags|=t,h.memoizedState=La(1|r,a,p,u)}function id(t,r){return rl(8390656,8,t,r)}function oc(t,r){return sl(2048,8,t,r)}function ad(t,r){return sl(4,2,t,r)}function od(t,r){return sl(4,4,t,r)}function ld(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function ud(t,r,a){return a=a!=null?a.concat([t]):null,sl(4,4,ld.bind(null,r,t),a)}function lc(){}function cd(t,r){var a=Tn();r=r===void 0?null:r;var u=a.memoizedState;return u!==null&&r!==null&&nc(r,u[1])?u[0]:(a.memoizedState=[t,r],t)}function hd(t,r){var a=Tn();r=r===void 0?null:r;var u=a.memoizedState;return u!==null&&r!==null&&nc(r,u[1])?u[0]:(t=t(),a.memoizedState=[t,r],t)}function fd(t,r,a){return(As&21)===0?(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=a):(zn(a,r)||(a=ws(),nt.lanes|=a,Rs|=a,t.baseState=!0),r)}function vy(t,r){var a=Ae;Ae=a!==0&&4>a?a:4,t(!0);var u=tc.transition;tc.transition={};try{t(!1),r()}finally{Ae=a,tc.transition=u}}function dd(){return Tn().memoizedState}function wy(t,r,a){var u=Yr(t);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},pd(t))gd(r,a);else if(a=Kf(t,r,a,u),a!==null){var h=Qt();$n(a,t,u,h),md(a,r,u)}}function by(t,r,a){var u=Yr(t),h={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(pd(t))gd(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var y=r.lastRenderedState,E=p(y,a);if(h.hasEagerState=!0,h.eagerState=E,zn(E,y)){var C=r.interleaved;C===null?(h.next=h,Wu(r)):(h.next=C.next,C.next=h),r.interleaved=h;return}}catch{}finally{}a=Kf(t,r,h,u),a!==null&&(h=Qt(),$n(a,t,u,h),md(a,r,u))}}function pd(t){var r=t.alternate;return t===nt||r!==null&&r===nt}function gd(t,r){Aa=nl=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function md(t,r,a){if((a&4194240)!==0){var u=r.lanes;u&=t.pendingLanes,a|=u,r.lanes=a,Pr(t,a)}}var il={readContext:_n,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},Ey={readContext:_n,useCallback:function(t,r){return tr().memoizedState=[t,r===void 0?null:r],t},useContext:_n,useEffect:id,useImperativeHandle:function(t,r,a){return a=a!=null?a.concat([t]):null,rl(4194308,4,ld.bind(null,r,t),a)},useLayoutEffect:function(t,r){return rl(4194308,4,t,r)},useInsertionEffect:function(t,r){return rl(4,2,t,r)},useMemo:function(t,r){var a=tr();return r=r===void 0?null:r,t=t(),a.memoizedState=[t,r],t},useReducer:function(t,r,a){var u=tr();return r=a!==void 0?a(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=wy.bind(null,nt,t),[u.memoizedState,t]},useRef:function(t){var r=tr();return t={current:t},r.memoizedState=t},useState:rd,useDebugValue:lc,useDeferredValue:function(t){return tr().memoizedState=t},useTransition:function(){var t=rd(!1),r=t[0];return t=vy.bind(null,t[1]),tr().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,a){var u=nt,h=tr();if(Ze){if(a===void 0)throw Error(n(407));a=a()}else{if(a=r(),_t===null)throw Error(n(349));(As&30)!==0||Xf(u,r,a)}h.memoizedState=a;var p={value:a,getSnapshot:r};return h.queue=p,id(ed.bind(null,u,p,t),[t]),u.flags|=2048,La(9,Zf.bind(null,u,p,a,r),void 0,null),a},useId:function(){var t=tr(),r=_t.identifierPrefix;if(Ze){var a=vr,u=yr;a=(u&~(1<<32-qt(u)-1)).toString(32)+a,r=":"+r+"R"+a,a=Ra++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=yy++,r=":"+r+"r"+a.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},ky={readContext:_n,useCallback:cd,useContext:_n,useEffect:oc,useImperativeHandle:ud,useInsertionEffect:ad,useLayoutEffect:od,useMemo:hd,useReducer:ic,useRef:sd,useState:function(){return ic(Da)},useDebugValue:lc,useDeferredValue:function(t){var r=Tn();return fd(r,yt.memoizedState,t)},useTransition:function(){var t=ic(Da)[0],r=Tn().memoizedState;return[t,r]},useMutableSource:Yf,useSyncExternalStore:Jf,useId:dd,unstable_isNewReconciler:!1},Sy={readContext:_n,useCallback:cd,useContext:_n,useEffect:oc,useImperativeHandle:ud,useInsertionEffect:ad,useLayoutEffect:od,useMemo:hd,useReducer:ac,useRef:sd,useState:function(){return ac(Da)},useDebugValue:lc,useDeferredValue:function(t){var r=Tn();return yt===null?r.memoizedState=t:fd(r,yt.memoizedState,t)},useTransition:function(){var t=ac(Da)[0],r=Tn().memoizedState;return[t,r]},useMutableSource:Yf,useSyncExternalStore:Jf,useId:dd,unstable_isNewReconciler:!1};function jn(t,r){if(t&&t.defaultProps){r=ne({},r),t=t.defaultProps;for(var a in t)r[a]===void 0&&(r[a]=t[a]);return r}return r}function uc(t,r,a,u){r=t.memoizedState,a=a(u,r),a=a==null?r:ne({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var al={isMounted:function(t){return(t=t._reactInternals)?Dn(t)===t:!1},enqueueSetState:function(t,r,a){t=t._reactInternals;var u=Qt(),h=Yr(t),p=br(u,h);p.payload=r,a!=null&&(p.callback=a),r=Qr(t,p,h),r!==null&&($n(r,t,h,u),Xo(r,t,h))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var u=Qt(),h=Yr(t),p=br(u,h);p.tag=1,p.payload=r,a!=null&&(p.callback=a),r=Qr(t,p,h),r!==null&&($n(r,t,h,u),Xo(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Qt(),u=Yr(t),h=br(a,u);h.tag=2,r!=null&&(h.callback=r),r=Qr(t,h,u),r!==null&&($n(r,t,u,a),Xo(r,t,u))}};function yd(t,r,a,u,h,p,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,y):r.prototype&&r.prototype.isPureReactComponent?!wa(a,u)||!wa(h,p):!0}function vd(t,r,a){var u=!1,h=qr,p=r.contextType;return typeof p=="object"&&p!==null?p=_n(p):(h=Jt(r)?Ts:Pt.current,u=r.contextTypes,p=(u=u!=null)?bi(t,h):qr),r=new r(a,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=al,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function wd(t,r,a,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==t&&al.enqueueReplaceState(r,r.state,null)}function cc(t,r,a,u){var h=t.stateNode;h.props=a,h.state=t.memoizedState,h.refs={},Yu(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=_n(p):(p=Jt(r)?Ts:Pt.current,h.context=bi(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(uc(t,r,p,a),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&al.enqueueReplaceState(h,h.state,null),Zo(t,a,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Ni(t,r){try{var a="",u=r;do a+=Te(u),u=u.return;while(u);var h=a}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function hc(t,r,a){return{value:t,source:null,stack:a??null,digest:r??null}}function fc(t,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var _y=typeof WeakMap=="function"?WeakMap:Map;function bd(t,r,a){a=br(-1,a),a.tag=3,a.payload={element:null};var u=r.value;return a.callback=function(){dl||(dl=!0,Cc=u),fc(t,r)},a}function Ed(t,r,a){a=br(-1,a),a.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;a.payload=function(){return u(h)},a.callback=function(){fc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){fc(t,r),typeof u!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var y=r.stack;this.componentDidCatch(r.value,{componentStack:y!==null?y:""})}),a}function kd(t,r,a){var u=t.pingCache;if(u===null){u=t.pingCache=new _y;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(a)||(h.add(a),t=Fy.bind(null,t,r,a),r.then(t,t))}function Sd(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function _d(t,r,a,u,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=br(-1,1),r.tag=2,Qr(a,r,1))),a.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var Ty=ve.ReactCurrentOwner,Xt=!1;function Kt(t,r,a,u){r.child=t===null?$f(r,null,a,u):_i(r,t.child,a,u)}function Td(t,r,a,u,h){a=a.render;var p=r.ref;return Ci(r,h),u=rc(t,r,a,u,p,h),a=sc(),t!==null&&!Xt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,Er(t,r,h)):(Ze&&a&&Vu(r),r.flags|=1,Kt(t,r,u,h),r.child)}function Cd(t,r,a,u,h){if(t===null){var p=a.type;return typeof p=="function"&&!Lc(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=p,xd(t,r,p,u,h)):(t=wl(a.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,(t.lanes&h)===0){var y=p.memoizedProps;if(a=a.compare,a=a!==null?a:wa,a(y,u)&&t.ref===r.ref)return Er(t,r,h)}return r.flags|=1,t=Xr(p,u),t.ref=r.ref,t.return=r,r.child=t}function xd(t,r,a,u,h){if(t!==null){var p=t.memoizedProps;if(wa(p,u)&&t.ref===r.ref)if(Xt=!1,r.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Xt=!0);else return r.lanes=t.lanes,Er(t,r,h)}return dc(t,r,a,u,h)}function Nd(t,r,a){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(Ai,dn),dn|=a;else{if((a&1073741824)===0)return t=p!==null?p.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Ge(Ai,dn),dn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:a,Ge(Ai,dn),dn|=u}else p!==null?(u=p.baseLanes|a,r.memoizedState=null):u=a,Ge(Ai,dn),dn|=u;return Kt(t,r,h,a),r.child}function Id(t,r){var a=r.ref;(t===null&&a!==null||t!==null&&t.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function dc(t,r,a,u,h){var p=Jt(a)?Ts:Pt.current;return p=bi(r,p),Ci(r,h),a=rc(t,r,a,u,p,h),u=sc(),t!==null&&!Xt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,Er(t,r,h)):(Ze&&u&&Vu(r),r.flags|=1,Kt(t,r,a,h),r.child)}function Ad(t,r,a,u,h){if(Jt(a)){var p=!0;$o(r)}else p=!1;if(Ci(r,h),r.stateNode===null)ll(t,r),vd(r,a,u),cc(r,a,u,h),u=!0;else if(t===null){var y=r.stateNode,E=r.memoizedProps;y.props=E;var C=y.context,U=a.contextType;typeof U=="object"&&U!==null?U=_n(U):(U=Jt(a)?Ts:Pt.current,U=bi(r,U));var Q=a.getDerivedStateFromProps,G=typeof Q=="function"||typeof y.getSnapshotBeforeUpdate=="function";G||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==u||C!==U)&&wd(r,y,u,U),Kr=!1;var $=r.memoizedState;y.state=$,Zo(r,u,y,h),C=r.memoizedState,E!==u||$!==C||Yt.current||Kr?(typeof Q=="function"&&(uc(r,a,Q,u),C=r.memoizedState),(E=Kr||yd(r,a,E,u,$,C,U))?(G||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=C),y.props=u,y.state=C,y.context=U,u=E):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{y=r.stateNode,Qf(t,r),E=r.memoizedProps,U=r.type===r.elementType?E:jn(r.type,E),y.props=U,G=r.pendingProps,$=y.context,C=a.contextType,typeof C=="object"&&C!==null?C=_n(C):(C=Jt(a)?Ts:Pt.current,C=bi(r,C));var re=a.getDerivedStateFromProps;(Q=typeof re=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==G||$!==C)&&wd(r,y,u,C),Kr=!1,$=r.memoizedState,y.state=$,Zo(r,u,y,h);var ae=r.memoizedState;E!==G||$!==ae||Yt.current||Kr?(typeof re=="function"&&(uc(r,a,re,u),ae=r.memoizedState),(U=Kr||yd(r,a,U,u,$,ae,C)||!1)?(Q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,ae,C),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,ae,C)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ae),y.props=u,y.state=ae,y.context=C,u=U):(typeof y.componentDidUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(r.flags|=1024),u=!1)}return pc(t,r,a,u,p,h)}function pc(t,r,a,u,h,p){Id(t,r);var y=(r.flags&128)!==0;if(!u&&!y)return h&&Pf(r,a,!1),Er(t,r,p);u=r.stateNode,Ty.current=r;var E=y&&typeof a.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&y?(r.child=_i(r,t.child,null,p),r.child=_i(r,null,E,p)):Kt(t,r,E,p),r.memoizedState=u.state,h&&Pf(r,a,!0),r.child}function Rd(t){var r=t.stateNode;r.pendingContext?Lf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Lf(t,r.context,!1),Ju(t,r.containerInfo)}function Dd(t,r,a,u,h){return Si(),$u(h),r.flags|=256,Kt(t,r,a,u),r.child}var gc={dehydrated:null,treeContext:null,retryLane:0};function mc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ld(t,r,a){var u=r.pendingProps,h=tt.current,p=!1,y=(r.flags&128)!==0,E;if((E=y)||(E=t!==null&&t.memoizedState===null?!1:(h&2)!==0),E?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),Ge(tt,h&1),t===null)return qu(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(y=u.children,t=u.fallback,p?(u=r.mode,p=r.child,y={mode:"hidden",children:y},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=y):p=bl(y,u,0,null),t=Ps(t,u,a,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=mc(a),r.memoizedState=gc,t):yc(r,y));if(h=t.memoizedState,h!==null&&(E=h.dehydrated,E!==null))return Cy(t,r,y,u,E,h,a);if(p){p=u.fallback,y=r.mode,h=t.child,E=h.sibling;var C={mode:"hidden",children:u.children};return(y&1)===0&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=C,r.deletions=null):(u=Xr(h,C),u.subtreeFlags=h.subtreeFlags&14680064),E!==null?p=Xr(E,p):(p=Ps(p,y,a,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,y=t.child.memoizedState,y=y===null?mc(a):{baseLanes:y.baseLanes|a,cachePool:null,transitions:y.transitions},p.memoizedState=y,p.childLanes=t.childLanes&~a,r.memoizedState=gc,u}return p=t.child,t=p.sibling,u=Xr(p,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=a),u.return=r,u.sibling=null,t!==null&&(a=r.deletions,a===null?(r.deletions=[t],r.flags|=16):a.push(t)),r.child=u,r.memoizedState=null,u}function yc(t,r){return r=bl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function ol(t,r,a,u){return u!==null&&$u(u),_i(r,t.child,null,a),t=yc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Cy(t,r,a,u,h,p,y){if(a)return r.flags&256?(r.flags&=-257,u=hc(Error(n(422))),ol(t,r,y,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=bl({mode:"visible",children:u.children},h,0,null),p=Ps(p,h,y,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,(r.mode&1)!==0&&_i(r,t.child,null,y),r.child.memoizedState=mc(y),r.memoizedState=gc,p);if((r.mode&1)===0)return ol(t,r,y,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var E=u.dgst;return u=E,p=Error(n(419)),u=hc(p,u,void 0),ol(t,r,y,u)}if(E=(y&t.childLanes)!==0,Xt||E){if(u=_t,u!==null){switch(y&-y){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|y))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,wr(t,h),$n(u,t,h,-1))}return Dc(),u=hc(Error(n(421))),ol(t,r,y,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=zy.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,fn=jr(h.nextSibling),hn=r,Ze=!0,Vn=null,t!==null&&(kn[Sn++]=yr,kn[Sn++]=vr,kn[Sn++]=Cs,yr=t.id,vr=t.overflow,Cs=r),r=yc(r,u.children),r.flags|=4096,r)}function Od(t,r,a){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),Gu(t.return,r,a)}function vc(t,r,a,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=a,p.tailMode=h)}function Pd(t,r,a){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(Kt(t,r,u.children,a),u=tt.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Od(t,a,r);else if(t.tag===19)Od(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Ge(tt,u),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&el(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),vc(r,!1,h,a,p);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&el(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}vc(r,!0,a,null,p);break;case"together":vc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ll(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Er(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Rs|=r.lanes,(a&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,a=Xr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Xr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function xy(t,r,a){switch(r.tag){case 3:Rd(r),Si();break;case 5:Wf(r);break;case 1:Jt(r.type)&&$o(r);break;case 4:Ju(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;Ge(Yo,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(Ge(tt,tt.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?Ld(t,r,a):(Ge(tt,tt.current&1),t=Er(t,r,a),t!==null?t.sibling:null);Ge(tt,tt.current&1);break;case 19:if(u=(a&r.childLanes)!==0,(t.flags&128)!==0){if(u)return Pd(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Ge(tt,tt.current),u)break;return null;case 22:case 23:return r.lanes=0,Nd(t,r,a)}return Er(t,r,a)}var Md,wc,Ud,Fd;Md=function(t,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)t.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},wc=function(){},Ud=function(t,r,a,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,Is(er.current);var p=null;switch(a){case"input":h=Bt(t,h),u=Bt(t,u),p=[];break;case"select":h=ne({},h,{value:void 0}),u=ne({},u,{value:void 0}),p=[];break;case"textarea":h=st(t,h),u=st(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=jo)}ea(a,u);var y;a=null;for(U in h)if(!u.hasOwnProperty(U)&&h.hasOwnProperty(U)&&h[U]!=null)if(U==="style"){var E=h[U];for(y in E)E.hasOwnProperty(y)&&(a||(a={}),a[y]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(o.hasOwnProperty(U)?p||(p=[]):(p=p||[]).push(U,null));for(U in u){var C=u[U];if(E=h!=null?h[U]:void 0,u.hasOwnProperty(U)&&C!==E&&(C!=null||E!=null))if(U==="style")if(E){for(y in E)!E.hasOwnProperty(y)||C&&C.hasOwnProperty(y)||(a||(a={}),a[y]="");for(y in C)C.hasOwnProperty(y)&&E[y]!==C[y]&&(a||(a={}),a[y]=C[y])}else a||(p||(p=[]),p.push(U,a)),a=C;else U==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,E=E?E.__html:void 0,C!=null&&E!==C&&(p=p||[]).push(U,C)):U==="children"?typeof C!="string"&&typeof C!="number"||(p=p||[]).push(U,""+C):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(o.hasOwnProperty(U)?(C!=null&&U==="onScroll"&&Ye("scroll",t),p||E===C||(p=[])):(p=p||[]).push(U,C))}a&&(p=p||[]).push("style",a);var U=p;(r.updateQueue=U)&&(r.flags|=4)}},Fd=function(t,r,a,u){a!==u&&(r.flags|=4)};function Oa(t,r){if(!Ze)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Ut(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,u=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=a,r}function Ny(t,r,a){var u=r.pendingProps;switch(ju(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(r),null;case 1:return Jt(r.type)&&qo(),Ut(r),null;case 3:return u=r.stateNode,xi(),Je(Yt),Je(Pt),ec(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(Go(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Vn!==null&&(Ic(Vn),Vn=null))),wc(t,r),Ut(r),null;case 5:Xu(r);var h=Is(Ia.current);if(a=r.type,t!==null&&r.stateNode!=null)Ud(t,r,a,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Ut(r),null}if(t=Is(er.current),Go(r)){u=r.stateNode,a=r.type;var p=r.memoizedProps;switch(u[Zn]=r,u[_a]=p,t=(r.mode&1)!==0,a){case"dialog":Ye("cancel",u),Ye("close",u);break;case"iframe":case"object":case"embed":Ye("load",u);break;case"video":case"audio":for(h=0;h<Ea.length;h++)Ye(Ea[h],u);break;case"source":Ye("error",u);break;case"img":case"image":case"link":Ye("error",u),Ye("load",u);break;case"details":Ye("toggle",u);break;case"input":Nr(u,p),Ye("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},Ye("invalid",u);break;case"textarea":Ht(u,p),Ye("invalid",u)}ea(a,p),h=null;for(var y in p)if(p.hasOwnProperty(y)){var E=p[y];y==="children"?typeof E=="string"?u.textContent!==E&&(p.suppressHydrationWarning!==!0&&Vo(u.textContent,E,t),h=["children",E]):typeof E=="number"&&u.textContent!==""+E&&(p.suppressHydrationWarning!==!0&&Vo(u.textContent,E,t),h=["children",""+E]):o.hasOwnProperty(y)&&E!=null&&y==="onScroll"&&Ye("scroll",u)}switch(a){case"input":ye(u),In(u,p,!0);break;case"textarea":ye(u),Wi(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=jo)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{y=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pt(a)),t==="http://www.w3.org/1999/xhtml"?a==="script"?(t=y.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=y.createElement(a,{is:u.is}):(t=y.createElement(a),a==="select"&&(y=t,u.multiple?y.multiple=!0:u.size&&(y.size=u.size))):t=y.createElementNS(t,a),t[Zn]=r,t[_a]=u,Md(t,r,!1,!1),r.stateNode=t;e:{switch(y=ta(a,u),a){case"dialog":Ye("cancel",t),Ye("close",t),h=u;break;case"iframe":case"object":case"embed":Ye("load",t),h=u;break;case"video":case"audio":for(h=0;h<Ea.length;h++)Ye(Ea[h],t);h=u;break;case"source":Ye("error",t),h=u;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),h=u;break;case"details":Ye("toggle",t),h=u;break;case"input":Nr(t,u),h=Bt(t,u),Ye("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=ne({},u,{value:void 0}),Ye("invalid",t);break;case"textarea":Ht(t,u),h=st(t,u),Ye("invalid",t);break;default:h=u}ea(a,h),E=h;for(p in E)if(E.hasOwnProperty(p)){var C=E[p];p==="style"?Xi(t,C):p==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&Yi(t,C)):p==="children"?typeof C=="string"?(a!=="textarea"||C!=="")&&Ar(t,C):typeof C=="number"&&Ar(t,""+C):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?C!=null&&p==="onScroll"&&Ye("scroll",t):C!=null&&_e(t,p,C,y))}switch(a){case"input":ye(t),In(t,u,!1);break;case"textarea":ye(t),Wi(t);break;case"option":u.value!=null&&t.setAttribute("value",""+B(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?an(t,!!u.multiple,p,!1):u.defaultValue!=null&&an(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=jo)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ut(r),null;case 6:if(t&&r.stateNode!=null)Fd(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(a=Is(Ia.current),Is(er.current),Go(r)){if(u=r.stateNode,a=r.memoizedProps,u[Zn]=r,(p=u.nodeValue!==a)&&(t=hn,t!==null))switch(t.tag){case 3:Vo(u.nodeValue,a,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vo(u.nodeValue,a,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[Zn]=r,r.stateNode=u}return Ut(r),null;case 13:if(Je(tt),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&fn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)jf(),Si(),r.flags|=98560,p=!1;else if(p=Go(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Zn]=r}else Si(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ut(r),p=!1}else Vn!==null&&(Ic(Vn),Vn=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(tt.current&1)!==0?vt===0&&(vt=3):Dc())),r.updateQueue!==null&&(r.flags|=4),Ut(r),null);case 4:return xi(),wc(t,r),t===null&&ka(r.stateNode.containerInfo),Ut(r),null;case 10:return Hu(r.type._context),Ut(r),null;case 17:return Jt(r.type)&&qo(),Ut(r),null;case 19:if(Je(tt),p=r.memoizedState,p===null)return Ut(r),null;if(u=(r.flags&128)!==0,y=p.rendering,y===null)if(u)Oa(p,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(y=el(t),y!==null){for(r.flags|=128,Oa(p,!1),u=y.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=a,a=r.child;a!==null;)p=a,t=u,p.flags&=14680066,y=p.alternate,y===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,p.type=y.type,t=y.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),a=a.sibling;return Ge(tt,tt.current&1|2),r.child}t=t.sibling}p.tail!==null&&He()>Ri&&(r.flags|=128,u=!0,Oa(p,!1),r.lanes=4194304)}else{if(!u)if(t=el(y),t!==null){if(r.flags|=128,u=!0,a=t.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),Oa(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!Ze)return Ut(r),null}else 2*He()-p.renderingStartTime>Ri&&a!==1073741824&&(r.flags|=128,u=!0,Oa(p,!1),r.lanes=4194304);p.isBackwards?(y.sibling=r.child,r.child=y):(a=p.last,a!==null?a.sibling=y:r.child=y,p.last=y)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=He(),r.sibling=null,a=tt.current,Ge(tt,u?a&1|2:a&1),r):(Ut(r),null);case 22:case 23:return Rc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(dn&1073741824)!==0&&(Ut(r),r.subtreeFlags&6&&(r.flags|=8192)):Ut(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function Iy(t,r){switch(ju(r),r.tag){case 1:return Jt(r.type)&&qo(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return xi(),Je(Yt),Je(Pt),ec(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return Xu(r),null;case 13:if(Je(tt),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Si()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Je(tt),null;case 4:return xi(),null;case 10:return Hu(r.type._context),null;case 22:case 23:return Rc(),null;case 24:return null;default:return null}}var ul=!1,Ft=!1,Ay=typeof WeakSet=="function"?WeakSet:Set,se=null;function Ii(t,r){var a=t.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){it(t,r,u)}else a.current=null}function zd(t,r,a){try{a()}catch(u){it(t,r,u)}}var Vd=!1;function Ry(t,r){if(Du=Fr,t=yf(),_u(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var y=0,E=-1,C=-1,U=0,Q=0,G=t,$=null;t:for(;;){for(var re;G!==a||h!==0&&G.nodeType!==3||(E=y+h),G!==p||u!==0&&G.nodeType!==3||(C=y+u),G.nodeType===3&&(y+=G.nodeValue.length),(re=G.firstChild)!==null;)$=G,G=re;for(;;){if(G===t)break t;if($===a&&++U===h&&(E=y),$===p&&++Q===u&&(C=y),(re=G.nextSibling)!==null)break;G=$,$=G.parentNode}G=re}a=E===-1||C===-1?null:{start:E,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Lu={focusedElem:t,selectionRange:a},Fr=!1,se=r;se!==null;)if(r=se,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,se=t;else for(;se!==null;){r=se;try{var ae=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var oe=ae.memoizedProps,ot=ae.memoizedState,P=r.stateNode,x=P.getSnapshotBeforeUpdate(r.elementType===r.type?oe:jn(r.type,oe),ot);P.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var M=r.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Y){it(r,r.return,Y)}if(t=r.sibling,t!==null){t.return=r.return,se=t;break}se=r.return}return ae=Vd,Vd=!1,ae}function Pa(t,r,a){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&zd(r,a,p)}h=h.next}while(h!==u)}}function cl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var u=a.create;a.destroy=u()}a=a.next}while(a!==r)}}function bc(t){var r=t.ref;if(r!==null){var a=t.stateNode;switch(t.tag){case 5:t=a;break;default:t=a}typeof r=="function"?r(t):r.current=t}}function jd(t){var r=t.alternate;r!==null&&(t.alternate=null,jd(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Zn],delete r[_a],delete r[Uu],delete r[dy],delete r[py])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Bd(t){return t.tag===5||t.tag===3||t.tag===4}function qd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ec(t,r,a){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(t,r):a.insertBefore(t,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(t,a)):(r=a,r.appendChild(t)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=jo));else if(u!==4&&(t=t.child,t!==null))for(Ec(t,r,a),t=t.sibling;t!==null;)Ec(t,r,a),t=t.sibling}function kc(t,r,a){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(kc(t,r,a),t=t.sibling;t!==null;)kc(t,r,a),t=t.sibling}var It=null,Bn=!1;function Hr(t,r,a){for(a=a.child;a!==null;)$d(t,r,a),a=a.sibling}function $d(t,r,a){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(ys,a)}catch{}switch(a.tag){case 5:Ft||Ii(a,r);case 6:var u=It,h=Bn;It=null,Hr(t,r,a),It=u,Bn=h,It!==null&&(Bn?(t=It,a=a.stateNode,t.nodeType===8?t.parentNode.removeChild(a):t.removeChild(a)):It.removeChild(a.stateNode));break;case 18:It!==null&&(Bn?(t=It,a=a.stateNode,t.nodeType===8?Mu(t.parentNode,a):t.nodeType===1&&Mu(t,a),Un(t)):Mu(It,a.stateNode));break;case 4:u=It,h=Bn,It=a.stateNode.containerInfo,Bn=!0,Hr(t,r,a),It=u,Bn=h;break;case 0:case 11:case 14:case 15:if(!Ft&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,y=p.destroy;p=p.tag,y!==void 0&&((p&2)!==0||(p&4)!==0)&&zd(a,r,y),h=h.next}while(h!==u)}Hr(t,r,a);break;case 1:if(!Ft&&(Ii(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(E){it(a,r,E)}Hr(t,r,a);break;case 21:Hr(t,r,a);break;case 22:a.mode&1?(Ft=(u=Ft)||a.memoizedState!==null,Hr(t,r,a),Ft=u):Hr(t,r,a);break;default:Hr(t,r,a)}}function Kd(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var a=t.stateNode;a===null&&(a=t.stateNode=new Ay),r.forEach(function(u){var h=Vy.bind(null,t,u);a.has(u)||(a.add(u),u.then(h,h))})}}function qn(t,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];try{var p=t,y=r,E=y;e:for(;E!==null;){switch(E.tag){case 5:It=E.stateNode,Bn=!1;break e;case 3:It=E.stateNode.containerInfo,Bn=!0;break e;case 4:It=E.stateNode.containerInfo,Bn=!0;break e}E=E.return}if(It===null)throw Error(n(160));$d(p,y,h),It=null,Bn=!1;var C=h.alternate;C!==null&&(C.return=null),h.return=null}catch(U){it(h,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Qd(r,t),r=r.sibling}function Qd(t,r){var a=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(r,t),nr(t),u&4){try{Pa(3,t,t.return),cl(3,t)}catch(oe){it(t,t.return,oe)}try{Pa(5,t,t.return)}catch(oe){it(t,t.return,oe)}}break;case 1:qn(r,t),nr(t),u&512&&a!==null&&Ii(a,a.return);break;case 5:if(qn(r,t),nr(t),u&512&&a!==null&&Ii(a,a.return),t.flags&32){var h=t.stateNode;try{Ar(h,"")}catch(oe){it(t,t.return,oe)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,y=a!==null?a.memoizedProps:p,E=t.type,C=t.updateQueue;if(t.updateQueue=null,C!==null)try{E==="input"&&p.type==="radio"&&p.name!=null&&Ir(h,p),ta(E,y);var U=ta(E,p);for(y=0;y<C.length;y+=2){var Q=C[y],G=C[y+1];Q==="style"?Xi(h,G):Q==="dangerouslySetInnerHTML"?Yi(h,G):Q==="children"?Ar(h,G):_e(h,Q,G,U)}switch(E){case"input":Nn(h,p);break;case"textarea":Ks(h,p);break;case"select":var $=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var re=p.value;re!=null?an(h,!!p.multiple,re,!1):$!==!!p.multiple&&(p.defaultValue!=null?an(h,!!p.multiple,p.defaultValue,!0):an(h,!!p.multiple,p.multiple?[]:"",!1))}h[_a]=p}catch(oe){it(t,t.return,oe)}}break;case 6:if(qn(r,t),nr(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(oe){it(t,t.return,oe)}}break;case 3:if(qn(r,t),nr(t),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Un(r.containerInfo)}catch(oe){it(t,t.return,oe)}break;case 4:qn(r,t),nr(t);break;case 13:qn(r,t),nr(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(Tc=He())),u&4&&Kd(t);break;case 22:if(Q=a!==null&&a.memoizedState!==null,t.mode&1?(Ft=(U=Ft)||Q,qn(r,t),Ft=U):qn(r,t),nr(t),u&8192){if(U=t.memoizedState!==null,(t.stateNode.isHidden=U)&&!Q&&(t.mode&1)!==0)for(se=t,Q=t.child;Q!==null;){for(G=se=Q;se!==null;){switch($=se,re=$.child,$.tag){case 0:case 11:case 14:case 15:Pa(4,$,$.return);break;case 1:Ii($,$.return);var ae=$.stateNode;if(typeof ae.componentWillUnmount=="function"){u=$,a=$.return;try{r=u,ae.props=r.memoizedProps,ae.state=r.memoizedState,ae.componentWillUnmount()}catch(oe){it(u,a,oe)}}break;case 5:Ii($,$.return);break;case 22:if($.memoizedState!==null){Wd(G);continue}}re!==null?(re.return=$,se=re):Wd(G)}Q=Q.sibling}e:for(Q=null,G=t;;){if(G.tag===5){if(Q===null){Q=G;try{h=G.stateNode,U?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(E=G.stateNode,C=G.memoizedProps.style,y=C!=null&&C.hasOwnProperty("display")?C.display:null,E.style.display=Ji("display",y))}catch(oe){it(t,t.return,oe)}}}else if(G.tag===6){if(Q===null)try{G.stateNode.nodeValue=U?"":G.memoizedProps}catch(oe){it(t,t.return,oe)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===t)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===t)break e;for(;G.sibling===null;){if(G.return===null||G.return===t)break e;Q===G&&(Q=null),G=G.return}Q===G&&(Q=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:qn(r,t),nr(t),u&4&&Kd(t);break;case 21:break;default:qn(r,t),nr(t)}}function nr(t){var r=t.flags;if(r&2){try{e:{for(var a=t.return;a!==null;){if(Bd(a)){var u=a;break e}a=a.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Ar(h,""),u.flags&=-33);var p=qd(t);kc(t,p,h);break;case 3:case 4:var y=u.stateNode.containerInfo,E=qd(t);Ec(t,E,y);break;default:throw Error(n(161))}}catch(C){it(t,t.return,C)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Dy(t,r,a){se=t,Hd(t)}function Hd(t,r,a){for(var u=(t.mode&1)!==0;se!==null;){var h=se,p=h.child;if(h.tag===22&&u){var y=h.memoizedState!==null||ul;if(!y){var E=h.alternate,C=E!==null&&E.memoizedState!==null||Ft;E=ul;var U=Ft;if(ul=y,(Ft=C)&&!U)for(se=h;se!==null;)y=se,C=y.child,y.tag===22&&y.memoizedState!==null?Yd(h):C!==null?(C.return=y,se=C):Yd(h);for(;p!==null;)se=p,Hd(p),p=p.sibling;se=h,ul=E,Ft=U}Gd(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,se=p):Gd(t)}}function Gd(t){for(;se!==null;){var r=se;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Ft||cl(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Ft)if(a===null)u.componentDidMount();else{var h=r.elementType===r.type?a.memoizedProps:jn(r.type,a.memoizedProps);u.componentDidUpdate(h,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Gf(r,p,u);break;case 3:var y=r.updateQueue;if(y!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Gf(r,y,a)}break;case 5:var E=r.stateNode;if(a===null&&r.flags&4){a=E;var C=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&a.focus();break;case"img":C.src&&(a.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var Q=U.memoizedState;if(Q!==null){var G=Q.dehydrated;G!==null&&Un(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ft||r.flags&512&&bc(r)}catch($){it(r,r.return,$)}}if(r===t){se=null;break}if(a=r.sibling,a!==null){a.return=r.return,se=a;break}se=r.return}}function Wd(t){for(;se!==null;){var r=se;if(r===t){se=null;break}var a=r.sibling;if(a!==null){a.return=r.return,se=a;break}se=r.return}}function Yd(t){for(;se!==null;){var r=se;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{cl(4,r)}catch(C){it(r,a,C)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(C){it(r,h,C)}}var p=r.return;try{bc(r)}catch(C){it(r,p,C)}break;case 5:var y=r.return;try{bc(r)}catch(C){it(r,y,C)}}}catch(C){it(r,r.return,C)}if(r===t){se=null;break}var E=r.sibling;if(E!==null){E.return=r.return,se=E;break}se=r.return}}var Ly=Math.ceil,hl=ve.ReactCurrentDispatcher,Sc=ve.ReactCurrentOwner,Cn=ve.ReactCurrentBatchConfig,Oe=0,_t=null,ct=null,At=0,dn=0,Ai=Br(0),vt=0,Ma=null,Rs=0,fl=0,_c=0,Ua=null,Zt=null,Tc=0,Ri=1/0,kr=null,dl=!1,Cc=null,Gr=null,pl=!1,Wr=null,gl=0,Fa=0,xc=null,ml=-1,yl=0;function Qt(){return(Oe&6)!==0?He():ml!==-1?ml:ml=He()}function Yr(t){return(t.mode&1)===0?1:(Oe&2)!==0&&At!==0?At&-At:my.transition!==null?(yl===0&&(yl=ws()),yl):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:fa(t.type)),t)}function $n(t,r,a,u){if(50<Fa)throw Fa=0,xc=null,Error(n(185));Or(t,a,u),((Oe&2)===0||t!==_t)&&(t===_t&&((Oe&2)===0&&(fl|=a),vt===4&&Jr(t,At)),en(t,u),a===1&&Oe===0&&(r.mode&1)===0&&(Ri=He()+500,Ko&&$r()))}function en(t,r){var a=t.callbackNode;cr(t,r);var u=vs(t,t===_t?At:0);if(u===0)a!==null&&oa(a),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(a!=null&&oa(a),r===1)t.tag===0?gy(Xd.bind(null,t)):Mf(Xd.bind(null,t)),hy(function(){(Oe&6)===0&&$r()}),a=null;else{switch(Mr(u)){case 1:a=ms;break;case 4:a=Rr;break;case 16:a=wn;break;case 536870912:a=yo;break;default:a=wn}a=ap(a,Jd.bind(null,t))}t.callbackPriority=r,t.callbackNode=a}}function Jd(t,r){if(ml=-1,yl=0,(Oe&6)!==0)throw Error(n(327));var a=t.callbackNode;if(Di()&&t.callbackNode!==a)return null;var u=vs(t,t===_t?At:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||r)r=vl(t,u);else{r=u;var h=Oe;Oe|=2;var p=ep();(_t!==t||At!==r)&&(kr=null,Ri=He()+500,Ls(t,r));do try{My();break}catch(E){Zd(t,E)}while(!0);Qu(),hl.current=p,Oe=h,ct!==null?r=0:(_t=null,At=0,r=vt)}if(r!==0){if(r===2&&(h=ln(t),h!==0&&(u=h,r=Nc(t,h))),r===1)throw a=Ma,Ls(t,0),Jr(t,u),en(t,He()),a;if(r===6)Jr(t,u);else{if(h=t.current.alternate,(u&30)===0&&!Oy(h)&&(r=vl(t,u),r===2&&(p=ln(t),p!==0&&(u=p,r=Nc(t,p))),r===1))throw a=Ma,Ls(t,0),Jr(t,u),en(t,He()),a;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Os(t,Zt,kr);break;case 3:if(Jr(t,u),(u&130023424)===u&&(r=Tc+500-He(),10<r)){if(vs(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){Qt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Pu(Os.bind(null,t,Zt,kr),r);break}Os(t,Zt,kr);break;case 4:if(Jr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var y=31-qt(u);p=1<<y,y=r[y],y>h&&(h=y),u&=~p}if(u=h,u=He()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Ly(u/1960))-u,10<u){t.timeoutHandle=Pu(Os.bind(null,t,Zt,kr),u);break}Os(t,Zt,kr);break;case 5:Os(t,Zt,kr);break;default:throw Error(n(329))}}}return en(t,He()),t.callbackNode===a?Jd.bind(null,t):null}function Nc(t,r){var a=Ua;return t.current.memoizedState.isDehydrated&&(Ls(t,r).flags|=256),t=vl(t,r),t!==2&&(r=Zt,Zt=a,r!==null&&Ic(r)),t}function Ic(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function Oy(t){for(var r=t;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var h=a[u],p=h.getSnapshot;h=h.value;try{if(!zn(p(),h))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Jr(t,r){for(r&=~_c,r&=~fl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var a=31-qt(r),u=1<<a;t[a]=-1,r&=~u}}function Xd(t){if((Oe&6)!==0)throw Error(n(327));Di();var r=vs(t,0);if((r&1)===0)return en(t,He()),null;var a=vl(t,r);if(t.tag!==0&&a===2){var u=ln(t);u!==0&&(r=u,a=Nc(t,u))}if(a===1)throw a=Ma,Ls(t,0),Jr(t,r),en(t,He()),a;if(a===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Os(t,Zt,kr),en(t,He()),null}function Ac(t,r){var a=Oe;Oe|=1;try{return t(r)}finally{Oe=a,Oe===0&&(Ri=He()+500,Ko&&$r())}}function Ds(t){Wr!==null&&Wr.tag===0&&(Oe&6)===0&&Di();var r=Oe;Oe|=1;var a=Cn.transition,u=Ae;try{if(Cn.transition=null,Ae=1,t)return t()}finally{Ae=u,Cn.transition=a,Oe=r,(Oe&6)===0&&$r()}}function Rc(){dn=Ai.current,Je(Ai)}function Ls(t,r){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;if(a!==-1&&(t.timeoutHandle=-1,cy(a)),ct!==null)for(a=ct.return;a!==null;){var u=a;switch(ju(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&qo();break;case 3:xi(),Je(Yt),Je(Pt),ec();break;case 5:Xu(u);break;case 4:xi();break;case 13:Je(tt);break;case 19:Je(tt);break;case 10:Hu(u.type._context);break;case 22:case 23:Rc()}a=a.return}if(_t=t,ct=t=Xr(t.current,null),At=dn=r,vt=0,Ma=null,_c=fl=Rs=0,Zt=Ua=null,Ns!==null){for(r=0;r<Ns.length;r++)if(a=Ns[r],u=a.interleaved,u!==null){a.interleaved=null;var h=u.next,p=a.pending;if(p!==null){var y=p.next;p.next=h,u.next=y}a.pending=u}Ns=null}return t}function Zd(t,r){do{var a=ct;try{if(Qu(),tl.current=il,nl){for(var u=nt.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}nl=!1}if(As=0,St=yt=nt=null,Aa=!1,Ra=0,Sc.current=null,a===null||a.return===null){vt=1,Ma=r,ct=null;break}e:{var p=t,y=a.return,E=a,C=r;if(r=At,E.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var U=C,Q=E,G=Q.tag;if((Q.mode&1)===0&&(G===0||G===11||G===15)){var $=Q.alternate;$?(Q.updateQueue=$.updateQueue,Q.memoizedState=$.memoizedState,Q.lanes=$.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var re=Sd(y);if(re!==null){re.flags&=-257,_d(re,y,E,p,r),re.mode&1&&kd(p,U,r),r=re,C=U;var ae=r.updateQueue;if(ae===null){var oe=new Set;oe.add(C),r.updateQueue=oe}else ae.add(C);break e}else{if((r&1)===0){kd(p,U,r),Dc();break e}C=Error(n(426))}}else if(Ze&&E.mode&1){var ot=Sd(y);if(ot!==null){(ot.flags&65536)===0&&(ot.flags|=256),_d(ot,y,E,p,r),$u(Ni(C,E));break e}}p=C=Ni(C,E),vt!==4&&(vt=2),Ua===null?Ua=[p]:Ua.push(p),p=y;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var P=bd(p,C,r);Hf(p,P);break e;case 1:E=C;var x=p.type,M=p.stateNode;if((p.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Gr===null||!Gr.has(M)))){p.flags|=65536,r&=-r,p.lanes|=r;var Y=Ed(p,E,r);Hf(p,Y);break e}}p=p.return}while(p!==null)}np(a)}catch(ue){r=ue,ct===a&&a!==null&&(ct=a=a.return);continue}break}while(!0)}function ep(){var t=hl.current;return hl.current=il,t===null?il:t}function Dc(){(vt===0||vt===3||vt===2)&&(vt=4),_t===null||(Rs&268435455)===0&&(fl&268435455)===0||Jr(_t,At)}function vl(t,r){var a=Oe;Oe|=2;var u=ep();(_t!==t||At!==r)&&(kr=null,Ls(t,r));do try{Py();break}catch(h){Zd(t,h)}while(!0);if(Qu(),Oe=a,hl.current=u,ct!==null)throw Error(n(261));return _t=null,At=0,vt}function Py(){for(;ct!==null;)tp(ct)}function My(){for(;ct!==null&&!go();)tp(ct)}function tp(t){var r=ip(t.alternate,t,dn);t.memoizedProps=t.pendingProps,r===null?np(t):ct=r,Sc.current=null}function np(t){var r=t;do{var a=r.alternate;if(t=r.return,(r.flags&32768)===0){if(a=Ny(a,r,dn),a!==null){ct=a;return}}else{if(a=Iy(a,r),a!==null){a.flags&=32767,ct=a;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,ct=null;return}}if(r=r.sibling,r!==null){ct=r;return}ct=r=t}while(r!==null);vt===0&&(vt=5)}function Os(t,r,a){var u=Ae,h=Cn.transition;try{Cn.transition=null,Ae=1,Uy(t,r,a,u)}finally{Cn.transition=h,Ae=u}return null}function Uy(t,r,a,u){do Di();while(Wr!==null);if((Oe&6)!==0)throw Error(n(327));a=t.finishedWork;var h=t.finishedLanes;if(a===null)return null;if(t.finishedWork=null,t.finishedLanes=0,a===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=a.lanes|a.childLanes;if(qe(t,p),t===_t&&(ct=_t=null,At=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||pl||(pl=!0,ap(wn,function(){return Di(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=Cn.transition,Cn.transition=null;var y=Ae;Ae=1;var E=Oe;Oe|=4,Sc.current=null,Ry(t,a),Qd(a,t),ry(Lu),Fr=!!Du,Lu=Du=null,t.current=a,Dy(a),mu(),Oe=E,Ae=y,Cn.transition=p}else t.current=a;if(pl&&(pl=!1,Wr=t,gl=h),p=t.pendingLanes,p===0&&(Gr=null),vo(a.stateNode),en(t,He()),r!==null)for(u=t.onRecoverableError,a=0;a<r.length;a++)h=r[a],u(h.value,{componentStack:h.stack,digest:h.digest});if(dl)throw dl=!1,t=Cc,Cc=null,t;return(gl&1)!==0&&t.tag!==0&&Di(),p=t.pendingLanes,(p&1)!==0?t===xc?Fa++:(Fa=0,xc=t):Fa=0,$r(),null}function Di(){if(Wr!==null){var t=Mr(gl),r=Cn.transition,a=Ae;try{if(Cn.transition=null,Ae=16>t?16:t,Wr===null)var u=!1;else{if(t=Wr,Wr=null,gl=0,(Oe&6)!==0)throw Error(n(331));var h=Oe;for(Oe|=4,se=t.current;se!==null;){var p=se,y=p.child;if((se.flags&16)!==0){var E=p.deletions;if(E!==null){for(var C=0;C<E.length;C++){var U=E[C];for(se=U;se!==null;){var Q=se;switch(Q.tag){case 0:case 11:case 15:Pa(8,Q,p)}var G=Q.child;if(G!==null)G.return=Q,se=G;else for(;se!==null;){Q=se;var $=Q.sibling,re=Q.return;if(jd(Q),Q===U){se=null;break}if($!==null){$.return=re,se=$;break}se=re}}}var ae=p.alternate;if(ae!==null){var oe=ae.child;if(oe!==null){ae.child=null;do{var ot=oe.sibling;oe.sibling=null,oe=ot}while(oe!==null)}}se=p}}if((p.subtreeFlags&2064)!==0&&y!==null)y.return=p,se=y;else e:for(;se!==null;){if(p=se,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Pa(9,p,p.return)}var P=p.sibling;if(P!==null){P.return=p.return,se=P;break e}se=p.return}}var x=t.current;for(se=x;se!==null;){y=se;var M=y.child;if((y.subtreeFlags&2064)!==0&&M!==null)M.return=y,se=M;else e:for(y=x;se!==null;){if(E=se,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:cl(9,E)}}catch(ue){it(E,E.return,ue)}if(E===y){se=null;break e}var Y=E.sibling;if(Y!==null){Y.return=E.return,se=Y;break e}se=E.return}}if(Oe=h,$r(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(ys,t)}catch{}u=!0}return u}finally{Ae=a,Cn.transition=r}}return!1}function rp(t,r,a){r=Ni(a,r),r=bd(t,r,1),t=Qr(t,r,1),r=Qt(),t!==null&&(Or(t,1,r),en(t,r))}function it(t,r,a){if(t.tag===3)rp(t,t,a);else for(;r!==null;){if(r.tag===3){rp(r,t,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Gr===null||!Gr.has(u))){t=Ni(a,t),t=Ed(r,t,1),r=Qr(r,t,1),t=Qt(),r!==null&&(Or(r,1,t),en(r,t));break}}r=r.return}}function Fy(t,r,a){var u=t.pingCache;u!==null&&u.delete(r),r=Qt(),t.pingedLanes|=t.suspendedLanes&a,_t===t&&(At&a)===a&&(vt===4||vt===3&&(At&130023424)===At&&500>He()-Tc?Ls(t,0):_c|=a),en(t,r)}function sp(t,r){r===0&&((t.mode&1)===0?r=1:(r=ti,ti<<=1,(ti&130023424)===0&&(ti=4194304)));var a=Qt();t=wr(t,r),t!==null&&(Or(t,r,a),en(t,a))}function zy(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),sp(t,a)}function Vy(t,r){var a=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),sp(t,a)}var ip;ip=function(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps||Yt.current)Xt=!0;else{if((t.lanes&a)===0&&(r.flags&128)===0)return Xt=!1,xy(t,r,a);Xt=(t.flags&131072)!==0}else Xt=!1,Ze&&(r.flags&1048576)!==0&&Uf(r,Ho,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;ll(t,r),t=r.pendingProps;var h=bi(r,Pt.current);Ci(r,a),h=rc(null,r,u,t,h,a);var p=sc();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Jt(u)?(p=!0,$o(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Yu(r),h.updater=al,r.stateNode=h,h._reactInternals=r,cc(r,u,t,a),r=pc(null,r,u,!0,p,a)):(r.tag=0,Ze&&p&&Vu(r),Kt(null,r,h,a),r=r.child),r;case 16:u=r.elementType;e:{switch(ll(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=By(u),t=jn(u,t),h){case 0:r=dc(null,r,u,t,a);break e;case 1:r=Ad(null,r,u,t,a);break e;case 11:r=Td(null,r,u,t,a);break e;case 14:r=Cd(null,r,u,jn(u.type,t),a);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:jn(u,h),dc(t,r,u,h,a);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:jn(u,h),Ad(t,r,u,h,a);case 3:e:{if(Rd(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,Qf(t,r),Zo(r,u,null,a);var y=r.memoizedState;if(u=y.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Ni(Error(n(423)),r),r=Dd(t,r,u,a,h);break e}else if(u!==h){h=Ni(Error(n(424)),r),r=Dd(t,r,u,a,h);break e}else for(fn=jr(r.stateNode.containerInfo.firstChild),hn=r,Ze=!0,Vn=null,a=$f(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Si(),u===h){r=Er(t,r,a);break e}Kt(t,r,u,a)}r=r.child}return r;case 5:return Wf(r),t===null&&qu(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,y=h.children,Ou(u,h)?y=null:p!==null&&Ou(u,p)&&(r.flags|=32),Id(t,r),Kt(t,r,y,a),r.child;case 6:return t===null&&qu(r),null;case 13:return Ld(t,r,a);case 4:return Ju(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=_i(r,null,u,a):Kt(t,r,u,a),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:jn(u,h),Td(t,r,u,h,a);case 7:return Kt(t,r,r.pendingProps,a),r.child;case 8:return Kt(t,r,r.pendingProps.children,a),r.child;case 12:return Kt(t,r,r.pendingProps.children,a),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,y=h.value,Ge(Yo,u._currentValue),u._currentValue=y,p!==null)if(zn(p.value,y)){if(p.children===h.children&&!Yt.current){r=Er(t,r,a);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var E=p.dependencies;if(E!==null){y=p.child;for(var C=E.firstContext;C!==null;){if(C.context===u){if(p.tag===1){C=br(-1,a&-a),C.tag=2;var U=p.updateQueue;if(U!==null){U=U.shared;var Q=U.pending;Q===null?C.next=C:(C.next=Q.next,Q.next=C),U.pending=C}}p.lanes|=a,C=p.alternate,C!==null&&(C.lanes|=a),Gu(p.return,a,r),E.lanes|=a;break}C=C.next}}else if(p.tag===10)y=p.type===r.type?null:p.child;else if(p.tag===18){if(y=p.return,y===null)throw Error(n(341));y.lanes|=a,E=y.alternate,E!==null&&(E.lanes|=a),Gu(y,a,r),y=p.sibling}else y=p.child;if(y!==null)y.return=p;else for(y=p;y!==null;){if(y===r){y=null;break}if(p=y.sibling,p!==null){p.return=y.return,y=p;break}y=y.return}p=y}Kt(t,r,h.children,a),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,Ci(r,a),h=_n(h),u=u(h),r.flags|=1,Kt(t,r,u,a),r.child;case 14:return u=r.type,h=jn(u,r.pendingProps),h=jn(u.type,h),Cd(t,r,u,h,a);case 15:return xd(t,r,r.type,r.pendingProps,a);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:jn(u,h),ll(t,r),r.tag=1,Jt(u)?(t=!0,$o(r)):t=!1,Ci(r,a),vd(r,u,h),cc(r,u,h,a),pc(null,r,u,!0,t,a);case 19:return Pd(t,r,a);case 22:return Nd(t,r,a)}throw Error(n(156,r.tag))};function ap(t,r){return Zs(t,r)}function jy(t,r,a,u){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,r,a,u){return new jy(t,r,a,u)}function Lc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function By(t){if(typeof t=="function")return Lc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===D)return 11;if(t===ft)return 14}return 2}function Xr(t,r){var a=t.alternate;return a===null?(a=xn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&14680064,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a}function wl(t,r,a,u,h,p){var y=2;if(u=t,typeof t=="function")Lc(t)&&(y=1);else if(typeof t=="string")y=5;else e:switch(t){case I:return Ps(a.children,h,p,r);case k:y=8,h|=8;break;case T:return t=xn(12,a,r,h|2),t.elementType=T,t.lanes=p,t;case S:return t=xn(13,a,r,h),t.elementType=S,t.lanes=p,t;case Ke:return t=xn(19,a,r,h),t.elementType=Ke,t.lanes=p,t;case Ve:return bl(a,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case N:y=10;break e;case A:y=9;break e;case D:y=11;break e;case ft:y=14;break e;case dt:y=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=xn(y,a,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function Ps(t,r,a,u){return t=xn(7,t,u,r),t.lanes=a,t}function bl(t,r,a,u){return t=xn(22,t,u,r),t.elementType=Ve,t.lanes=a,t.stateNode={isHidden:!1},t}function Oc(t,r,a){return t=xn(6,t,null,r),t.lanes=a,t}function Pc(t,r,a){return r=xn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function qy(t,r,a,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lr(0),this.expirationTimes=Lr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Mc(t,r,a,u,h,p,y,E,C){return t=new qy(t,r,a,E,C),r===1?(r=1,p===!0&&(r|=8)):r=0,p=xn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yu(p),t}function $y(t,r,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Re,key:u==null?null:""+u,children:t,containerInfo:r,implementation:a}}function op(t){if(!t)return qr;t=t._reactInternals;e:{if(Dn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Jt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var a=t.type;if(Jt(a))return Of(t,a,r)}return r}function lp(t,r,a,u,h,p,y,E,C){return t=Mc(a,u,!0,t,h,p,y,E,C),t.context=op(null),a=t.current,u=Qt(),h=Yr(a),p=br(u,h),p.callback=r??null,Qr(a,p,h),t.current.lanes=h,Or(t,h,u),en(t,u),t}function El(t,r,a,u){var h=r.current,p=Qt(),y=Yr(h);return a=op(a),r.context===null?r.context=a:r.pendingContext=a,r=br(p,y),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=Qr(h,r,y),t!==null&&($n(t,h,y,p),Xo(t,h,y)),y}function kl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function up(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Uc(t,r){up(t,r),(t=t.alternate)&&up(t,r)}function Ky(){return null}var cp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fc(t){this._internalRoot=t}Sl.prototype.render=Fc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));El(t,r,null,null)},Sl.prototype.unmount=Fc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Ds(function(){El(null,t,null,null)}),r[gr]=null}};function Sl(t){this._internalRoot=t}Sl.prototype.unstable_scheduleHydration=function(t){if(t){var r=So();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Wn.length&&r!==0&&r<Wn[a].priority;a++);Wn.splice(a,0,t),a===0&&Co(t)}};function zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hp(){}function Qy(t,r,a,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var U=kl(y);p.call(U)}}var y=lp(r,u,t,0,null,!1,!1,"",hp);return t._reactRootContainer=y,t[gr]=y.current,ka(t.nodeType===8?t.parentNode:t),Ds(),y}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var E=u;u=function(){var U=kl(C);E.call(U)}}var C=Mc(t,0,!1,null,null,!1,!1,"",hp);return t._reactRootContainer=C,t[gr]=C.current,ka(t.nodeType===8?t.parentNode:t),Ds(function(){El(r,C,a,u)}),C}function Tl(t,r,a,u,h){var p=a._reactRootContainer;if(p){var y=p;if(typeof h=="function"){var E=h;h=function(){var C=kl(y);E.call(C)}}El(r,y,t,h)}else y=Qy(a,r,t,h,u);return kl(y)}Eo=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var a=Dr(r.pendingLanes);a!==0&&(Pr(r,a|1),en(r,He()),(Oe&6)===0&&(Ri=He()+500,$r()))}break;case 13:Ds(function(){var u=wr(t,1);if(u!==null){var h=Qt();$n(u,t,1,h)}}),Uc(t,1)}},ni=function(t){if(t.tag===13){var r=wr(t,134217728);if(r!==null){var a=Qt();$n(r,t,134217728,a)}Uc(t,134217728)}},ko=function(t){if(t.tag===13){var r=Yr(t),a=wr(t,r);if(a!==null){var u=Qt();$n(a,t,r,u)}Uc(t,r)}},So=function(){return Ae},_o=function(t,r){var a=Ae;try{return Ae=t,r()}finally{Ae=a}},Hs=function(t,r,a){switch(r){case"input":if(Nn(t,a),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==t&&u.form===t.form){var h=Bo(u);if(!h)throw Error(n(90));Qe(u),Nn(u,h)}}}break;case"textarea":Ks(t,a);break;case"select":r=a.value,r!=null&&an(t,!!a.multiple,r,!1)}},fs=Ac,ra=Ds;var Hy={usingClientEntryPoint:!1,Events:[Ta,vi,Bo,Hn,na,Ac]},za={findFiberByHostInstance:_s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gy={bundleType:za.bundleType,version:za.version,rendererPackageName:za.rendererPackageName,rendererConfig:za.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ve.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=aa(t),t===null?null:t.stateNode},findFiberByHostInstance:za.findFiberByHostInstance||Ky,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{ys=Cl.inject(Gy),on=Cl}catch{}}return tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hy,tn.createPortal=function(t,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zc(r))throw Error(n(200));return $y(t,r,null,a)},tn.createRoot=function(t,r){if(!zc(t))throw Error(n(299));var a=!1,u="",h=cp;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Mc(t,1,!1,null,null,a,!1,u,h),t[gr]=r.current,ka(t.nodeType===8?t.parentNode:t),new Fc(r)},tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=aa(r),t=t===null?null:t.stateNode,t},tn.flushSync=function(t){return Ds(t)},tn.hydrate=function(t,r,a){if(!_l(r))throw Error(n(200));return Tl(null,t,r,!0,a)},tn.hydrateRoot=function(t,r,a){if(!zc(t))throw Error(n(405));var u=a!=null&&a.hydratedSources||null,h=!1,p="",y=cp;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),r=lp(r,null,t,1,a??null,h,!1,p,y),t[gr]=r.current,ka(t),u)for(t=0;t<u.length;t++)a=u[t],h=a._getVersion,h=h(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,h]:r.mutableSourceEagerHydrationData.push(a,h);return new Sl(r)},tn.render=function(t,r,a){if(!_l(r))throw Error(n(200));return Tl(null,t,r,!1,a)},tn.unmountComponentAtNode=function(t){if(!_l(t))throw Error(n(40));return t._reactRootContainer?(Ds(function(){Tl(null,null,t,!1,function(){t._reactRootContainer=null,t[gr]=null})}),!0):!1},tn.unstable_batchedUpdates=Ac,tn.unstable_renderSubtreeIntoContainer=function(t,r,a,u){if(!_l(a))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Tl(t,r,a,!1,u)},tn.version="18.3.1-next-f1338f8080-20240426",tn}var Sp;function rv(){if(Sp)return Vc.exports;Sp=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Vc.exports=nv(),Vc.exports}var _p;function sv(){if(_p)return xl;_p=1;var s=rv();return xl.createRoot=s.createRoot,xl.hydrateRoot=s.hydrateRoot,xl}var iv=sv();const av=wg(iv);var Tp={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bg=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},ov=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const o=s[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],f=s[n++],m=s[n++],v=((o&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(v>>10)),e[i++]=String.fromCharCode(56320+(v&1023))}else{const c=s[n++],f=s[n++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|f&63)}}return e.join("")},Eg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const c=s[o],f=o+1<s.length,m=f?s[o+1]:0,v=o+2<s.length,b=v?s[o+2]:0,_=c>>2,O=(c&3)<<4|m>>4;let F=(m&15)<<2|b>>6,q=b&63;v||(q=64,f||(F=64)),i.push(n[_],n[O],n[F],n[q])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(bg(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):ov(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],f=o<s.length?n[s.charAt(o)]:0;++o;const m=o<s.length?n[s.charAt(o)]:64;++o;const v=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||f==null||m==null||v==null)throw new lv;const b=c<<2|f>>4;if(i.push(b),m!==64){const _=f<<4&240|m>>2;if(i.push(_),v!==64){const O=m<<6&192|v;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class lv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uv=function(s){const e=bg(s);return Eg.encodeByteArray(e,!0)},zl=function(s){return uv(s).replace(/\./g,"")},cv=function(s){try{return Eg.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fv=()=>hv().__FIREBASE_DEFAULTS__,dv=()=>{if(typeof process>"u"||typeof Tp>"u")return;const s=Tp.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},pv=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&cv(s[1]);return e&&JSON.parse(e)},wh=()=>{try{return fv()||dv()||pv()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},gv=s=>{var e,n;return(n=(e=wh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[s]},mv=s=>{const e=gv(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},kg=()=>{var s;return(s=wh())===null||s===void 0?void 0:s.config};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vv(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},s);return[zl(JSON.stringify(n)),zl(JSON.stringify(f)),""].join(".")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bv(){var s;const e=(s=wh())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ev(){return!bv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kv(){try{return typeof indexedDB=="object"}catch{return!1}}function Sv(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const _v="FirebaseError";class Ki extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=_v,Object.setPrototypeOf(this,Ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sg.prototype.create)}}class Sg{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],f=c?Tv(c,i):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Ki(o,m,i)}}function Tv(s,e){return s.replace(Cv,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Cv=/\{\$([^}]+)}/g;function Jc(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const c=s[o],f=e[o];if(Cp(c)&&Cp(f)){if(!Jc(c,f))return!1}else if(c!==f)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Cp(s){return s!==null&&typeof s=="object"}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ir(s){return s&&s._delegate?s._delegate:s}class Ya{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ms="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new yv;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Iv(e))try{this.getOrInitializeService({instanceIdentifier:Ms})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=Ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ms){return this.instances.has(e)}getOptions(e=Ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);i===m&&f.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),c=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(o,c);const f=this.instances.get(o);return f&&e(f,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Nv(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ms){return this.component?this.component.multipleInstances?e:Ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Nv(s){return s===Ms?void 0:s}function Iv(s){return s.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Av{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pe||(Pe={}));const Rv={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},Dv=Pe.INFO,Lv={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},Ov=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=Lv[e];if(o)console[o](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _g{constructor(e){this.name=e,this._logLevel=Dv,this._logHandler=Ov,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Rv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const Pv=(s,e)=>e.some(n=>s instanceof n);let xp,Np;function Mv(){return xp||(xp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Uv(){return Np||(Np=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tg=new WeakMap,Xc=new WeakMap,Cg=new WeakMap,jc=new WeakMap,bh=new WeakMap;function Fv(s){const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",f)},c=()=>{n(ns(s.result)),o()},f=()=>{i(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&Tg.set(n,s)}).catch(()=>{}),bh.set(e,s),e}function zv(s){if(Xc.has(s))return;const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",f),s.removeEventListener("abort",f)},c=()=>{n(),o()},f=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",f),s.addEventListener("abort",f)});Xc.set(s,e)}let Zc={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Xc.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Cg.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ns(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Vv(s){Zc=s(Zc)}function jv(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(Bc(this),e,...n);return Cg.set(i,e.sort?e.sort():[e]),ns(i)}:Uv().includes(s)?function(...e){return s.apply(Bc(this),e),ns(Tg.get(this))}:function(...e){return ns(s.apply(Bc(this),e))}}function Bv(s){return typeof s=="function"?jv(s):(s instanceof IDBTransaction&&zv(s),Pv(s,Mv())?new Proxy(s,Zc):s)}function ns(s){if(s instanceof IDBRequest)return Fv(s);if(jc.has(s))return jc.get(s);const e=Bv(s);return e!==s&&(jc.set(s,e),bh.set(e,s)),e}const Bc=s=>bh.get(s);function qv(s,e,{blocked:n,upgrade:i,blocking:o,terminated:c}={}){const f=indexedDB.open(s,e),m=ns(f);return i&&f.addEventListener("upgradeneeded",v=>{i(ns(f.result),v.oldVersion,v.newVersion,ns(f.transaction),v)}),n&&f.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),m.then(v=>{c&&v.addEventListener("close",()=>c()),o&&v.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),m}const $v=["get","getKey","getAll","getAllKeys","count"],Kv=["put","add","delete","clear"],qc=new Map;function Ip(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(qc.get(e))return qc.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=Kv.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||$v.includes(n)))return;const c=async function(f,...m){const v=this.transaction(f,o?"readwrite":"readonly");let b=v.store;return i&&(b=b.index(m.shift())),(await Promise.all([b[n](...m),o&&v.done]))[0]};return qc.set(e,c),c}Vv(s=>({...s,get:(e,n,i)=>Ip(e,n)||s.get(e,n,i),has:(e,n)=>!!Ip(e,n)||s.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Hv(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function Hv(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const eh="@firebase/app",Ap="0.10.13";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const _r=new _g("@firebase/app"),Gv="@firebase/app-compat",Wv="@firebase/analytics-compat",Yv="@firebase/analytics",Jv="@firebase/app-check-compat",Xv="@firebase/app-check",Zv="@firebase/auth",e0="@firebase/auth-compat",t0="@firebase/database",n0="@firebase/data-connect",r0="@firebase/database-compat",s0="@firebase/functions",i0="@firebase/functions-compat",a0="@firebase/installations",o0="@firebase/installations-compat",l0="@firebase/messaging",u0="@firebase/messaging-compat",c0="@firebase/performance",h0="@firebase/performance-compat",f0="@firebase/remote-config",d0="@firebase/remote-config-compat",p0="@firebase/storage",g0="@firebase/storage-compat",m0="@firebase/firestore",y0="@firebase/vertexai-preview",v0="@firebase/firestore-compat",w0="firebase",b0="10.14.1";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const th="[DEFAULT]",E0={[eh]:"fire-core",[Gv]:"fire-core-compat",[Yv]:"fire-analytics",[Wv]:"fire-analytics-compat",[Xv]:"fire-app-check",[Jv]:"fire-app-check-compat",[Zv]:"fire-auth",[e0]:"fire-auth-compat",[t0]:"fire-rtdb",[n0]:"fire-data-connect",[r0]:"fire-rtdb-compat",[s0]:"fire-fn",[i0]:"fire-fn-compat",[a0]:"fire-iid",[o0]:"fire-iid-compat",[l0]:"fire-fcm",[u0]:"fire-fcm-compat",[c0]:"fire-perf",[h0]:"fire-perf-compat",[f0]:"fire-rc",[d0]:"fire-rc-compat",[p0]:"fire-gcs",[g0]:"fire-gcs-compat",[m0]:"fire-fst",[v0]:"fire-fst-compat",[y0]:"fire-vertex","fire-js":"fire-js",[w0]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Vl=new Map,k0=new Map,nh=new Map;function Rp(s,e){try{s.container.addComponent(e)}catch(n){_r.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function jl(s){const e=s.name;if(nh.has(e))return _r.debug(`There were multiple attempts to register component ${e}.`),!1;nh.set(e,s);for(const n of Vl.values())Rp(n,s);for(const n of k0.values())Rp(n,s);return!0}function S0(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const _0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rs=new Sg("app","Firebase",_0);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class T0{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rs.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const C0=b0;function xg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:th,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw rs.create("bad-app-name",{appName:String(o)});if(n||(n=kg()),!n)throw rs.create("no-options");const c=Vl.get(o);if(c){if(Jc(n,c.options)&&Jc(i,c.config))return c;throw rs.create("duplicate-app",{appName:o})}const f=new Av(o);for(const v of nh.values())f.addComponent(v);const m=new T0(n,i,f);return Vl.set(o,m),m}function x0(s=th){const e=Vl.get(s);if(!e&&s===th&&kg())return xg();if(!e)throw rs.create("no-app",{appName:s});return e}function Mi(s,e,n){var i;let o=(i=E0[s])!==null&&i!==void 0?i:s;n&&(o+=`-${n}`);const c=o.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const m=[`Unable to register library "${o}" with version "${e}":`];c&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_r.warn(m.join(" "));return}jl(new Ya(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const N0="firebase-heartbeat-database",I0=1,Ja="firebase-heartbeat-store";let $c=null;function Ng(){return $c||($c=qv(N0,I0,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Ja)}catch(n){console.warn(n)}}}}).catch(s=>{throw rs.create("idb-open",{originalErrorMessage:s.message})})),$c}async function A0(s){try{const e=(await Ng()).transaction(Ja),n=await e.objectStore(Ja).get(Ig(s));return await e.done,n}catch(e){if(e instanceof Ki)_r.warn(e.message);else{const n=rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_r.warn(n.message)}}}async function Dp(s,e){try{const n=(await Ng()).transaction(Ja,"readwrite");await n.objectStore(Ja).put(e,Ig(s)),await n.done}catch(n){if(n instanceof Ki)_r.warn(n.message);else{const i=rs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_r.warn(i.message)}}}function Ig(s){return`${s.name}!${s.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const R0=1024,D0=30*24*60*60*1e3;class L0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new P0(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Lp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const f=new Date(c.date).valueOf();return Date.now()-f<=D0}),this._storage.overwrite(this._heartbeatsCache))}catch(i){_r.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Lp(),{heartbeatsToSend:i,unsentEntries:o}=O0(this._heartbeatsCache.heartbeats),c=zl(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return _r.warn(n),""}}}function Lp(){return new Date().toISOString().substring(0,10)}function O0(s,e=R0){const n=[];let i=s.slice();for(const o of s){const c=n.find(f=>f.agent===o.agent);if(c){if(c.dates.push(o.date),Op(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Op(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class P0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kv()?Sv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await A0(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Dp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Dp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Op(s){return zl(JSON.stringify({version:2,heartbeats:s})).length}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function M0(s){jl(new Ya("platform-logger",e=>new Qv(e),"PRIVATE")),jl(new Ya("heartbeat",e=>new L0(e),"PRIVATE")),Mi(eh,Ap,s),Mi(eh,Ap,"esm2017"),Mi("fire-js","")}M0("");var U0="firebase",F0="10.14.1";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/Mi(U0,F0,"app");var Pp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zs,Ag;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,k){function T(){}T.prototype=k.prototype,I.D=k.prototype,I.prototype=new T,I.prototype.constructor=I,I.C=function(N,A,D){for(var S=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)S[Ke-2]=arguments[Ke];return k.prototype[A].apply(N,S)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,k,T){T||(T=0);var N=Array(16);if(typeof k=="string")for(var A=0;16>A;++A)N[A]=k.charCodeAt(T++)|k.charCodeAt(T++)<<8|k.charCodeAt(T++)<<16|k.charCodeAt(T++)<<24;else for(A=0;16>A;++A)N[A]=k[T++]|k[T++]<<8|k[T++]<<16|k[T++]<<24;k=I.g[0],T=I.g[1],A=I.g[2];var D=I.g[3],S=k+(D^T&(A^D))+N[0]+3614090360&4294967295;k=T+(S<<7&4294967295|S>>>25),S=D+(A^k&(T^A))+N[1]+3905402710&4294967295,D=k+(S<<12&4294967295|S>>>20),S=A+(T^D&(k^T))+N[2]+606105819&4294967295,A=D+(S<<17&4294967295|S>>>15),S=T+(k^A&(D^k))+N[3]+3250441966&4294967295,T=A+(S<<22&4294967295|S>>>10),S=k+(D^T&(A^D))+N[4]+4118548399&4294967295,k=T+(S<<7&4294967295|S>>>25),S=D+(A^k&(T^A))+N[5]+1200080426&4294967295,D=k+(S<<12&4294967295|S>>>20),S=A+(T^D&(k^T))+N[6]+2821735955&4294967295,A=D+(S<<17&4294967295|S>>>15),S=T+(k^A&(D^k))+N[7]+4249261313&4294967295,T=A+(S<<22&4294967295|S>>>10),S=k+(D^T&(A^D))+N[8]+1770035416&4294967295,k=T+(S<<7&4294967295|S>>>25),S=D+(A^k&(T^A))+N[9]+2336552879&4294967295,D=k+(S<<12&4294967295|S>>>20),S=A+(T^D&(k^T))+N[10]+4294925233&4294967295,A=D+(S<<17&4294967295|S>>>15),S=T+(k^A&(D^k))+N[11]+2304563134&4294967295,T=A+(S<<22&4294967295|S>>>10),S=k+(D^T&(A^D))+N[12]+1804603682&4294967295,k=T+(S<<7&4294967295|S>>>25),S=D+(A^k&(T^A))+N[13]+4254626195&4294967295,D=k+(S<<12&4294967295|S>>>20),S=A+(T^D&(k^T))+N[14]+2792965006&4294967295,A=D+(S<<17&4294967295|S>>>15),S=T+(k^A&(D^k))+N[15]+1236535329&4294967295,T=A+(S<<22&4294967295|S>>>10),S=k+(A^D&(T^A))+N[1]+4129170786&4294967295,k=T+(S<<5&4294967295|S>>>27),S=D+(T^A&(k^T))+N[6]+3225465664&4294967295,D=k+(S<<9&4294967295|S>>>23),S=A+(k^T&(D^k))+N[11]+643717713&4294967295,A=D+(S<<14&4294967295|S>>>18),S=T+(D^k&(A^D))+N[0]+3921069994&4294967295,T=A+(S<<20&4294967295|S>>>12),S=k+(A^D&(T^A))+N[5]+3593408605&4294967295,k=T+(S<<5&4294967295|S>>>27),S=D+(T^A&(k^T))+N[10]+38016083&4294967295,D=k+(S<<9&4294967295|S>>>23),S=A+(k^T&(D^k))+N[15]+3634488961&4294967295,A=D+(S<<14&4294967295|S>>>18),S=T+(D^k&(A^D))+N[4]+3889429448&4294967295,T=A+(S<<20&4294967295|S>>>12),S=k+(A^D&(T^A))+N[9]+568446438&4294967295,k=T+(S<<5&4294967295|S>>>27),S=D+(T^A&(k^T))+N[14]+3275163606&4294967295,D=k+(S<<9&4294967295|S>>>23),S=A+(k^T&(D^k))+N[3]+4107603335&4294967295,A=D+(S<<14&4294967295|S>>>18),S=T+(D^k&(A^D))+N[8]+1163531501&4294967295,T=A+(S<<20&4294967295|S>>>12),S=k+(A^D&(T^A))+N[13]+2850285829&4294967295,k=T+(S<<5&4294967295|S>>>27),S=D+(T^A&(k^T))+N[2]+4243563512&4294967295,D=k+(S<<9&4294967295|S>>>23),S=A+(k^T&(D^k))+N[7]+1735328473&4294967295,A=D+(S<<14&4294967295|S>>>18),S=T+(D^k&(A^D))+N[12]+2368359562&4294967295,T=A+(S<<20&4294967295|S>>>12),S=k+(T^A^D)+N[5]+4294588738&4294967295,k=T+(S<<4&4294967295|S>>>28),S=D+(k^T^A)+N[8]+2272392833&4294967295,D=k+(S<<11&4294967295|S>>>21),S=A+(D^k^T)+N[11]+1839030562&4294967295,A=D+(S<<16&4294967295|S>>>16),S=T+(A^D^k)+N[14]+4259657740&4294967295,T=A+(S<<23&4294967295|S>>>9),S=k+(T^A^D)+N[1]+2763975236&4294967295,k=T+(S<<4&4294967295|S>>>28),S=D+(k^T^A)+N[4]+1272893353&4294967295,D=k+(S<<11&4294967295|S>>>21),S=A+(D^k^T)+N[7]+4139469664&4294967295,A=D+(S<<16&4294967295|S>>>16),S=T+(A^D^k)+N[10]+3200236656&4294967295,T=A+(S<<23&4294967295|S>>>9),S=k+(T^A^D)+N[13]+681279174&4294967295,k=T+(S<<4&4294967295|S>>>28),S=D+(k^T^A)+N[0]+3936430074&4294967295,D=k+(S<<11&4294967295|S>>>21),S=A+(D^k^T)+N[3]+3572445317&4294967295,A=D+(S<<16&4294967295|S>>>16),S=T+(A^D^k)+N[6]+76029189&4294967295,T=A+(S<<23&4294967295|S>>>9),S=k+(T^A^D)+N[9]+3654602809&4294967295,k=T+(S<<4&4294967295|S>>>28),S=D+(k^T^A)+N[12]+3873151461&4294967295,D=k+(S<<11&4294967295|S>>>21),S=A+(D^k^T)+N[15]+530742520&4294967295,A=D+(S<<16&4294967295|S>>>16),S=T+(A^D^k)+N[2]+3299628645&4294967295,T=A+(S<<23&4294967295|S>>>9),S=k+(A^(T|~D))+N[0]+4096336452&4294967295,k=T+(S<<6&4294967295|S>>>26),S=D+(T^(k|~A))+N[7]+1126891415&4294967295,D=k+(S<<10&4294967295|S>>>22),S=A+(k^(D|~T))+N[14]+2878612391&4294967295,A=D+(S<<15&4294967295|S>>>17),S=T+(D^(A|~k))+N[5]+4237533241&4294967295,T=A+(S<<21&4294967295|S>>>11),S=k+(A^(T|~D))+N[12]+1700485571&4294967295,k=T+(S<<6&4294967295|S>>>26),S=D+(T^(k|~A))+N[3]+2399980690&4294967295,D=k+(S<<10&4294967295|S>>>22),S=A+(k^(D|~T))+N[10]+4293915773&4294967295,A=D+(S<<15&4294967295|S>>>17),S=T+(D^(A|~k))+N[1]+2240044497&4294967295,T=A+(S<<21&4294967295|S>>>11),S=k+(A^(T|~D))+N[8]+1873313359&4294967295,k=T+(S<<6&4294967295|S>>>26),S=D+(T^(k|~A))+N[15]+4264355552&4294967295,D=k+(S<<10&4294967295|S>>>22),S=A+(k^(D|~T))+N[6]+2734768916&4294967295,A=D+(S<<15&4294967295|S>>>17),S=T+(D^(A|~k))+N[13]+1309151649&4294967295,T=A+(S<<21&4294967295|S>>>11),S=k+(A^(T|~D))+N[4]+4149444226&4294967295,k=T+(S<<6&4294967295|S>>>26),S=D+(T^(k|~A))+N[11]+3174756917&4294967295,D=k+(S<<10&4294967295|S>>>22),S=A+(k^(D|~T))+N[2]+718787259&4294967295,A=D+(S<<15&4294967295|S>>>17),S=T+(D^(A|~k))+N[9]+3951481745&4294967295,I.g[0]=I.g[0]+k&4294967295,I.g[1]=I.g[1]+(A+(S<<21&4294967295|S>>>11))&4294967295,I.g[2]=I.g[2]+A&4294967295,I.g[3]=I.g[3]+D&4294967295}i.prototype.u=function(I,k){k===void 0&&(k=I.length);for(var T=k-this.blockSize,N=this.B,A=this.h,D=0;D<k;){if(A==0)for(;D<=T;)o(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<k;)if(N[A++]=I.charCodeAt(D++),A==this.blockSize){o(this,N),A=0;break}}else for(;D<k;)if(N[A++]=I[D++],A==this.blockSize){o(this,N),A=0;break}}this.h=A,this.o+=k},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var k=1;k<I.length-8;++k)I[k]=0;var T=8*this.o;for(k=I.length-8;k<I.length;++k)I[k]=T&255,T/=256;for(this.u(I),I=Array(16),k=T=0;4>k;++k)for(var N=0;32>N;N+=8)I[T++]=this.g[k]>>>N&255;return I};function c(I,k){var T=m;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=k(I)}function f(I,k){this.h=k;for(var T=[],N=!0,A=I.length-1;0<=A;A--){var D=I[A]|0;N&&D==k||(T[A]=D,N=!1)}this.g=T}var m={};function v(I){return-128<=I&&128>I?c(I,function(k){return new f([k|0],0>k?-1:0)}):new f([I|0],0>I?-1:0)}function b(I){if(isNaN(I)||!isFinite(I))return O;if(0>I)return V(b(-I));for(var k=[],T=1,N=0;I>=T;N++)k[N]=I/T|0,T*=4294967296;return new f(k,0)}function _(I,k){if(I.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(I.charAt(0)=="-")return V(_(I.substring(1),k));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=b(Math.pow(k,8)),N=O,A=0;A<I.length;A+=8){var D=Math.min(8,I.length-A),S=parseInt(I.substring(A,A+D),k);8>D?(D=b(Math.pow(k,D)),N=N.j(D).add(b(S))):(N=N.j(T),N=N.add(b(S)))}return N}var O=v(0),F=v(1),q=v(16777216);s=f.prototype,s.m=function(){if(Z(this))return-V(this).m();for(var I=0,k=1,T=0;T<this.g.length;T++){var N=this.i(T);I+=(0<=N?N:4294967296+N)*k,k*=4294967296}return I},s.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(J(this))return"0";if(Z(this))return"-"+V(this).toString(I);for(var k=b(Math.pow(I,6)),T=this,N="";;){var A=ve(T,k).g;T=Se(T,A.j(k));var D=((0<T.g.length?T.g[0]:T.h)>>>0).toString(I);if(T=A,J(T))return D+N;for(;6>D.length;)D="0"+D;N=D+N}},s.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function J(I){if(I.h!=0)return!1;for(var k=0;k<I.g.length;k++)if(I.g[k]!=0)return!1;return!0}function Z(I){return I.h==-1}s.l=function(I){return I=Se(this,I),Z(I)?-1:J(I)?0:1};function V(I){for(var k=I.g.length,T=[],N=0;N<k;N++)T[N]=~I.g[N];return new f(T,~I.h).add(F)}s.abs=function(){return Z(this)?V(this):this},s.add=function(I){for(var k=Math.max(this.g.length,I.g.length),T=[],N=0,A=0;A<=k;A++){var D=N+(this.i(A)&65535)+(I.i(A)&65535),S=(D>>>16)+(this.i(A)>>>16)+(I.i(A)>>>16);N=S>>>16,D&=65535,S&=65535,T[A]=S<<16|D}return new f(T,T[T.length-1]&-2147483648?-1:0)};function Se(I,k){return I.add(V(k))}s.j=function(I){if(J(this)||J(I))return O;if(Z(this))return Z(I)?V(this).j(V(I)):V(V(this).j(I));if(Z(I))return V(this.j(V(I)));if(0>this.l(q)&&0>I.l(q))return b(this.m()*I.m());for(var k=this.g.length+I.g.length,T=[],N=0;N<2*k;N++)T[N]=0;for(N=0;N<this.g.length;N++)for(var A=0;A<I.g.length;A++){var D=this.i(N)>>>16,S=this.i(N)&65535,Ke=I.i(A)>>>16,ft=I.i(A)&65535;T[2*N+2*A]+=S*ft,me(T,2*N+2*A),T[2*N+2*A+1]+=D*ft,me(T,2*N+2*A+1),T[2*N+2*A+1]+=S*Ke,me(T,2*N+2*A+1),T[2*N+2*A+2]+=D*Ke,me(T,2*N+2*A+2)}for(N=0;N<k;N++)T[N]=T[2*N+1]<<16|T[2*N];for(N=k;N<2*k;N++)T[N]=0;return new f(T,0)};function me(I,k){for(;(I[k]&65535)!=I[k];)I[k+1]+=I[k]>>>16,I[k]&=65535,k++}function _e(I,k){this.g=I,this.h=k}function ve(I,k){if(J(k))throw Error("division by zero");if(J(I))return new _e(O,O);if(Z(I))return k=ve(V(I),k),new _e(V(k.g),V(k.h));if(Z(k))return k=ve(I,V(k)),new _e(V(k.g),k.h);if(30<I.g.length){if(Z(I)||Z(k))throw Error("slowDivide_ only works with positive integers.");for(var T=F,N=k;0>=N.l(I);)T=We(T),N=We(N);var A=Re(T,1),D=Re(N,1);for(N=Re(N,2),T=Re(T,2);!J(N);){var S=D.add(N);0>=S.l(I)&&(A=A.add(T),D=S),N=Re(N,1),T=Re(T,1)}return k=Se(I,A.j(k)),new _e(A,k)}for(A=O;0<=I.l(k);){for(T=Math.max(1,Math.floor(I.m()/k.m())),N=Math.ceil(Math.log(T)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),D=b(T),S=D.j(k);Z(S)||0<S.l(I);)T-=N,D=b(T),S=D.j(k);J(D)&&(D=F),A=A.add(D),I=Se(I,S)}return new _e(A,I)}s.A=function(I){return ve(this,I).h},s.and=function(I){for(var k=Math.max(this.g.length,I.g.length),T=[],N=0;N<k;N++)T[N]=this.i(N)&I.i(N);return new f(T,this.h&I.h)},s.or=function(I){for(var k=Math.max(this.g.length,I.g.length),T=[],N=0;N<k;N++)T[N]=this.i(N)|I.i(N);return new f(T,this.h|I.h)},s.xor=function(I){for(var k=Math.max(this.g.length,I.g.length),T=[],N=0;N<k;N++)T[N]=this.i(N)^I.i(N);return new f(T,this.h^I.h)};function We(I){for(var k=I.g.length+1,T=[],N=0;N<k;N++)T[N]=I.i(N)<<1|I.i(N-1)>>>31;return new f(T,I.h)}function Re(I,k){var T=k>>5;k%=32;for(var N=I.g.length-T,A=[],D=0;D<N;D++)A[D]=0<k?I.i(D+T)>>>k|I.i(D+T+1)<<32-k:I.i(D+T);return new f(A,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Ag=i,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=b,f.fromString=_,zs=f}).apply(typeof Pp<"u"?Pp:typeof self<"u"?self:typeof window<"u"?window:{});var Nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rg,Ba,Dg,Ol,rh,Lg,Og,Pg;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,g){return l==Array.prototype||l==Object.prototype||(l[d]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nl=="object"&&Nl];for(var d=0;d<l.length;++d){var g=l[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function o(l,d){if(d)e:{var g=i;l=l.split(".");for(var w=0;w<l.length-1;w++){var L=l[w];if(!(L in g))break e;g=g[L]}l=l[l.length-1],w=g[l],d=d(w),d!=w&&d!=null&&e(g,l,{configurable:!0,writable:!0,value:d})}}function c(l,d){l instanceof String&&(l+="");var g=0,w=!1,L={next:function(){if(!w&&g<l.length){var z=g++;return{value:d(z,l[z]),done:!1}}return w=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(l){return l||function(){return c(this,function(d,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function v(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function b(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function _(l,d,g){return l.call.apply(l.bind,arguments)}function O(l,d,g){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,w),l.apply(d,L)}}return function(){return l.apply(d,arguments)}}function F(l,d,g){return F=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:O,F.apply(null,arguments)}function q(l,d){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function J(l,d){function g(){}g.prototype=d.prototype,l.aa=d.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(w,L,z){for(var ee=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)ee[$e-2]=arguments[$e];return d.prototype[L].apply(w,ee)}}function Z(l){const d=l.length;if(0<d){const g=Array(d);for(let w=0;w<d;w++)g[w]=l[w];return g}return[]}function V(l,d){for(let g=1;g<arguments.length;g++){const w=arguments[g];if(v(w)){const L=l.length||0,z=w.length||0;l.length=L+z;for(let ee=0;ee<z;ee++)l[L+ee]=w[ee]}else l.push(w)}}class Se{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function me(l){return/^[\s\xa0]*$/.test(l)}function _e(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function ve(l){return ve[" "](l),l}ve[" "]=function(){};var We=_e().indexOf("Gecko")!=-1&&!(_e().toLowerCase().indexOf("webkit")!=-1&&_e().indexOf("Edge")==-1)&&!(_e().indexOf("Trident")!=-1||_e().indexOf("MSIE")!=-1)&&_e().indexOf("Edge")==-1;function Re(l,d,g){for(const w in l)d.call(g,l[w],w,l)}function I(l,d){for(const g in l)d.call(void 0,l[g],g,l)}function k(l){const d={};for(const g in l)d[g]=l[g];return d}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(l,d){let g,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(g in w)l[g]=w[g];for(let z=0;z<T.length;z++)g=T[z],Object.prototype.hasOwnProperty.call(w,g)&&(l[g]=w[g])}}function A(l){var d=1;l=l.split(":");const g=[];for(;0<d&&l.length;)g.push(l.shift()),d--;return l.length&&g.push(l.join(":")),g}function D(l){m.setTimeout(()=>{throw l},0)}function S(){var l=fe;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class Ke{constructor(){this.h=this.g=null}add(d,g){const w=ft.get();w.set(d,g),this.h?this.h.next=w:this.g=w,this.h=w}}var ft=new Se(()=>new dt,l=>l.reset());class dt{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,te=!1,fe=new Ke,ne=()=>{const l=m.Promise.resolve(void 0);Ve=()=>{l.then(R)}};var R=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(g){D(g)}var d=ft;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}te=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};m.addEventListener("test",g,d),m.removeEventListener("test",g,d)}catch{}return l}();function Te(l,d){if(he.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(We){e:{try{ve(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else g=="mouseover"?d=l.fromElement:g=="mouseout"&&(d=l.toElement);this.relatedTarget=d,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ne[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Te.aa.h.call(this)}}J(Te,he);var Ne={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),B=0;function X(l,d,g,w,L){this.listener=l,this.proxy=null,this.src=d,this.type=g,this.capture=!!w,this.ha=L,this.key=++B,this.da=this.fa=!1}function ie(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ye(l){this.src=l,this.g={},this.h=0}ye.prototype.add=function(l,d,g,w,L){var z=l.toString();l=this.g[z],l||(l=this.g[z]=[],this.h++);var ee=Me(l,d,w,L);return-1<ee?(d=l[ee],g||(d.fa=!1)):(d=new X(d,this.src,z,!!w,L),d.fa=g,l.push(d)),d};function Qe(l,d){var g=d.type;if(g in l.g){var w=l.g[g],L=Array.prototype.indexOf.call(w,d,void 0),z;(z=0<=L)&&Array.prototype.splice.call(w,L,1),z&&(ie(d),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Me(l,d,g,w){for(var L=0;L<l.length;++L){var z=l[L];if(!z.da&&z.listener==d&&z.capture==!!g&&z.ha==w)return L}return-1}var Bt="closure_lm_"+(1e6*Math.random()|0),Nr={};function Ir(l,d,g,w,L){if(Array.isArray(d)){for(var z=0;z<d.length;z++)Ir(l,d[z],g,w,L);return null}return g=Wi(g),l&&l[Le]?l.K(d,g,b(w)?!!w.capture:!1,L):Nn(l,d,g,!1,w,L)}function Nn(l,d,g,w,L,z){if(!d)throw Error("Invalid event type");var ee=b(L)?!!L.capture:!!L,$e=Ht(l);if($e||(l[Bt]=$e=new ye(l)),g=$e.add(d,g,w,ee,z),g.proxy)return g;if(w=In(),g.proxy=w,w.src=l,w.listener=g,l.addEventListener)Ce||(L=ee),L===void 0&&(L=!1),l.addEventListener(d.toString(),w,L);else if(l.attachEvent)l.attachEvent(an(d.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function In(){function l(g){return d.call(l.src,l.listener,g)}const d=st;return l}function Kn(l,d,g,w,L){if(Array.isArray(d))for(var z=0;z<d.length;z++)Kn(l,d[z],g,w,L);else w=b(w)?!!w.capture:!!w,g=Wi(g),l&&l[Le]?(l=l.i,d=String(d).toString(),d in l.g&&(z=l.g[d],g=Me(z,g,w,L),-1<g&&(ie(z[g]),Array.prototype.splice.call(z,g,1),z.length==0&&(delete l.g[d],l.h--)))):l&&(l=Ht(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Me(d,g,w,L)),(g=-1<l?d[l]:null)&&yn(g))}function yn(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Le])Qe(d.i,l);else{var g=l.type,w=l.proxy;d.removeEventListener?d.removeEventListener(g,w,l.capture):d.detachEvent?d.detachEvent(an(g),w):d.addListener&&d.removeListener&&d.removeListener(w),(g=Ht(d))?(Qe(g,l),g.h==0&&(g.src=null,d[Bt]=null)):ie(l)}}}function an(l){return l in Nr?Nr[l]:Nr[l]="on"+l}function st(l,d){if(l.da)l=!0;else{d=new Te(d,this);var g=l.listener,w=l.ha||l.src;l.fa&&yn(l),l=g.call(w,d)}return l}function Ht(l){return l=l[Bt],l instanceof ye?l:null}var Ks="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wi(l){return typeof l=="function"?l:(l[Ks]||(l[Ks]=function(d){return l.handleEvent(d)}),l[Ks])}function pt(){j.call(this),this.i=new ye(this),this.M=this,this.F=null}J(pt,j),pt.prototype[Le]=!0,pt.prototype.removeEventListener=function(l,d,g,w){Kn(this,l,d,g,w)};function gt(l,d){var g,w=l.F;if(w)for(g=[];w;w=w.F)g.push(w);if(l=l.M,w=d.type||d,typeof d=="string")d=new he(d,l);else if(d instanceof he)d.target=d.target||l;else{var L=d;d=new he(w,l),N(d,L)}if(L=!0,g)for(var z=g.length-1;0<=z;z--){var ee=d.g=g[z];L=lr(ee,w,!0,d)&&L}if(ee=d.g=l,L=lr(ee,w,!0,d)&&L,L=lr(ee,w,!1,d)&&L,g)for(z=0;z<g.length;z++)ee=d.g=g[z],L=lr(ee,w,!1,d)&&L}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var g=l.g[d],w=0;w<g.length;w++)ie(g[w]);delete l.g[d],l.h--}}this.F=null},pt.prototype.K=function(l,d,g,w){return this.i.add(String(l),d,!1,g,w)},pt.prototype.L=function(l,d,g,w){return this.i.add(String(l),d,!0,g,w)};function lr(l,d,g,w){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,z=0;z<d.length;++z){var ee=d[z];if(ee&&!ee.da&&ee.capture==g){var $e=ee.listener,mt=ee.ha||ee.src;ee.fa&&Qe(l.i,ee),L=$e.call(mt,w)!==!1&&L}}return L&&!w.defaultPrevented}function Yi(l,d,g){if(typeof l=="function")g&&(l=F(l,g));else if(l&&typeof l.handleEvent=="function")l=F(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:m.setTimeout(l,d||0)}function Ar(l){l.g=Yi(()=>{l.g=null,l.i&&(l.i=!1,Ar(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class us extends j{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Ar(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cs(l){j.call(this),this.h=l,this.g={}}J(cs,j);var Ji=[];function Xi(l){Re(l.g,function(d,g){this.g.hasOwnProperty(g)&&yn(d)},l),l.g={}}cs.prototype.N=function(){cs.aa.N.call(this),Xi(this)},cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zi=m.JSON.stringify,ea=m.JSON.parse,ta=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function hs(){}hs.prototype.h=null;function Qs(l){return l.h||(l.h=l.i())}function Hs(){}var vn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qn(){he.call(this,"d")}J(Qn,he);function Gs(){he.call(this,"c")}J(Gs,he);var Hn={},na=null;function fs(){return na=na||new pt}Hn.La="serverreachability";function ra(l){he.call(this,Hn.La,l)}J(ra,he);function ur(l){const d=fs();gt(d,new ra(d))}Hn.STAT_EVENT="statevent";function sa(l,d){he.call(this,Hn.STAT_EVENT,l),this.stat=d}J(sa,he);function at(l){const d=fs();gt(d,new sa(d,l))}Hn.Ma="timingevent";function Ws(l,d){he.call(this,Hn.Ma,l),this.size=d}J(Ws,he);function An(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},d)}function ds(){this.g=!0}ds.prototype.xa=function(){this.g=!1};function ps(l,d,g,w,L,z){l.info(function(){if(l.g)if(z)for(var ee="",$e=z.split("&"),mt=0;mt<$e.length;mt++){var ze=$e[mt].split("=");if(1<ze.length){var Et=ze[0];ze=ze[1];var kt=Et.split("_");ee=2<=kt.length&&kt[1]=="type"?ee+(Et+"="+ze+"&"):ee+(Et+"=redacted&")}}else ee=null;else ee=z;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+d+`
`+g+`
`+ee})}function Ys(l,d,g,w,L,z,ee){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+d+`
`+g+`
`+z+" "+ee})}function Rn(l,d,g,w){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+gu(l,g)+(w?" "+w:"")})}function ia(l,d){l.info(function(){return"TIMEOUT: "+d})}ds.prototype.info=function(){};function gu(l,d){if(!l.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var w=g[l];if(!(2>w.length)){var L=w[1];if(Array.isArray(L)&&!(1>L.length)){var z=L[0];if(z!="noop"&&z!="stop"&&z!="close")for(var ee=1;ee<L.length;ee++)L[ee]=""}}}}return Zi(g)}catch{return d}}var Js={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dn;function gs(){}J(gs,hs),gs.prototype.g=function(){return new XMLHttpRequest},gs.prototype.i=function(){return{}},Dn=new gs;function Ln(l,d,g,w){this.j=l,this.i=d,this.l=g,this.R=w||1,this.U=new cs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new po}function po(){this.i=null,this.g="",this.h=!1}var aa={},Xs={};function Zs(l,d,g){l.L=1,l.v=Pr(ln(d)),l.m=g,l.P=!0,oa(l,null)}function oa(l,d){l.F=Date.now(),He(l),l.A=ln(l.v);var g=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Ur(g.i,"t",w),l.C=0,g=l.j.J,l.h=new po,l.g=Do(l.j,g?d:null,!l.m),0<l.O&&(l.M=new us(F(l.Y,l,l.g),l.O)),d=l.U,g=l.g,w=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Ji[0]=L.toString()),L=Ji);for(var z=0;z<L.length;z++){var ee=Ir(g,L[z],w||d.handleEvent,!1,d.h||d);if(!ee)break;d.g[ee.key]=ee}d=l.H?k(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),ur(),ps(l.i,l.u,l.A,l.l,l.R,l.m)}Ln.prototype.ca=function(l){l=l.target;const d=this.M;d&&Wt(l)==3?d.j():this.Y(l)},Ln.prototype.Y=function(l){try{if(l==this.g)e:{const kt=Wt(this.g);var d=this.g.Ba();const En=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||da(this.g)))){this.J||kt!=4||d==7||(d==8||0>=En?ur(3):ur(2)),ms(this);var g=this.g.Z();this.X=g;t:if(go(this)){var w=da(this.g);l="";var L=w.length,z=Wt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wn(this),Rr(this);var ee="";break t}this.h.i=new m.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,l+=this.h.i.decode(w[d],{stream:!(z&&d==L-1)});w.length=0,this.h.g+=l,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=g==200,Ys(this.i,this.u,this.A,this.l,this.R,kt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,mt=this.g;if(($e=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!me($e)){var ze=$e;break t}}ze=null}if(g=ze)Rn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,la(this,g);else{this.o=!1,this.s=3,at(12),wn(this),Rr(this);break e}}if(this.P){g=!0;let cn;for(;!this.J&&this.C<ee.length;)if(cn=mu(this,ee),cn==Xs){kt==4&&(this.s=4,at(14),g=!1),Rn(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==aa){this.s=4,at(15),Rn(this.i,this.l,ee,"[Invalid Chunk]"),g=!1;break}else Rn(this.i,this.l,cn,null),la(this,cn);if(go(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||ee.length!=0||this.h.h||(this.s=1,at(16),g=!1),this.o=this.o&&g,!g)Rn(this.i,this.l,ee,"[Invalid Chunked Response]"),wn(this),Rr(this);else if(0<ee.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),ga(Et),Et.M=!0,at(11))}}else Rn(this.i,this.l,ee,null),la(this,ee);kt==4&&wn(this),this.o&&!this.J&&(kt==4?ci(this.j,this):(this.o=!1,He(this)))}else ii(this.g),g==400&&0<ee.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),wn(this),Rr(this)}}}catch{}finally{}};function go(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function mu(l,d){var g=l.C,w=d.indexOf(`
`,g);return w==-1?Xs:(g=Number(d.substring(g,w)),isNaN(g)?aa:(w+=1,w+g>d.length?Xs:(d=d.slice(w,w+g),l.C=w+g,d)))}Ln.prototype.cancel=function(){this.J=!0,wn(this)};function He(l){l.S=Date.now()+l.I,mo(l,l.I)}function mo(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=An(F(l.ba,l),d)}function ms(l){l.B&&(m.clearTimeout(l.B),l.B=null)}Ln.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(ia(this.i,this.A),this.L!=2&&(ur(),at(17)),wn(this),this.s=2,Rr(this)):mo(this,this.S-l)};function Rr(l){l.j.G==0||l.J||ci(l.j,l)}function wn(l){ms(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,Xi(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function la(l,d){try{var g=l.j;if(g.G!=0&&(g.g==l||qt(g.h,l))){if(!l.K&&qt(g.h,l)&&g.G==3){try{var w=g.Da.g.parse(d)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)ui(g),Fn(g);else break e;li(g),at(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=An(F(g.Za,g),6e3));if(1>=vo(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else pr(g,11)}else if((l.K||g.g==l)&&ui(g),!me(d))for(L=g.Da.g.parse(d),d=0;d<L.length;d++){let ze=L[d];if(g.T=ze[0],ze=ze[1],g.G==2)if(ze[0]=="c"){g.K=ze[1],g.ia=ze[2];const Et=ze[3];Et!=null&&(g.la=Et,g.j.info("VER="+g.la));const kt=ze[4];kt!=null&&(g.Aa=kt,g.j.info("SVER="+g.Aa));const En=ze[5];En!=null&&typeof En=="number"&&0<En&&(w=1.5*En,g.L=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;const cn=l.g;if(cn){const Ss=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ss){var z=w.h;z.g||Ss.indexOf("spdy")==-1&&Ss.indexOf("quic")==-1&&Ss.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(ua(z,z.h),z.h=null))}if(w.D){const fi=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;fi&&(w.ya=fi,qe(w.I,w.D,fi))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),w=g;var ee=l;if(w.qa=Ro(w,w.J?w.ia:null,w.W),ee.K){wo(w.h,ee);var $e=ee,mt=w.L;mt&&($e.I=mt),$e.B&&(ms($e),He($e)),w.g=ee}else ks(w);0<g.i.length&&Jn(g)}else ze[0]!="stop"&&ze[0]!="close"||pr(g,7);else g.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?pr(g,7):Nt(g):ze[0]!="noop"&&g.l&&g.l.ta(ze),g.v=0)}}ur(4)}catch{}}var yo=class{constructor(l,d){this.g=l,this.map=d}};function ys(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function on(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function vo(l){return l.h?1:l.g?l.g.size:0}function qt(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function ua(l,d){l.g?l.g.add(d):l.h=d}function wo(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}ys.prototype.cancel=function(){if(this.i=bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function bo(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const g of l.g.values())d=d.concat(g.D);return d}return Z(l.i)}function ei(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(v(l)){for(var d=[],g=l.length,w=0;w<g;w++)d.push(l[w]);return d}d=[],g=0;for(w in l)d[g++]=l[w];return d}function ti(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(v(l)||typeof l=="string"){var d=[];l=l.length;for(var g=0;g<l;g++)d.push(g);return d}d=[],g=0;for(const w in l)d[g++]=w;return d}}}function Dr(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(v(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var g=ti(l),w=ei(l),L=w.length,z=0;z<L;z++)d.call(void 0,w[z],g&&g[z],l)}var vs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yu(l,d){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var w=l[g].indexOf("="),L=null;if(0<=w){var z=l[g].substring(0,w);L=l[g].substring(w+1)}else z=l[g];d(z,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function cr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof cr){this.h=l.h,ws(this,l.j),this.o=l.o,this.g=l.g,Lr(this,l.s),this.l=l.l;var d=l.i,g=new Gn;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),Or(this,g),this.m=l.m}else l&&(d=String(l).match(vs))?(this.h=!1,ws(this,d[1]||"",!0),this.o=Ae(d[2]||""),this.g=Ae(d[3]||"",!0),Lr(this,d[4]),this.l=Ae(d[5]||"",!0),Or(this,d[6]||"",!0),this.m=Ae(d[7]||"")):(this.h=!1,this.i=new Gn(null,this.h))}cr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Mr(d,ni,!0),":");var g=this.g;return(g||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Mr(d,ni,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Mr(g,g.charAt(0)=="/"?So:ko,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Mr(g,ca)),l.join("")};function ln(l){return new cr(l)}function ws(l,d,g){l.j=g?Ae(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Lr(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Or(l,d,g){d instanceof Gn?(l.i=d,Wn(l.i,l.h)):(g||(d=Mr(d,_o)),l.i=new Gn(d,l.h))}function qe(l,d,g){l.i.set(d,g)}function Pr(l){return qe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ae(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Mr(l,d,g){return typeof l=="string"?(l=encodeURI(l).replace(d,Eo),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Eo(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ni=/[#\/\?@]/g,ko=/[#\?:]/g,So=/[#\?]/g,_o=/[#\?@]/g,ca=/#/g;function Gn(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function xt(l){l.g||(l.g=new Map,l.h=0,l.i&&yu(l.i,function(d,g){l.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}s=Gn.prototype,s.add=function(l,d){xt(this),this.i=null,l=bn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(d),this.h+=1,this};function On(l,d){xt(l),d=bn(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Pn(l,d){return xt(l),d=bn(l,d),l.g.has(d)}s.forEach=function(l,d){xt(this),this.g.forEach(function(g,w){g.forEach(function(L){l.call(d,L,w,this)},this)},this)},s.na=function(){xt(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let w=0;w<d.length;w++){const L=l[w];for(let z=0;z<L.length;z++)g.push(d[w])}return g},s.V=function(l){xt(this);let d=[];if(typeof l=="string")Pn(this,l)&&(d=d.concat(this.g.get(bn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)d=d.concat(l[g])}return d},s.set=function(l,d){return xt(this),this.i=null,l=bn(this,l),Pn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},s.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Ur(l,d,g){On(l,d),0<g.length&&(l.i=null,l.g.set(bn(l,d),Z(g)),l.h+=g.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var w=d[g];const z=encodeURIComponent(String(w)),ee=this.V(w);for(w=0;w<ee.length;w++){var L=z;ee[w]!==""&&(L+="="+encodeURIComponent(String(ee[w]))),l.push(L)}}return this.i=l.join("&")};function bn(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Wn(l,d){d&&!l.j&&(xt(l),l.i=null,l.g.forEach(function(g,w){var L=w.toLowerCase();w!=L&&(On(this,w),Ur(this,L,g))},l)),l.j=d}function vu(l,d){const g=new ds;if(m.Image){const w=new Image;w.onload=q(Gt,g,"TestLoadImage: loaded",!0,d,w),w.onerror=q(Gt,g,"TestLoadImage: error",!1,d,w),w.onabort=q(Gt,g,"TestLoadImage: abort",!1,d,w),w.ontimeout=q(Gt,g,"TestLoadImage: timeout",!1,d,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else d(!1)}function To(l,d){const g=new ds,w=new AbortController,L=setTimeout(()=>{w.abort(),Gt(g,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:w.signal}).then(z=>{clearTimeout(L),z.ok?Gt(g,"TestPingServer: ok",!0,d):Gt(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),Gt(g,"TestPingServer: error",!1,d)})}function Gt(l,d,g,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(g)}catch{}}function wu(){this.g=new ta}function Co(l,d,g){const w=g||"";try{Dr(l,function(L,z){let ee=L;b(L)&&(ee=Zi(L)),d.push(w+z+"="+encodeURIComponent(ee))})}catch(L){throw d.push(w+"type="+encodeURIComponent("_badmap")),L}}function hr(l){this.l=l.Ub||null,this.j=l.eb||!1}J(hr,hs),hr.prototype.g=function(){return new bs(this.l,this.j)},hr.prototype.i=function(l){return function(){return l}}({});function bs(l,d){pt.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}J(bs,pt),s=bs.prototype,s.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,Un(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||m).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mn(this)),this.readyState=0},s.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Un(this)),this.g&&(this.readyState=3,Un(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xo(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function xo(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}s.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Mn(this):Un(this),this.readyState==3&&xo(this)}},s.Ra=function(l){this.g&&(this.response=this.responseText=l,Mn(this))},s.Qa=function(l){this.g&&(this.response=l,Mn(this))},s.ga=function(){this.g&&Mn(this)};function Mn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Un(l)}s.setRequestHeader=function(l,d){this.u.append(l,d)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=d.next();return l.join(`\r
`)};function Un(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function fr(l){let d="";return Re(l,function(g,w){d+=w,d+=":",d+=g,d+=`\r
`}),d}function Fr(l,d,g){e:{for(w in g){var w=!1;break e}w=!0}w||(g=fr(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):qe(l,d,g))}function Xe(l){pt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}J(Xe,pt);var bu=/^https?$/i,ha=["POST","PUT"];s=Xe.prototype,s.Ha=function(l){this.J=l},s.ea=function(l,d,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dn.g(),this.v=this.o?Qs(this.o):Qs(Dn),this.g.onreadystatechange=F(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(z){Es(this,z);return}if(l=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)g.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const z of w.keys())g.set(z,w.get(z));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(z=>z.toLowerCase()=="content-type"),L=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(ha,d,void 0))||w||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ee]of g)this.g.setRequestHeader(z,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{si(this),this.u=!0,this.g.send(l),this.u=!1}catch(z){Es(this,z)}};function Es(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,ri(l),un(l)}function ri(l){l.A||(l.A=!0,gt(l,"complete"),gt(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,gt(this,"complete"),gt(this,"abort"),un(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),un(this,!0)),Xe.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?fa(this):this.bb())},s.bb=function(){fa(this)};function fa(l){if(l.h&&typeof f<"u"&&(!l.v[1]||Wt(l)!=4||l.Z()!=2)){if(l.u&&Wt(l)==4)Yi(l.Ea,0,l);else if(gt(l,"readystatechange"),Wt(l)==4){l.h=!1;try{const ee=l.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var w;if(w=ee===0){var L=String(l.D).match(vs)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),w=!bu.test(L?L.toLowerCase():"")}g=w}if(g)gt(l,"complete"),gt(l,"success");else{l.m=6;try{var z=2<Wt(l)?l.g.statusText:""}catch{z=""}l.l=z+" ["+l.Z()+"]",ri(l)}}finally{un(l)}}}}function un(l,d){if(l.g){si(l);const g=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||gt(l,"ready");try{g.onreadystatechange=w}catch{}}}function si(l){l.I&&(m.clearTimeout(l.I),l.I=null)}s.isActive=function(){return!!this.g};function Wt(l){return l.g?l.g.readyState:0}s.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),ea(d)}};function da(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function ii(l){const d={};l=(l.g&&2<=Wt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(me(l[w]))continue;var g=A(l[w]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const z=d[L]||[];d[L]=z,z.push(g)}I(d,function(w){return w.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yn(l,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||d}function pa(l){this.Aa=0,this.i=[],this.j=new ds,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yn("baseRetryDelayMs",5e3,l),this.cb=Yn("retryDelaySeedMs",1e4,l),this.Wa=Yn("forwardChannelMaxRetries",2,l),this.wa=Yn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new ys(l&&l.concurrentRequestLimit),this.Da=new wu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=pa.prototype,s.la=8,s.G=1,s.connect=function(l,d,g,w){at(0),this.W=l,this.H=d||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.I=Ro(this,null,this.W),Jn(this)};function Nt(l){if(ai(l),l.G==3){var d=l.U++,g=ln(l.I);if(qe(g,"SID",l.K),qe(g,"RID",d),qe(g,"TYPE","terminate"),dr(l,g),d=new Ln(l,l.j,d),d.L=2,d.v=Pr(ln(g)),g=!1,m.navigator&&m.navigator.sendBeacon)try{g=m.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&m.Image&&(new Image().src=d.v,g=!0),g||(d.g=Do(d.j,null),d.g.ea(d.v)),d.F=Date.now(),He(d)}Ao(l)}function Fn(l){l.g&&(ga(l),l.g.cancel(),l.g=null)}function ai(l){Fn(l),l.u&&(m.clearTimeout(l.u),l.u=null),ui(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function Jn(l){if(!on(l.h)&&!l.s){l.s=!0;var d=l.Ga;Ve||ne(),te||(Ve(),te=!0),fe.add(d,l),l.B=0}}function Eu(l,d){return vo(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=An(F(l.Ga,l,d),Io(l,l.B)),l.B++,!0)}s.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Ln(this,this.j,l);let z=this.o;if(this.S&&(z?(z=k(z),N(z,this.S)):z=this.S),this.m!==null||this.O||(L.H=z,z=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(d+=w,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=zr(this,L,d),g=ln(this.I),qe(g,"RID",l),qe(g,"CVER",22),this.D&&qe(g,"X-HTTP-Session-Id",this.D),dr(this,g),z&&(this.O?d="headers="+encodeURIComponent(String(fr(z)))+"&"+d:this.m&&Fr(g,this.m,z)),ua(this.h,L),this.Ua&&qe(g,"TYPE","init"),this.P?(qe(g,"$req",d),qe(g,"SID","null"),L.T=!0,Zs(L,g,null)):Zs(L,g,d),this.G=2}}else this.G==3&&(l?oi(this,l):this.i.length==0||on(this.h)||oi(this))};function oi(l,d){var g;d?g=d.l:g=l.U++;const w=ln(l.I);qe(w,"SID",l.K),qe(w,"RID",g),qe(w,"AID",l.T),dr(l,w),l.m&&l.o&&Fr(w,l.m,l.o),g=new Ln(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),d&&(l.i=d.D.concat(l.i)),d=zr(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ua(l.h,g),Zs(g,w,d)}function dr(l,d){l.H&&Re(l.H,function(g,w){qe(d,w,g)}),l.l&&Dr({},function(g,w){qe(d,w,g)})}function zr(l,d,g){g=Math.min(l.i.length,g);var w=l.l?F(l.l.Na,l.l,l):null;e:{var L=l.i;let z=-1;for(;;){const ee=["count="+g];z==-1?0<g?(z=L[0].g,ee.push("ofs="+z)):z=0:ee.push("ofs="+z);let $e=!0;for(let mt=0;mt<g;mt++){let ze=L[mt].g;const Et=L[mt].map;if(ze-=z,0>ze)z=Math.max(0,L[mt].g-100),$e=!1;else try{Co(Et,ee,"req"+ze+"_")}catch{w&&w(Et)}}if($e){w=ee.join("&");break e}}}return l=l.i.splice(0,g),d.D=l,w}function ks(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Ve||ne(),te||(Ve(),te=!0),fe.add(d,l),l.v=0}}function li(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=An(F(l.Fa,l),Io(l,l.v)),l.v++,!0)}s.Fa=function(){if(this.u=null,No(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=An(F(this.ab,this),l)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Fn(this),No(this))};function ga(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function No(l){l.g=new Ln(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=ln(l.qa);qe(d,"RID","rpc"),qe(d,"SID",l.K),qe(d,"AID",l.T),qe(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&qe(d,"TO",l.ja),qe(d,"TYPE","xmlhttp"),dr(l,d),l.m&&l.o&&Fr(d,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Pr(ln(d)),g.m=null,g.P=!0,oa(g,l)}s.Za=function(){this.C!=null&&(this.C=null,Fn(this),li(this),at(19))};function ui(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function ci(l,d){var g=null;if(l.g==d){ui(l),ga(l),l.g=null;var w=2}else if(qt(l.h,d))g=d.D,wo(l.h,d),w=1;else return;if(l.G!=0){if(d.o)if(w==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var L=l.B;w=fs(),gt(w,new Ws(w,g)),Jn(l)}else ks(l);else if(L=d.s,L==3||L==0&&0<d.X||!(w==1&&Eu(l,d)||w==2&&li(l)))switch(g&&0<g.length&&(d=l.h,d.i=d.i.concat(g)),L){case 1:pr(l,5);break;case 4:pr(l,10);break;case 3:pr(l,6);break;default:pr(l,2)}}}function Io(l,d){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*d}function pr(l,d){if(l.j.info("Error code "+d),d==2){var g=F(l.fb,l),w=l.Xa;const L=!w;w=new cr(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||ws(w,"https"),Pr(w),L?vu(w.toString(),g):To(w.toString(),g)}else at(2);l.G=0,l.l&&l.l.sa(d),Ao(l),ai(l)}s.fb=function(l){l?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function Ao(l){if(l.G=0,l.ka=[],l.l){const d=bo(l.h);(d.length!=0||l.i.length!=0)&&(V(l.ka,d),V(l.ka,l.i),l.h.i.length=0,Z(l.i),l.i.length=0),l.l.ra()}}function Ro(l,d,g){var w=g instanceof cr?ln(g):new cr(g);if(w.g!="")d&&(w.g=d+"."+w.g),Lr(w,w.s);else{var L=m.location;w=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var z=new cr(null);w&&ws(z,w),d&&(z.g=d),L&&Lr(z,L),g&&(z.l=g),w=z}return g=l.D,d=l.ya,g&&d&&qe(w,g,d),qe(w,"VER",l.la),dr(l,w),w}function Do(l,d,g){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Xe(new hr({eb:g})):new Xe(l.pa),d.Ha(l.J),d}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function ma(){}s=ma.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function hi(){}hi.prototype.g=function(l,d){return new $t(l,d)};function $t(l,d){pt.call(this),this.g=new pa(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!me(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!me(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Xn(this)}J($t,pt),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Nt(this.g)},$t.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Zi(l),l=g);d.i.push(new yo(d.Ya++,l)),d.G==3&&Jn(d)},$t.prototype.N=function(){this.g.l=null,delete this.j,Nt(this.g),delete this.g,$t.aa.N.call(this)};function Lo(l){Qn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const g in d){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}J(Lo,Qn);function Oo(){Gs.call(this),this.status=1}J(Oo,Gs);function Xn(l){this.g=l}J(Xn,ma),Xn.prototype.ua=function(){gt(this.g,"a")},Xn.prototype.ta=function(l){gt(this.g,new Lo(l))},Xn.prototype.sa=function(l){gt(this.g,new Oo)},Xn.prototype.ra=function(){gt(this.g,"b")},hi.prototype.createWebChannel=hi.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,Pg=function(){return new hi},Og=function(){return fs()},Lg=Hn,rh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Js.NO_ERROR=0,Js.TIMEOUT=8,Js.HTTP_ERROR=6,Ol=Js,fo.COMPLETE="complete",Dg=fo,Hs.EventType=vn,vn.OPEN="a",vn.CLOSE="b",vn.ERROR="c",vn.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Ba=Hs,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,Rg=Xe}).apply(typeof Nl<"u"?Nl:typeof self<"u"?self:typeof window<"u"?window:{});const Mp="@firebase/firestore";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Qi="10.14.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Vs=new _g("@firebase/firestore");function ja(){return Vs.logLevel}function le(s,...e){if(Vs.logLevel<=Pe.DEBUG){const n=e.map(Eh);Vs.debug(`Firestore (${Qi}): ${s}`,...n)}}function Tr(s,...e){if(Vs.logLevel<=Pe.ERROR){const n=e.map(Eh);Vs.error(`Firestore (${Qi}): ${s}`,...n)}}function Fi(s,...e){if(Vs.logLevel<=Pe.WARN){const n=e.map(Eh);Vs.warn(`Firestore (${Qi}): ${s}`,...n)}}function Eh(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(s)}catch{return s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function be(s="Unexpected state"){const e=`FIRESTORE (${Qi}) INTERNAL ASSERTION FAILED: `+s;throw Tr(e),new Error(e)}function Be(s,e){s||be()}function ke(s,e){return s}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Ki{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class z0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class V0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class j0{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Be(this.o===void 0);let i=this.i;const o=v=>this.i!==i?(i=this.i,n(v)):Promise.resolve();let c=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Sr,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const v=c;e.enqueueRetryable(async()=>{await v.promise,await o(this.currentUser)})},m=v=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Sr)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Be(typeof i.accessToken=="string"),new Mg(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new Vt(e)}}class B0{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class q0{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new B0(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K0{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Be(this.o===void 0);const i=c=>{c.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.R;return this.R=c.token,le("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>i(c))};const o=c=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?o(c):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Be(typeof n.token=="string"),this.R=n.token,new $0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Q0(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ug{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=Q0(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<n&&(i+=e.charAt(o[c]%e.length))}return i}}function Fe(s,e){return s<e?-1:s>e?1:0}function zi(s,e,n){return s.length===e.length&&s.every((i,o)=>n(i,e[o]))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ce(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new bt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new bt(0,0))}static max(){return new Ee(new bt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xa{constructor(e,n,i){n===void 0?n=0:n>e.length&&be(),i===void 0?i=e.length-n:i>e.length-n&&be(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Xa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xa?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const c=e.get(o),f=n.get(o);if(c<f)return-1;if(c>f)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class et extends Xa{construct(e,n,i){return new et(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ce(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new et(n)}static emptyPath(){return new et([])}}const H0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends Xa{construct(e,n,i){return new Dt(e,n,i)}static isValidIdentifier(e){return H0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const n=[];let i="",o=0;const c=()=>{if(i.length===0)throw new ce(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ce(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new ce(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=v,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(i+=m,o++):(c(),o++)}if(c(),f)throw new ce(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(n)}static emptyPath(){return new Dt([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ge{constructor(e){this.path=e}static fromPath(e){return new ge(et.fromString(e))}static fromName(e){return new ge(et.fromString(e).popFirst(5))}static empty(){return new ge(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new et(e.slice()))}}function G0(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Ee.fromTimestamp(i===1e9?new bt(n+1,0):new bt(n,i));return new is(o,ge.empty(),e)}function W0(s){return new is(s.readTime,s.key,-1)}class is{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new is(Ee.min(),ge.empty(),-1)}static max(){return new is(Ee.max(),ge.empty(),-1)}}function Y0(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(s.documentKey,e.documentKey),n!==0?n:Fe(s.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const J0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function so(s){if(s.code!==K.FAILED_PRECONDITION||s.message!==J0)throw s;le("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,i)=>{n(e)})}static reject(e){return new H((n,i)=>{i(e)})}static waitFor(e){return new H((n,i)=>{let o=0,c=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++c,f&&c===o&&n()},v=>i(v))}),f=!0,c===o&&n()})}static or(e){let n=H.resolve(!1);for(const i of e)n=n.next(o=>o?H.resolve(o):i());return n}static forEach(e,n){const i=[];return e.forEach((o,c)=>{i.push(n.call(this,o,c))}),this.waitFor(i)}static mapArray(e,n){return new H((i,o)=>{const c=e.length,f=new Array(c);let m=0;for(let v=0;v<c;v++){const b=v;n(e[b]).next(_=>{f[b]=_,++m,m===c&&i(f)},_=>o(_))}})}static doWhile(e,n){return new H((i,o)=>{const c=()=>{e()===!0?n().next(()=>{c()},o):i()};c()})}}function Z0(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function io(s){return s.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}kh.oe=-1;function Xl(s){return s==null}function Bl(s){return s===0&&1/s==-1/0}function ew(s){return typeof s=="number"&&Number.isInteger(s)&&!Bl(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Up(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function qs(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Fg(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rt{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Il(this.root,e,this.comparator,!1)}getReverseIterator(){return new Il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Il(this.root,e,this.comparator,!0)}}class Il{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,i,o,c){this.key=e,this.value=n,this.color=i??Rt.RED,this.left=o??Rt.EMPTY,this.right=c??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,c){return new Rt(e??this.key,n??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,i),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Rt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(s,e,n,i,o){return this}insert(s,e,n){return new Rt(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Lt{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fp(this.data.getIterator())}getIteratorFrom(e){return new Fp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Lt(this.comparator);return n.data=e,n}}class Fp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new gn([])}unionWith(e){let n=new Lt(Dt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zi(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new zg("Invalid base64 string: "+o):o}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const tw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(s){if(Be(!!s),typeof s=="string"){let e=0;const n=tw.exec(s);if(Be(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(s.seconds),nanos:ut(s.nanos)}}function ut(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function js(s){return typeof s=="string"?Ot.fromBase64String(s):Ot.fromUint8Array(s)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Sh(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function _h(s){const e=s.mapValue.fields.__previous_value__;return Sh(e)?_h(e):e}function Za(s){const e=as(s.mapValue.fields.__local_write_time__.timestampValue);return new bt(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nw{constructor(e,n,i,o,c,f,m,v,b){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=v,this.useFetchStreams=b}}class eo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new eo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof eo&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Al={mapValue:{}};function Bs(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Sh(s)?4:sw(s)?9007199254740991:rw(s)?10:11:be()}function ar(s,e){if(s===e)return!0;const n=Bs(s);if(n!==Bs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Za(s).isEqual(Za(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=as(i.timestampValue),f=as(o.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(i,o){return js(i.bytesValue).isEqual(js(o.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(i,o){return ut(i.geoPointValue.latitude)===ut(o.geoPointValue.latitude)&&ut(i.geoPointValue.longitude)===ut(o.geoPointValue.longitude)}(s,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ut(i.integerValue)===ut(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=ut(i.doubleValue),f=ut(o.doubleValue);return c===f?Bl(c)===Bl(f):isNaN(c)&&isNaN(f)}return!1}(s,e);case 9:return zi(s.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:case 11:return function(i,o){const c=i.mapValue.fields||{},f=o.mapValue.fields||{};if(Up(c)!==Up(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!ar(c[m],f[m])))return!1;return!0}(s,e);default:return be()}}function to(s,e){return(s.values||[]).find(n=>ar(n,e))!==void 0}function Vi(s,e){if(s===e)return 0;const n=Bs(s),i=Bs(e);if(n!==i)return Fe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(s.booleanValue,e.booleanValue);case 2:return function(o,c){const f=ut(o.integerValue||o.doubleValue),m=ut(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(s,e);case 3:return zp(s.timestampValue,e.timestampValue);case 4:return zp(Za(s),Za(e));case 5:return Fe(s.stringValue,e.stringValue);case 6:return function(o,c){const f=js(o),m=js(c);return f.compareTo(m)}(s.bytesValue,e.bytesValue);case 7:return function(o,c){const f=o.split("/"),m=c.split("/");for(let v=0;v<f.length&&v<m.length;v++){const b=Fe(f[v],m[v]);if(b!==0)return b}return Fe(f.length,m.length)}(s.referenceValue,e.referenceValue);case 8:return function(o,c){const f=Fe(ut(o.latitude),ut(c.latitude));return f!==0?f:Fe(ut(o.longitude),ut(c.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return Vp(s.arrayValue,e.arrayValue);case 10:return function(o,c){var f,m,v,b;const _=o.fields||{},O=c.fields||{},F=(f=_.value)===null||f===void 0?void 0:f.arrayValue,q=(m=O.value)===null||m===void 0?void 0:m.arrayValue,J=Fe(((v=F==null?void 0:F.values)===null||v===void 0?void 0:v.length)||0,((b=q==null?void 0:q.values)===null||b===void 0?void 0:b.length)||0);return J!==0?J:Vp(F,q)}(s.mapValue,e.mapValue);case 11:return function(o,c){if(o===Al.mapValue&&c===Al.mapValue)return 0;if(o===Al.mapValue)return 1;if(c===Al.mapValue)return-1;const f=o.fields||{},m=Object.keys(f),v=c.fields||{},b=Object.keys(v);m.sort(),b.sort();for(let _=0;_<m.length&&_<b.length;++_){const O=Fe(m[_],b[_]);if(O!==0)return O;const F=Vi(f[m[_]],v[b[_]]);if(F!==0)return F}return Fe(m.length,b.length)}(s.mapValue,e.mapValue);default:throw be()}}function zp(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Fe(s,e);const n=as(s),i=as(e),o=Fe(n.seconds,i.seconds);return o!==0?o:Fe(n.nanos,i.nanos)}function Vp(s,e){const n=s.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const c=Vi(n[o],i[o]);if(c)return c}return Fe(n.length,i.length)}function ji(s){return sh(s)}function sh(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(e){const n=as(e);return`time(${n.seconds},${n.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(e){return js(e).toBase64()}(s.bytesValue):"referenceValue"in s?function(e){return ge.fromName(e).toString()}(s.referenceValue):"geoPointValue"in s?function(e){return`geo(${e.latitude},${e.longitude})`}(s.geoPointValue):"arrayValue"in s?function(e){let n="[",i=!0;for(const o of e.values||[])i?i=!1:n+=",",n+=sh(o);return n+"]"}(s.arrayValue):"mapValue"in s?function(e){const n=Object.keys(e.fields||{}).sort();let i="{",o=!0;for(const c of n)o?o=!1:i+=",",i+=`${c}:${sh(e.fields[c])}`;return i+"}"}(s.mapValue):be()}function ih(s){return!!s&&"integerValue"in s}function Th(s){return!!s&&"arrayValue"in s}function jp(s){return!!s&&"nullValue"in s}function Bp(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Pl(s){return!!s&&"mapValue"in s}function rw(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Qa(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return qs(s.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Qa(i)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qa(s.arrayValue.values[n]);return e}return Object.assign({},s)}function sw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Pl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qa(n)}setAll(e){let n=Dt.emptyPath(),i={},o=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const v=this.getFieldsMap(n);this.applyChanges(v,i,o),i={},o=[],n=m.popLast()}f?i[m.lastSegment()]=Qa(f):o.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,i,o)}delete(e){const n=this.field(e.popLast());Pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];Pl(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){qs(n,(o,c)=>e[o]=c);for(const o of i)delete e[o]}clone(){return new nn(Qa(this.value))}}function Vg(s){const e=[];return qs(s.fields,(n,i)=>{const o=new Dt([n]);if(Pl(i)){const c=Vg(i.mapValue).fields;if(c.length===0)e.push(o);else for(const f of c)e.push(o.child(f))}else e.push(o)}),new gn(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jt{constructor(e,n,i,o,c,f,m){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new jt(e,0,Ee.min(),Ee.min(),Ee.min(),nn.empty(),0)}static newFoundDocument(e,n,i,o){return new jt(e,1,n,Ee.min(),i,o,0)}static newNoDocument(e,n){return new jt(e,2,n,Ee.min(),Ee.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,Ee.min(),Ee.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ql{constructor(e,n){this.position=e,this.inclusive=n}}function qp(s,e,n){let i=0;for(let o=0;o<s.position.length;o++){const c=e[o],f=s.position[o];if(c.field.isKeyField()?i=ge.comparator(ge.fromName(f.referenceValue),n.key):i=Vi(f,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function $p(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!ar(s.position[n],e.position[n]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $l{constructor(e,n="asc"){this.field=e,this.dir=n}}function iw(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jg{}class wt extends jg{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new ow(e,n,i):n==="array-contains"?new cw(e,i):n==="in"?new hw(e,i):n==="not-in"?new fw(e,i):n==="array-contains-any"?new dw(e,i):new wt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new lw(e,i):new uw(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Vi(n,this.value)):n!==null&&Bs(this.value)===Bs(n)&&this.matchesComparison(Vi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class or extends jg{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new or(e,n)}matches(e){return Bg(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Bg(s){return s.op==="and"}function qg(s){return aw(s)&&Bg(s)}function aw(s){for(const e of s.filters)if(e instanceof or)return!1;return!0}function ah(s){if(s instanceof wt)return s.field.canonicalString()+s.op.toString()+ji(s.value);if(qg(s))return s.filters.map(e=>ah(e)).join(",");{const e=s.filters.map(n=>ah(n)).join(",");return`${s.op}(${e})`}}function $g(s,e){return s instanceof wt?function(n,i){return i instanceof wt&&n.op===i.op&&n.field.isEqual(i.field)&&ar(n.value,i.value)}(s,e):s instanceof or?function(n,i){return i instanceof or&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((o,c,f)=>o&&$g(c,i.filters[f]),!0):!1}(s,e):void be()}function Kg(s){return s instanceof wt?function(e){return`${e.field.canonicalString()} ${e.op} ${ji(e.value)}`}(s):s instanceof or?function(e){return e.op.toString()+" {"+e.getFilters().map(Kg).join(" ,")+"}"}(s):"Filter"}class ow extends wt{constructor(e,n,i){super(e,n,i),this.key=ge.fromName(i.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class lw extends wt{constructor(e,n){super(e,"in",n),this.keys=Qg("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uw extends wt{constructor(e,n){super(e,"not-in",n),this.keys=Qg("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Qg(s,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ge.fromName(i.referenceValue))}class cw extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Th(n)&&to(n.arrayValue,this.value)}}class hw extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&to(this.value.arrayValue,n)}}class fw extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(to(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!to(this.value.arrayValue,n)}}class dw extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Th(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>to(this.value.arrayValue,i))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pw{constructor(e,n=null,i=[],o=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=f,this.endAt=m,this.ue=null}}function Kp(s,e=null,n=[],i=[],o=null,c=null,f=null){return new pw(s,e,n,i,o,c,f)}function Ch(s){const e=ke(s);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>ah(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Xl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ji(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ji(i)).join(",")),e.ue=n}return e.ue}function xh(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!iw(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!$g(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!$p(s.startAt,e.startAt)&&$p(s.endAt,e.endAt)}function oh(s){return ge.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zl{constructor(e,n=null,i=[],o=[],c=null,f="F",m=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=v,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gw(s,e,n,i,o,c,f,m){return new Zl(s,e,n,i,o,c,f,m)}function eu(s){return new Zl(s)}function Qp(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function mw(s){return s.collectionGroup!==null}function Ha(s){const e=ke(s);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Lt(Dt.comparator);return o.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(c=c.add(m.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new $l(o,i))}),n.has(Dt.keyField().canonicalString())||e.ce.push(new $l(Dt.keyField(),i))}return e.ce}function rr(s){const e=ke(s);return e.le||(e.le=yw(e,Ha(s))),e.le}function yw(s,e){if(s.limitType==="F")return Kp(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new $l(o.field,c)});const n=s.endAt?new ql(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new ql(s.startAt.position,s.startAt.inclusive):null;return Kp(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function lh(s,e,n){return new Zl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function tu(s,e){return xh(rr(s),rr(e))&&s.limitType===e.limitType}function Hg(s){return`${Ch(rr(s))}|lt:${s.limitType}`}function Li(s){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(i=>Kg(i)).join(", ")}]`),Xl(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ji(i)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ji(i)).join(",")),`Target(${n})`}(rr(s))}; limitType=${s.limitType})`}function nu(s,e){return e.isFoundDocument()&&function(n,i){const o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):ge.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(s,e)&&function(n,i){for(const o of Ha(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(s,e)&&function(n,i){for(const o of n.filters)if(!o.matches(i))return!1;return!0}(s,e)&&function(n,i){return!(n.startAt&&!function(o,c,f){const m=qp(o,c,f);return o.inclusive?m<=0:m<0}(n.startAt,Ha(n),i)||n.endAt&&!function(o,c,f){const m=qp(o,c,f);return o.inclusive?m>=0:m>0}(n.endAt,Ha(n),i))}(s,e)}function vw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Gg(s){return(e,n)=>{let i=!1;for(const o of Ha(s)){const c=ww(o,e,n);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function ww(s,e,n){const i=s.field.isKeyField()?ge.comparator(e.key,n.key):function(o,c,f){const m=c.data.field(o),v=f.data.field(o);return m!==null&&v!==null?Vi(m,v):be()}(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return be()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){qs(this.inner,(n,i)=>{for(const[o,c]of i)e(o,c)})}isEmpty(){return Fg(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bw=new rt(ge.comparator);function Cr(){return bw}const Wg=new rt(ge.comparator);function qa(...s){let e=Wg;for(const n of s)e=e.insert(n.key,n);return e}function Yg(s){let e=Wg;return s.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Fs(){return Ga()}function Jg(){return Ga()}function Ga(){return new Hi(s=>s.toString(),(s,e)=>s.isEqual(e))}const Ew=new rt(ge.comparator),kw=new Lt(ge.comparator);function Ie(...s){let e=kw;for(const n of s)e=e.add(n);return e}const Sw=new Lt(Fe);function _w(){return Sw}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Nh(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bl(e)?"-0":e}}function Xg(s){return{integerValue:""+s}}function Tw(s,e){return ew(e)?Xg(e):Nh(s,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ru{constructor(){this._=void 0}}function Cw(s,e,n){return s instanceof Kl?function(i,o){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Sh(o)&&(o=_h(o)),o&&(c.fields.__previous_value__=o),{mapValue:c}}(n,e):s instanceof no?em(s,e):s instanceof ro?tm(s,e):function(i,o){const c=Zg(i,o),f=Hp(c)+Hp(i.Pe);return ih(c)&&ih(i.Pe)?Xg(f):Nh(i.serializer,f)}(s,e)}function xw(s,e,n){return s instanceof no?em(s,e):s instanceof ro?tm(s,e):n}function Zg(s,e){return s instanceof Ql?function(n){return ih(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Kl extends ru{}class no extends ru{constructor(e){super(),this.elements=e}}function em(s,e){const n=nm(e);for(const i of s.elements)n.some(o=>ar(o,i))||n.push(i);return{arrayValue:{values:n}}}class ro extends ru{constructor(e){super(),this.elements=e}}function tm(s,e){let n=nm(e);for(const i of s.elements)n=n.filter(o=>!ar(o,i));return{arrayValue:{values:n}}}class Ql extends ru{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Hp(s){return ut(s.integerValue||s.doubleValue)}function nm(s){return Th(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function Nw(s,e){return s.field.isEqual(e.field)&&function(n,i){return n instanceof no&&i instanceof no||n instanceof ro&&i instanceof ro?zi(n.elements,i.elements,ar):n instanceof Ql&&i instanceof Ql?ar(n.Pe,i.Pe):n instanceof Kl&&i instanceof Kl}(s.transform,e.transform)}class Iw{constructor(e,n){this.version=e,this.transformResults=n}}class rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ml(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class su{}function rm(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new iu(s.key,rn.none()):new ao(s.key,s.data,rn.none());{const n=s.data,i=nn.empty();let o=new Lt(Dt.comparator);for(let c of e.fields)if(!o.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?i.delete(c):i.set(c,f),o=o.add(c)}return new ls(s.key,i,new gn(o.toArray()),rn.none())}}function Aw(s,e,n){s instanceof ao?function(i,o,c){const f=i.value.clone(),m=Wp(i.fieldTransforms,o,c.transformResults);f.setAll(m),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(s,e,n):s instanceof ls?function(i,o,c){if(!Ml(i.precondition,o))return void o.convertToUnknownDocument(c.version);const f=Wp(i.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(sm(i)),m.setAll(f),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(s,e,n):function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function Wa(s,e,n,i){return s instanceof ao?function(o,c,f,m){if(!Ml(o.precondition,c))return f;const v=o.value.clone(),b=Yp(o.fieldTransforms,m,c);return v.setAll(b),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),null}(s,e,n,i):s instanceof ls?function(o,c,f,m){if(!Ml(o.precondition,c))return f;const v=Yp(o.fieldTransforms,m,c),b=c.data;return b.setAll(sm(o)),b.setAll(v),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),f===null?null:f.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(s,e,n,i):function(o,c,f){return Ml(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f}(s,e,n)}function Rw(s,e){let n=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),c=Zg(i.transform,o||null);c!=null&&(n===null&&(n=nn.empty()),n.set(i.field,c))}return n||null}function Gp(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&zi(n,i,(o,c)=>Nw(o,c))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class ao extends su{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ls extends su{constructor(e,n,i,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function sm(s){const e=new Map;return s.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}}),e}function Wp(s,e,n){const i=new Map;Be(s.length===n.length);for(let o=0;o<n.length;o++){const c=s[o],f=c.transform,m=e.data.field(c.field);i.set(c.field,xw(f,m,n[o]))}return i}function Yp(s,e,n){const i=new Map;for(const o of s){const c=o.transform,f=n.data.field(o.field);i.set(o.field,Cw(c,f,e))}return i}class iu extends su{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Dw extends su{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Lw{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&Aw(c,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Wa(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Wa(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Jg();return this.mutations.forEach(o=>{const c=e.get(o.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=n.has(o.key)?null:m;const v=rm(f,m);v!==null&&i.set(o.key,v),f.isValidDocument()||f.convertToNoDocument(Ee.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&zi(this.mutations,e.mutations,(n,i)=>Gp(n,i))&&zi(this.baseMutations,e.baseMutations,(n,i)=>Gp(n,i))}}class Ih{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){Be(e.mutations.length===i.length);let o=function(){return Ew}();const c=e.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,i[f].version);return new Ih(e,n,i,o)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ow{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pw{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ht,De;function Mw(s){switch(s){default:return be();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function im(s){if(s===void 0)return Tr("GRPC error has no .code"),K.UNKNOWN;switch(s){case ht.OK:return K.OK;case ht.CANCELLED:return K.CANCELLED;case ht.UNKNOWN:return K.UNKNOWN;case ht.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ht.INTERNAL:return K.INTERNAL;case ht.UNAVAILABLE:return K.UNAVAILABLE;case ht.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ht.NOT_FOUND:return K.NOT_FOUND;case ht.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ht.ABORTED:return K.ABORTED;case ht.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ht.DATA_LOSS:return K.DATA_LOSS;default:return be()}}(De=ht||(ht={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Uw(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Fw=new zs([4294967295,4294967295],0);function Jp(s){const e=Uw().encode(s),n=new Ag;return n.update(e),new Uint8Array(n.digest())}function Xp(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new zs([n,i],0),new zs([o,c],0)]}class Ah{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new $a(`Invalid padding: ${n}`);if(i<0)throw new $a(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new $a(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new $a(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=zs.fromNumber(this.Ie)}Ee(e,n,i){let o=e.add(n.multiply(zs.fromNumber(i)));return o.compare(Fw)===1&&(o=new zs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Jp(e),[i,o]=Xp(n);for(let c=0;c<this.hashCount;c++){const f=this.Ee(i,o,c);if(!this.de(f))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Ah(c,o,n);return i.forEach(m=>f.insert(m)),f}insert(e){if(this.Ie===0)return;const n=Jp(e),[i,o]=Xp(n);for(let c=0;c<this.hashCount;c++){const f=this.Ee(i,o,c);this.Ae(f)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class $a extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class au{constructor(e,n,i,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,oo.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new au(Ee.min(),o,new rt(Fe),Cr(),Ie())}}class oo{constructor(e,n,i,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new oo(i,n,Ie(),Ie(),Ie())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ul{constructor(e,n,i,o){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=o}}class am{constructor(e,n){this.targetId=e,this.me=n}}class om{constructor(e,n,i=Ot.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class Zp{constructor(){this.fe=0,this.ge=tg(),this.pe=Ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ie(),n=Ie(),i=Ie();return this.ge.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:be()}}),new oo(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=tg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class zw{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cr(),this.qe=eg(),this.Qe=new rt(Fe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:be()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,o)=>{this.ze(o)&&n(o)})}He(e){const n=e.targetId,i=e.me.count,o=this.Je(n);if(o){const c=o.target;if(oh(c))if(i===0){const f=new ge(c.path);this.Ue(n,f,jt.newNoDocument(f,Ee.min()))}else Be(i===1);else{const f=this.Ye(n);if(f!==i){const m=this.Ze(e),v=m?this.Xe(m,e,f):1;if(v!==0){this.je(n);const b=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,b)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=n;let f,m;try{f=js(i).toUint8Array()}catch(v){if(v instanceof zg)return Fi("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{m=new Ah(f,o,c)}catch(v){return Fi(v instanceof $a?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return m.Ie===0?null:m}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let o=0;return i.forEach(c=>{const f=this.Le.tt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.Ue(n,c,null),o++)}),o}rt(e){const n=new Map;this.Be.forEach((c,f)=>{const m=this.Je(f);if(m){if(c.current&&oh(m.target)){const v=new ge(m.target.path);this.ke.get(v)!==null||this.it(f,v)||this.Ue(f,v,jt.newNoDocument(v,e))}c.be&&(n.set(f,c.ve()),c.Ce())}});let i=Ie();this.qe.forEach((c,f)=>{let m=!0;f.forEachWhile(v=>{const b=this.Je(v);return!b||b.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(i=i.add(c))}),this.ke.forEach((c,f)=>f.setReadTime(e));const o=new au(e,n,this.Qe,this.ke,i);return this.ke=Cr(),this.qe=eg(),this.Qe=new rt(Fe),o}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Zp,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Lt(Fe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Zp),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function eg(){return new rt(ge.comparator)}function tg(){return new rt(ge.comparator)}const Vw={asc:"ASCENDING",desc:"DESCENDING"},jw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bw={and:"AND",or:"OR"};class qw{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function uh(s,e){return s.useProto3Json||Xl(e)?e:{value:e}}function Hl(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lm(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function $w(s,e){return Hl(s,e.toTimestamp())}function sr(s){return Be(!!s),Ee.fromTimestamp(function(e){const n=as(e);return new bt(n.seconds,n.nanos)}(s))}function Rh(s,e){return ch(s,e).canonicalString()}function ch(s,e){const n=function(i){return new et(["projects",i.projectId,"databases",i.database])}(s).child("documents");return e===void 0?n:n.child(e)}function um(s){const e=et.fromString(s);return Be(pm(e)),e}function hh(s,e){return Rh(s.databaseId,e.path)}function Kc(s,e){const n=um(e);if(n.get(1)!==s.databaseId.projectId)throw new ce(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ce(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new ge(hm(n))}function cm(s,e){return Rh(s.databaseId,e)}function Kw(s){const e=um(s);return e.length===4?et.emptyPath():hm(e)}function fh(s){return new et(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function hm(s){return Be(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function ng(s,e,n){return{name:hh(s,e),fields:n.value.mapValue.fields}}function Qw(s,e){let n;if("targetChange"in e){e.targetChange;const i=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(v,b){return v.useProto3Json?(Be(b===void 0||typeof b=="string"),Ot.fromBase64String(b||"")):(Be(b===void 0||b instanceof Buffer||b instanceof Uint8Array),Ot.fromUint8Array(b||new Uint8Array))}(s,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(v){const b=v.code===void 0?K.UNKNOWN:im(v.code);return new ce(b,v.message||"")}(f);n=new om(i,o,c,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Kc(s,i.document.name),c=sr(i.document.updateTime),f=i.document.createTime?sr(i.document.createTime):Ee.min(),m=new nn({mapValue:{fields:i.document.fields}}),v=jt.newFoundDocument(o,c,f,m),b=i.targetIds||[],_=i.removedTargetIds||[];n=new Ul(b,_,v.key,v)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Kc(s,i.document),c=i.readTime?sr(i.readTime):Ee.min(),f=jt.newNoDocument(o,c),m=i.removedTargetIds||[];n=new Ul([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Kc(s,i.document),c=i.removedTargetIds||[];n=new Ul([],c,o,null)}else{if(!("filter"in e))return be();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,f=new Pw(o,c),m=i.targetId;n=new am(m,f)}}return n}function Hw(s,e){let n;if(e instanceof ao)n={update:ng(s,e.key,e.value)};else if(e instanceof iu)n={delete:hh(s,e.key)};else if(e instanceof ls)n={update:ng(s,e.key,e.data),updateMask:nb(e.fieldMask)};else{if(!(e instanceof Dw))return be();n={verify:hh(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,c){const f=c.transform;if(f instanceof Kl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof no)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ro)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Ql)return{fieldPath:c.field.canonicalString(),increment:f.Pe};throw be()}(0,i))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:$w(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:be()}(s,e.precondition)),n}function Gw(s,e){return s&&s.length>0?(Be(e!==void 0),s.map(n=>function(i,o){let c=i.updateTime?sr(i.updateTime):sr(o);return c.isEqual(Ee.min())&&(c=sr(o)),new Iw(c,i.transformResults||[])}(n,e))):[]}function Ww(s,e){return{documents:[cm(s,e.path)]}}function Yw(s,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=cm(s,o);const c=function(v){if(v.length!==0)return dm(or.create(v,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const f=function(v){if(v.length!==0)return v.map(b=>function(_){return{field:Oi(_.field),direction:Zw(_.dir)}}(b))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=uh(s,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{_t:n,parent:o}}function Jw(s){let e=Kw(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){Be(i===1);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let c=[];n.where&&(c=function(_){const O=fm(_);return O instanceof or&&qg(O)?O.getFilters():[O]}(n.where));let f=[];n.orderBy&&(f=function(_){return _.map(O=>function(F){return new $l(Pi(F.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(O))}(n.orderBy));let m=null;n.limit&&(m=function(_){let O;return O=typeof _=="object"?_.value:_,Xl(O)?null:O}(n.limit));let v=null;n.startAt&&(v=function(_){const O=!!_.before,F=_.values||[];return new ql(F,O)}(n.startAt));let b=null;return n.endAt&&(b=function(_){const O=!_.before,F=_.values||[];return new ql(F,O)}(n.endAt)),gw(e,o,f,c,m,"F",v,b)}function Xw(s,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fm(s){return s.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Pi(e.unaryFilter.field);return wt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Pi(e.unaryFilter.field);return wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Pi(e.unaryFilter.field);return wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Pi(e.unaryFilter.field);return wt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(s):s.fieldFilter!==void 0?function(e){return wt.create(Pi(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(e.fieldFilter.op),e.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(e){return or.create(e.compositeFilter.filters.map(n=>fm(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return be()}}(e.compositeFilter.op))}(s):be()}function Zw(s){return Vw[s]}function eb(s){return jw[s]}function tb(s){return Bw[s]}function Oi(s){return{fieldPath:s.canonicalString()}}function Pi(s){return Dt.fromServerFormat(s.fieldPath)}function dm(s){return s instanceof wt?function(e){if(e.op==="=="){if(Bp(e.value))return{unaryFilter:{field:Oi(e.field),op:"IS_NAN"}};if(jp(e.value))return{unaryFilter:{field:Oi(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Bp(e.value))return{unaryFilter:{field:Oi(e.field),op:"IS_NOT_NAN"}};if(jp(e.value))return{unaryFilter:{field:Oi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oi(e.field),op:eb(e.op),value:e.value}}}(s):s instanceof or?function(e){const n=e.getFilters().map(i=>dm(i));return n.length===1?n[0]:{compositeFilter:{op:tb(e.op),filters:n}}}(s):be()}function nb(s){const e=[];return s.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pm(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class es{constructor(e,n,i,o,c=Ee.min(),f=Ee.min(),m=Ot.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=v}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rb{constructor(e){this.ct=e}}function sb(s){const e=Jw({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?lh(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ib{constructor(){this.un=new ab}addToCollectionParentIndex(e,n){return this.un.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(is.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(is.min())}updateCollectionGroup(e,n,i){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class ab{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Lt(et.comparator),c=!o.has(i);return this.index[n]=o.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Lt(et.comparator)).toArray()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Bi(0)}static kn(){return new Bi(-1)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ob{constructor(){this.changes=new Hi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?H.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ub{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(i!==null&&Wa(i.mutation,o,gn.empty(),bt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ie()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ie()){const o=Fs();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,i).next(c=>{let f=qa();return c.forEach((m,v)=>{f=f.insert(m,v.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const i=Fs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ie()))}populateOverlays(e,n,i){const o=[];return i.forEach(c=>{n.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,i,o){let c=Cr();const f=Ga(),m=function(){return Ga()}();return n.forEach((v,b)=>{const _=i.get(b.key);o.has(b.key)&&(_===void 0||_.mutation instanceof ls)?c=c.insert(b.key,b):_!==void 0?(f.set(b.key,_.mutation.getFieldMask()),Wa(_.mutation,b,_.mutation.getFieldMask(),bt.now())):f.set(b.key,gn.empty())}),this.recalculateAndSaveOverlays(e,c).next(v=>(v.forEach((b,_)=>f.set(b,_)),n.forEach((b,_)=>{var O;return m.set(b,new lb(_,(O=f.get(b))!==null&&O!==void 0?O:null))}),m))}recalculateAndSaveOverlays(e,n){const i=Ga();let o=new rt((f,m)=>f-m),c=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(v=>{const b=n.get(v);if(b===null)return;let _=i.get(v)||gn.empty();_=m.applyToLocalView(b,_),i.set(v,_);const O=(o.get(m.batchId)||Ie()).add(v);o=o.insert(m.batchId,O)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),b=v.key,_=v.value,O=Jg();_.forEach(F=>{if(!c.has(F)){const q=rm(n.get(F),i.get(F));q!==null&&O.set(F,q),c=c.add(F)}}),f.push(this.documentOverlayCache.saveOverlays(e,b,O))}return H.waitFor(f)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,o){return function(c){return ge.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next(c=>{const f=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-c.size):H.resolve(Fs());let m=-1,v=c;return f.next(b=>H.forEach(b,(_,O)=>(m<O.largestBatchId&&(m=O.largestBatchId),c.get(_)?H.resolve():this.remoteDocumentCache.getEntry(e,_).next(F=>{v=v.insert(_,F)}))).next(()=>this.populateOverlays(e,b,c)).next(()=>this.computeViews(e,v,b,Ie())).next(_=>({batchId:m,changes:Yg(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(i=>{let o=qa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const c=n.collectionGroup;let f=qa();return this.indexManager.getCollectionParents(e,c).next(m=>H.forEach(m,v=>{const b=function(_,O){return new Zl(O,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,v.child(c));return this.getDocumentsMatchingCollectionQuery(e,b,i,o).next(_=>{_.forEach((O,F)=>{f=f.insert(O,F)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,o))).next(f=>{c.forEach((v,b)=>{const _=b.getKey();f.get(_)===null&&(f=f.insert(_,jt.newInvalidDocument(_)))});let m=qa();return f.forEach((v,b)=>{const _=c.get(v);_!==void 0&&Wa(_.mutation,b,gn.empty(),bt.now()),nu(n,b)&&(m=m.insert(v,b))}),m})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cb{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return H.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:sr(i.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:sb(i.bundledQuery),readTime:sr(i.readTime)}}(n)),H.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hb{constructor(){this.overlays=new rt(ge.comparator),this.Ir=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Fs();return H.forEach(n,o=>this.getOverlay(e,o).next(c=>{c!==null&&i.set(o,c)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((o,c)=>{this.ht(e,n,c)}),H.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.Ir.delete(i)),H.resolve()}getOverlaysForCollection(e,n,i){const o=Fs(),c=n.length+1,f=new ge(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const v=m.getNext().value,b=v.getKey();if(!n.isPrefixOf(b.path))break;b.path.length===c&&v.largestBatchId>i&&o.set(v.getKey(),v)}return H.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let c=new rt((b,_)=>b-_);const f=this.overlays.getIterator();for(;f.hasNext();){const b=f.getNext().value;if(b.getKey().getCollectionGroup()===n&&b.largestBatchId>i){let _=c.get(b.largestBatchId);_===null&&(_=Fs(),c=c.insert(b.largestBatchId,_)),_.set(b.getKey(),b)}}const m=Fs(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((b,_)=>m.set(b,_)),!(m.size()>=o)););return H.resolve(m)}ht(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const f=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new Ow(n,i));let c=this.Ir.get(n);c===void 0&&(c=Ie(),this.Ir.set(n,c)),this.Ir.set(n,c.add(i.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fb{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dh{constructor(){this.Tr=new Lt(Ct.Er),this.dr=new Lt(Ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Ct(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new Ct(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new ge(new et([])),i=new Ct(n,e),o=new Ct(n,e+1),c=[];return this.dr.forEachInRange([i,o],f=>{this.Vr(f),c.push(f.key)}),c}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ge(new et([])),i=new Ct(n,e),o=new Ct(n,e+1);let c=Ie();return this.dr.forEachInRange([i,o],f=>{c=c.add(f.key)}),c}containsKey(e){const n=new Ct(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ct{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ge.comparator(e.key,n.key)||Fe(e.wr,n.wr)}static Ar(e,n){return Fe(e.wr,n.wr)||ge.comparator(e.key,n.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class db{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Lt(Ct.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const c=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new Lw(c,n,i,o);this.mutationQueue.push(f);for(const m of o)this.br=this.br.add(new Ct(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return H.resolve(f)}lookupMutationBatch(e,n){return H.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.vr(i),c=o<0?0:o;return H.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ct(n,0),o=new Ct(n,Number.POSITIVE_INFINITY),c=[];return this.br.forEachInRange([i,o],f=>{const m=this.Dr(f.wr);c.push(m)}),H.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Lt(Fe);return n.forEach(o=>{const c=new Ct(o,0),f=new Ct(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([c,f],m=>{i=i.add(m.wr)})}),H.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let c=i;ge.isDocumentKey(c)||(c=c.child(""));const f=new Ct(new ge(c),0);let m=new Lt(Fe);return this.br.forEachWhile(v=>{const b=v.key.path;return!!i.isPrefixOf(b)&&(b.length===o&&(m=m.add(v.wr)),!0)},f),H.resolve(this.Cr(m))}Cr(e){const n=[];return e.forEach(i=>{const o=this.Dr(i);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Be(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return H.forEach(n.mutations,o=>{const c=new Ct(o.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new Ct(n,0),o=this.br.firstAfterOrEqual(i);return H.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pb{constructor(e){this.Mr=e,this.docs=function(){return new rt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),c=o?o.size:0,f=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return H.resolve(i?i.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let i=Cr();return n.forEach(o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():jt.newInvalidDocument(o))}),H.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let c=Cr();const f=n.path,m=new ge(f.child("")),v=this.docs.getIteratorFrom(m);for(;v.hasNext();){const{key:b,value:{document:_}}=v.getNext();if(!f.isPrefixOf(b.path))break;b.path.length>f.length+1||Y0(W0(_),i)<=0||(o.has(_.key)||nu(n,_))&&(c=c.insert(_.key,_.mutableCopy()))}return H.resolve(c)}getAllFromCollectionGroup(e,n,i,o){be()}Or(e,n){return H.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new gb(this)}getSize(e){return H.resolve(this.size)}}class gb extends ob{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)}),H.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mb{constructor(e){this.persistence=e,this.Nr=new Hi(n=>Ch(n),xh),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Dh,this.targetCount=0,this.kr=Bi.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,o)=>n(o)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),H.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Bi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Kn(n),H.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,i){let o=0;const c=[];return this.Nr.forEach((f,m)=>{m.sequenceNumber<=n&&i.get(m.targetId)===null&&(this.Nr.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),H.waitFor(c).next(()=>o)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return H.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),H.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach(f=>{c.push(o.markPotentiallyOrphaned(e,f))}),H.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return H.resolve(i)}containsKey(e,n){return H.resolve(this.Br.containsKey(n))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new kh(0),this.Kr=!1,this.Kr=!0,this.$r=new fb,this.referenceDelegate=e(this),this.Ur=new mb(this),this.indexManager=new ib,this.remoteDocumentCache=function(i){return new pb(i)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new rb(n),this.Gr=new cb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new db(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){le("MemoryPersistence","Starting transaction:",e);const o=new vb(this.Qr.next());return this.referenceDelegate.zr(),i(o).next(c=>this.referenceDelegate.jr(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Hr(e,n){return H.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class vb extends X0{constructor(e){super(),this.currentSequenceNumber=e}}class Lh{constructor(e){this.persistence=e,this.Jr=new Dh,this.Yr=null}static Zr(e){return new Lh(e)}get Xr(){if(this.Yr)return this.Yr;throw be()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),H.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(o=>this.Xr.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(c=>this.Xr.add(c.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,i=>{const o=ge.fromPath(i);return this.ei(e,o).next(c=>{c||n.removeEntry(o,Ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return H.or([()=>H.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Oh{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=o}static Wi(e,n){let i=Ie(),o=Ie();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Oh(e,n.fromCache,i,o)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bb{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ev()?8:Z0(wv())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,o){const c={result:null};return this.Yi(e,n).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.Zi(e,n,o,i).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new wb;return this.Xi(e,n,f).next(m=>{if(c.result=m,this.zi)return this.es(e,n,f,m.size)})}).next(()=>c.result)}es(e,n,i,o){return i.documentReadCount<this.ji?(ja()<=Pe.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Li(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(ja()<=Pe.DEBUG&&le("QueryEngine","Query:",Li(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(ja()<=Pe.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Li(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rr(n))):H.resolve())}Yi(e,n){if(Qp(n))return H.resolve(null);let i=rr(n);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=lh(n,null,"F"),i=rr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(c=>{const f=Ie(...c);return this.Ji.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,i).next(v=>{const b=this.ts(n,m);return this.ns(n,b,f,v.readTime)?this.Yi(e,lh(n,null,"F")):this.rs(e,b,n,v)}))})))}Zi(e,n,i,o){return Qp(n)||o.isEqual(Ee.min())?H.resolve(null):this.Ji.getDocuments(e,i).next(c=>{const f=this.ts(n,c);return this.ns(n,f,i,o)?H.resolve(null):(ja()<=Pe.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Li(n)),this.rs(e,f,n,G0(o,-1)).next(m=>m))})}ts(e,n){let i=new Lt(Gg(e));return n.forEach((o,c)=>{nu(e,c)&&(i=i.add(c))}),i}ns(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Xi(e,n,i){return ja()<=Pe.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Li(n)),this.Ji.getDocumentsMatchingQuery(e,n,is.min(),i)}rs(e,n,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next(c=>(n.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Eb{constructor(e,n,i,o){this.persistence=e,this.ss=n,this.serializer=o,this.os=new rt(Fe),this._s=new Hi(c=>Ch(c),xh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ub(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function kb(s,e,n,i){return new Eb(s,e,n,i)}async function gm(s,e){const n=ke(s);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next(c=>(o=c,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(c=>{const f=[],m=[];let v=Ie();for(const b of o){f.push(b.batchId);for(const _ of b.mutations)v=v.add(_.key)}for(const b of c){m.push(b.batchId);for(const _ of b.mutations)v=v.add(_.key)}return n.localDocuments.getDocuments(i,v).next(b=>({hs:b,removedBatchIds:f,addedBatchIds:m}))})})}function Sb(s,e){const n=ke(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),c=n.cs.newChangeBuffer({trackRemovals:!0});return function(f,m,v,b){const _=v.batch,O=_.keys();let F=H.resolve();return O.forEach(q=>{F=F.next(()=>b.getEntry(m,q)).next(J=>{const Z=v.docVersions.get(q);Be(Z!==null),J.version.compareTo(Z)<0&&(_.applyToRemoteDocument(J,v),J.isValidDocument()&&(J.setReadTime(v.commitVersion),b.addEntry(J)))})}),F.next(()=>f.mutationQueue.removeMutationBatch(m,_))}(n,i,e,c).next(()=>c.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let m=Ie();for(let v=0;v<f.mutationResults.length;++v)f.mutationResults[v].transformResults.length>0&&(m=m.add(f.batch.mutations[v].key));return m}(e))).next(()=>n.localDocuments.getDocuments(i,o))})}function mm(s){const e=ke(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function _b(s,e){const n=ke(s),i=e.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const m=[];e.targetChanges.forEach((_,O)=>{const F=o.get(O);if(!F)return;m.push(n.Ur.removeMatchingKeys(c,_.removedDocuments,O).next(()=>n.Ur.addMatchingKeys(c,_.addedDocuments,O)));let q=F.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(O)!==null?q=q.withResumeToken(Ot.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):_.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(_.resumeToken,i)),o=o.insert(O,q),function(J,Z,V){return J.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(F,q,_)&&m.push(n.Ur.updateTargetData(c,q))});let v=Cr(),b=Ie();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,_))}),m.push(Tb(c,f,e.documentUpdates).next(_=>{v=_.Ps,b=_.Is})),!i.isEqual(Ee.min())){const _=n.Ur.getLastRemoteSnapshotVersion(c).next(O=>n.Ur.setTargetsMetadata(c,c.currentSequenceNumber,i));m.push(_)}return H.waitFor(m).next(()=>f.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,v,b)).next(()=>v)}).then(c=>(n.os=o,c))}function Tb(s,e,n){let i=Ie(),o=Ie();return n.forEach(c=>i=i.add(c)),e.getEntries(s,i).next(c=>{let f=Cr();return n.forEach((m,v)=>{const b=c.get(m);v.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),v.isNoDocument()&&v.version.isEqual(Ee.min())?(e.removeEntry(m,v.readTime),f=f.insert(m,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||v.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(v),f=f.insert(m,v)):le("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",v.version)}),{Ps:f,Is:o}})}function Cb(s,e){const n=ke(s);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function xb(s,e){const n=ke(s);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return n.Ur.getTargetData(i,e).next(c=>c?(o=c,H.resolve(o)):n.Ur.allocateTargetId(i).next(f=>(o=new es(e,f,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=n.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function dh(s,e,n){const i=ke(s),o=i.os.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,f=>i.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!io(f))throw f;le("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function rg(s,e,n){const i=ke(s);let o=Ee.min(),c=Ie();return i.persistence.runTransaction("Execute query","readwrite",f=>function(m,v,b){const _=ke(m),O=_._s.get(b);return O!==void 0?H.resolve(_.os.get(O)):_.Ur.getTargetData(v,b)}(i,f,rr(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(f,m.targetId).next(v=>{c=v})}).next(()=>i.ss.getDocumentsMatchingQuery(f,e,n?o:Ee.min(),n?c:Ie())).next(m=>(Nb(i,vw(e),m),{documents:m,Ts:c})))}function Nb(s,e,n){let i=s.us.get(e)||Ee.min();n.forEach((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)}),s.us.set(e,i)}class sg{constructor(){this.activeTargetIds=_w()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ib{constructor(){this.so=new sg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new sg,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ab{_o(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ig{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Rl=null;function Qc(){return Rl===null?Rl=function(){return 268435456+Math.round(2147483648*Math.random())}():Rl++,"0x"+Rl.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Rb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Db{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zt="WebChannelConnection";class Lb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+e.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(e,n,i,o,c){const f=Qc(),m=this.xo(e,n.toUriEncodedString());le("RestConnection",`Sending RPC '${e}' ${f}:`,m,i);const v={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(v,o,c),this.No(e,m,v,i).then(b=>(le("RestConnection",`Received RPC '${e}' ${f}: `,b),b),b=>{throw Fi("RestConnection",`RPC '${e}' ${f} failed with error: `,b,"url: ",m,"request:",i),b})}Lo(e,n,i,o,c,f){return this.Mo(e,n,i,o,c)}Oo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,c)=>e[c]=o),i&&i.headers.forEach((o,c)=>e[c]=o)}xo(e,n){const i=Rb[e];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,o){const c=Qc();return new Promise((f,m)=>{const v=new Rg;v.setWithCredentials(!0),v.listenOnce(Dg.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Ol.NO_ERROR:const _=v.getResponseJson();le(zt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),f(_);break;case Ol.TIMEOUT:le(zt,`RPC '${e}' ${c} timed out`),m(new ce(K.DEADLINE_EXCEEDED,"Request time out"));break;case Ol.HTTP_ERROR:const O=v.getStatus();if(le(zt,`RPC '${e}' ${c} failed with status:`,O,"response text:",v.getResponseText()),O>0){let F=v.getResponseJson();Array.isArray(F)&&(F=F[0]);const q=F==null?void 0:F.error;if(q&&q.status&&q.message){const J=function(Z){const V=Z.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(V)>=0?V:K.UNKNOWN}(q.status);m(new ce(J,q.message))}else m(new ce(K.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new ce(K.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{le(zt,`RPC '${e}' ${c} completed.`)}});const b=JSON.stringify(o);le(zt,`RPC '${e}' ${c} sending request:`,o),v.send(n,"POST",b,i,15)})}Bo(e,n,i){const o=Qc(),c=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Pg(),m=Og(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(v.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(v.useFetchStreams=!0),this.Oo(v.initMessageHeaders,n,i),v.encodeInitMessageHeaders=!0;const _=c.join("");le(zt,`Creating RPC '${e}' stream ${o}: ${_}`,v);const O=f.createWebChannel(_,v);let F=!1,q=!1;const J=new Db({Io:V=>{q?le(zt,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(F||(le(zt,`Opening RPC '${e}' stream ${o} transport.`),O.open(),F=!0),le(zt,`RPC '${e}' stream ${o} sending:`,V),O.send(V))},To:()=>O.close()}),Z=(V,Se,me)=>{V.listen(Se,_e=>{try{me(_e)}catch(ve){setTimeout(()=>{throw ve},0)}})};return Z(O,Ba.EventType.OPEN,()=>{q||(le(zt,`RPC '${e}' stream ${o} transport opened.`),J.yo())}),Z(O,Ba.EventType.CLOSE,()=>{q||(q=!0,le(zt,`RPC '${e}' stream ${o} transport closed`),J.So())}),Z(O,Ba.EventType.ERROR,V=>{q||(q=!0,Fi(zt,`RPC '${e}' stream ${o} transport errored:`,V),J.So(new ce(K.UNAVAILABLE,"The operation could not be completed")))}),Z(O,Ba.EventType.MESSAGE,V=>{var Se;if(!q){const me=V.data[0];Be(!!me);const _e=me,ve=_e.error||((Se=_e[0])===null||Se===void 0?void 0:Se.error);if(ve){le(zt,`RPC '${e}' stream ${o} received error:`,ve);const We=ve.status;let Re=function(k){const T=ht[k];if(T!==void 0)return im(T)}(We),I=ve.message;Re===void 0&&(Re=K.INTERNAL,I="Unknown error status: "+We+" with message "+ve.message),q=!0,J.So(new ce(Re,I)),O.close()}else le(zt,`RPC '${e}' stream ${o} received:`,me),J.bo(me)}}),Z(m,Lg.STAT_EVENT,V=>{V.stat===rh.PROXY?le(zt,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===rh.NOPROXY&&le(zt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{J.wo()},0),J}}function Hc(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ou(s){return new qw(s,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ym{constructor(e,n,i=1e3,o=1.5,c=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=o,this.Qo=c,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-i);o>0&&le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vm{constructor(e,n,i,o,c,f,m,v){this.ui=e,this.Ho=i,this.Jo=o,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ym(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Tr(n.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Yo===n&&this.P_(i,o)},i=>{e(()=>{const o=new ce(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{i(()=>this.I_(o))}),this.stream.onMessage(o=>{i(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ob extends vm{constructor(e,n,i,o,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,f),this.serializer=c}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Qw(this.serializer,e),i=function(o){if(!("targetChange"in o))return Ee.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Ee.min():c.readTime?sr(c.readTime):Ee.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=fh(this.serializer),n.addTarget=function(o,c){let f;const m=c.target;if(f=oh(m)?{documents:Ww(o,m)}:{query:Yw(o,m)._t},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=lm(o,c.resumeToken);const v=uh(o,c.expectedCount);v!==null&&(f.expectedCount=v)}else if(c.snapshotVersion.compareTo(Ee.min())>0){f.readTime=Hl(o,c.snapshotVersion.toTimestamp());const v=uh(o,c.expectedCount);v!==null&&(f.expectedCount=v)}return f}(this.serializer,e);const i=Xw(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=fh(this.serializer),n.removeTarget=e,this.a_(n)}}class Pb extends vm{constructor(e,n,i,o,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,f),this.serializer=c}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Be(!!e.streamToken),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Gw(e.writeResults,e.commitTime),i=sr(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=fh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Hw(this.serializer,i))};this.a_(n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mb extends class{}{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ce(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Mo(e,ch(n,i),o,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ce(K.UNKNOWN,c.toString())})}Lo(e,n,i,o,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Lo(e,ch(n,i),o,f,m,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ce(K.UNKNOWN,f.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ub{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Tr(n),this.D_=!1):le("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fb{constructor(e,n,i,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=c,this.k_._o(f=>{i.enqueueAndForget(async()=>{$s(this)&&(le("RemoteStore","Restarting streams for network reachability change."),await async function(m){const v=ke(m);v.L_.add(4),await lo(v),v.q_.set("Unknown"),v.L_.delete(4),await lu(v)}(this))})}),this.q_=new Ub(i,o)}}async function lu(s){if($s(s))for(const e of s.B_)await e(!0)}async function lo(s){for(const e of s.B_)await e(!1)}function wm(s,e){const n=ke(s);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Fh(n)?Uh(n):Gi(n).r_()&&Mh(n,e))}function Ph(s,e){const n=ke(s),i=Gi(n);n.N_.delete(e),i.r_()&&bm(n,e),n.N_.size===0&&(i.r_()?i.o_():$s(n)&&n.q_.set("Unknown"))}function Mh(s,e){if(s.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Gi(s).A_(e)}function bm(s,e){s.Q_.xe(e),Gi(s).R_(e)}function Uh(s){s.Q_=new zw({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>s.N_.get(e)||null,tt:()=>s.datastore.serializer.databaseId}),Gi(s).start(),s.q_.v_()}function Fh(s){return $s(s)&&!Gi(s).n_()&&s.N_.size>0}function $s(s){return ke(s).L_.size===0}function Em(s){s.Q_=void 0}async function zb(s){s.q_.set("Online")}async function Vb(s){s.N_.forEach((e,n)=>{Mh(s,e)})}async function jb(s,e){Em(s),Fh(s)?(s.q_.M_(e),Uh(s)):s.q_.set("Unknown")}async function Bb(s,e,n){if(s.q_.set("Online"),e instanceof om&&e.state===2&&e.cause)try{await async function(i,o){const c=o.cause;for(const f of o.targetIds)i.N_.has(f)&&(await i.remoteSyncer.rejectListen(f,c),i.N_.delete(f),i.Q_.removeTarget(f))}(s,e)}catch(i){le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Gl(s,i)}else if(e instanceof Ul?s.Q_.Ke(e):e instanceof am?s.Q_.He(e):s.Q_.We(e),!n.isEqual(Ee.min()))try{const i=await mm(s.localStore);n.compareTo(i)>=0&&await function(o,c){const f=o.Q_.rt(c);return f.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const b=o.N_.get(v);b&&o.N_.set(v,b.withResumeToken(m.resumeToken,c))}}),f.targetMismatches.forEach((m,v)=>{const b=o.N_.get(m);if(!b)return;o.N_.set(m,b.withResumeToken(Ot.EMPTY_BYTE_STRING,b.snapshotVersion)),bm(o,m);const _=new es(b.target,m,v,b.sequenceNumber);Mh(o,_)}),o.remoteSyncer.applyRemoteEvent(f)}(s,n)}catch(i){le("RemoteStore","Failed to raise snapshot:",i),await Gl(s,i)}}async function Gl(s,e,n){if(!io(e))throw e;s.L_.add(1),await lo(s),s.q_.set("Offline"),n||(n=()=>mm(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{le("RemoteStore","Retrying IndexedDB access"),await n(),s.L_.delete(1),await lu(s)})}function km(s,e){return e().catch(n=>Gl(s,n,e))}async function uu(s){const e=ke(s),n=os(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qb(e);)try{const o=await Cb(e.localStore,i);if(o===null){e.O_.length===0&&n.o_();break}i=o.batchId,$b(e,o)}catch(o){await Gl(e,o)}Sm(e)&&_m(e)}function qb(s){return $s(s)&&s.O_.length<10}function $b(s,e){s.O_.push(e);const n=os(s);n.r_()&&n.V_&&n.m_(e.mutations)}function Sm(s){return $s(s)&&!os(s).n_()&&s.O_.length>0}function _m(s){os(s).start()}async function Kb(s){os(s).p_()}async function Qb(s){const e=os(s);for(const n of s.O_)e.m_(n.mutations)}async function Hb(s,e,n){const i=s.O_.shift(),o=Ih.from(i,e,n);await km(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await uu(s)}async function Gb(s,e){e&&os(s).V_&&await async function(n,i){if(function(o){return Mw(o)&&o!==K.ABORTED}(i.code)){const o=n.O_.shift();os(n).s_(),await km(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await uu(n)}}(s,e),Sm(s)&&_m(s)}async function ag(s,e){const n=ke(s);n.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const i=$s(n);n.L_.add(3),await lo(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await lu(n)}async function Wb(s,e){const n=ke(s);e?(n.L_.delete(2),await lu(n)):e||(n.L_.add(2),await lo(n),n.q_.set("Unknown"))}function Gi(s){return s.K_||(s.K_=function(e,n,i){const o=ke(e);return o.w_(),new Ob(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(s.datastore,s.asyncQueue,{Eo:zb.bind(null,s),Ro:Vb.bind(null,s),mo:jb.bind(null,s),d_:Bb.bind(null,s)}),s.B_.push(async e=>{e?(s.K_.s_(),Fh(s)?Uh(s):s.q_.set("Unknown")):(await s.K_.stop(),Em(s))})),s.K_}function os(s){return s.U_||(s.U_=function(e,n,i){const o=ke(e);return o.w_(),new Pb(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Kb.bind(null,s),mo:Gb.bind(null,s),f_:Qb.bind(null,s),g_:Hb.bind(null,s)}),s.B_.push(async e=>{e?(s.U_.s_(),await uu(s)):(await s.U_.stop(),s.O_.length>0&&(le("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))})),s.U_}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zh{constructor(e,n,i,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,c){const f=Date.now()+i,m=new zh(e,n,f,o,c);return m.start(i),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vh(s,e){if(Tr("AsyncQueue",`${e}: ${s}`),io(s))return new ce(K.UNAVAILABLE,`${e}: ${s}`);throw s}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ui{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ge.comparator(n.key,i.key):(n,i)=>ge.comparator(n.key,i.key),this.keyedMap=qa(),this.sortedSet=new rt(this.comparator)}static emptySet(e){return new Ui(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ui)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ui;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class og{constructor(){this.W_=new rt(ge.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):be():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class qi{constructor(e,n,i,o,c,f,m,v,b){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=v,this.hasCachedResults=b}static fromInitialDocuments(e,n,i,o,c){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new qi(e,n,Ui.emptySet(n),f,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yb{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Jb{constructor(){this.queries=lg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,n){const i=ke(e),o=i.queries;i.queries=lg(),o.forEach((c,f)=>{for(const m of f.j_)m.onError(n)})})(this,new ce(K.ABORTED,"Firestore shutting down"))}}function lg(){return new Hi(s=>Hg(s),tu)}async function jh(s,e){const n=ke(s);let i=3;const o=e.query;let c=n.queries.get(o);c?!c.H_()&&e.J_()&&(i=2):(c=new Yb,i=e.J_()?0:1);try{switch(i){case 0:c.z_=await n.onListen(o,!0);break;case 1:c.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Vh(f,`Initialization of query '${Li(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,c),c.j_.push(e),e.Z_(n.onlineState),c.z_&&e.X_(c.z_)&&qh(n)}async function Bh(s,e){const n=ke(s),i=e.query;let o=3;const c=n.queries.get(i);if(c){const f=c.j_.indexOf(e);f>=0&&(c.j_.splice(f,1),c.j_.length===0?o=e.J_()?0:1:!c.H_()&&e.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Xb(s,e){const n=ke(s);let i=!1;for(const o of e){const c=o.query,f=n.queries.get(c);if(f){for(const m of f.j_)m.X_(o)&&(i=!0);f.z_=o}}i&&qh(n)}function Zb(s,e,n){const i=ke(s),o=i.queries.get(e);if(o)for(const c of o.j_)c.onError(n);i.queries.delete(e)}function qh(s){s.Y_.forEach(e=>{e.next()})}var ph,ug;(ug=ph||(ph={})).ea="default",ug.Cache="cache";class $h{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new qi(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=qi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ph.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Tm{constructor(e){this.key=e}}class Cm{constructor(e){this.key=e}}class e1{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ie(),this.mutatedKeys=Ie(),this.Aa=Gg(e),this.Ra=new Ui(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new og,o=n?n.Ra:this.Ra;let c=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,O)=>{const F=o.get(_),q=nu(this.query,O)?O:null,J=!!F&&this.mutatedKeys.has(F.key),Z=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let V=!1;F&&q?F.data.isEqual(q.data)?J!==Z&&(i.track({type:3,doc:q}),V=!0):this.ga(F,q)||(i.track({type:2,doc:q}),V=!0,(v&&this.Aa(q,v)>0||b&&this.Aa(q,b)<0)&&(m=!0)):!F&&q?(i.track({type:0,doc:q}),V=!0):F&&!q&&(i.track({type:1,doc:F}),V=!0,(v||b)&&(m=!0)),V&&(q?(f=f.add(q),c=Z?c.add(_):c.delete(_)):(f=f.delete(_),c=c.delete(_)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),c=c.delete(_.key),i.track({type:1,doc:_})}return{Ra:f,fa:i,ns:m,mutatedKeys:c}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const c=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const f=e.fa.G_();f.sort((_,O)=>function(F,q){const J=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return J(F)-J(q)}(_.type,O.type)||this.Aa(_.doc,O.doc)),this.pa(i),o=o!=null&&o;const m=n&&!o?this.ya():[],v=this.da.size===0&&this.current&&!o?1:0,b=v!==this.Ea;return this.Ea=v,f.length!==0||b?{snapshot:new qi(this.query,e.Ra,c,f,e.mutatedKeys,v===0,b,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:m}:{wa:m}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new og,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ie(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new Cm(i))}),this.da.forEach(i=>{e.has(i)||n.push(new Tm(i))}),n}ba(e){this.Ta=e.Ts,this.da=Ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return qi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class t1{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class n1{constructor(e){this.key=e,this.va=!1}}class r1{constructor(e,n,i,o,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Ca={},this.Fa=new Hi(m=>Hg(m),tu),this.Ma=new Map,this.xa=new Set,this.Oa=new rt(ge.comparator),this.Na=new Map,this.La=new Dh,this.Ba={},this.ka=new Map,this.qa=Bi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function s1(s,e,n=!0){const i=Dm(s);let o;const c=i.Fa.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.Da()):o=await xm(i,e,n,!0),o}async function i1(s,e){const n=Dm(s);await xm(n,e,!0,!1)}async function xm(s,e,n,i){const o=await xb(s.localStore,rr(e)),c=o.targetId,f=s.sharedClientState.addLocalQueryTarget(c,n);let m;return i&&(m=await a1(s,e,c,f==="current",o.resumeToken)),s.isPrimaryClient&&n&&wm(s.remoteStore,o),m}async function a1(s,e,n,i,o){s.Ka=(O,F,q)=>async function(J,Z,V,Se){let me=Z.view.ma(V);me.ns&&(me=await rg(J.localStore,Z.query,!1).then(({documents:Re})=>Z.view.ma(Re,me)));const _e=Se&&Se.targetChanges.get(Z.targetId),ve=Se&&Se.targetMismatches.get(Z.targetId)!=null,We=Z.view.applyChanges(me,J.isPrimaryClient,_e,ve);return hg(J,Z.targetId,We.wa),We.snapshot}(s,O,F,q);const c=await rg(s.localStore,e,!0),f=new e1(e,c.Ts),m=f.ma(c.documents),v=oo.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",o),b=f.applyChanges(m,s.isPrimaryClient,v);hg(s,n,b.wa);const _=new t1(e,n,f);return s.Fa.set(e,_),s.Ma.has(n)?s.Ma.get(n).push(e):s.Ma.set(n,[e]),b.snapshot}async function o1(s,e,n){const i=ke(s),o=i.Fa.get(e),c=i.Ma.get(o.targetId);if(c.length>1)return i.Ma.set(o.targetId,c.filter(f=>!tu(f,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await dh(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Ph(i.remoteStore,o.targetId),gh(i,o.targetId)}).catch(so)):(gh(i,o.targetId),await dh(i.localStore,o.targetId,!0))}async function l1(s,e){const n=ke(s),i=n.Fa.get(e),o=n.Ma.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ph(n.remoteStore,i.targetId))}async function u1(s,e,n){const i=m1(s);try{const o=await function(c,f){const m=ke(c),v=bt.now(),b=f.reduce((F,q)=>F.add(q.key),Ie());let _,O;return m.persistence.runTransaction("Locally write mutations","readwrite",F=>{let q=Cr(),J=Ie();return m.cs.getEntries(F,b).next(Z=>{q=Z,q.forEach((V,Se)=>{Se.isValidDocument()||(J=J.add(V))})}).next(()=>m.localDocuments.getOverlayedDocuments(F,q)).next(Z=>{_=Z;const V=[];for(const Se of f){const me=Rw(Se,_.get(Se.key).overlayedDocument);me!=null&&V.push(new ls(Se.key,me,Vg(me.value.mapValue),rn.exists(!0)))}return m.mutationQueue.addMutationBatch(F,v,V,f)}).next(Z=>{O=Z;const V=Z.applyToLocalDocumentSet(_,J);return m.documentOverlayCache.saveOverlays(F,Z.batchId,V)})}).then(()=>({batchId:O.batchId,changes:Yg(_)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(c,f,m){let v=c.Ba[c.currentUser.toKey()];v||(v=new rt(Fe)),v=v.insert(f,m),c.Ba[c.currentUser.toKey()]=v}(i,o.batchId,n),await uo(i,o.changes),await uu(i.remoteStore)}catch(o){const c=Vh(o,"Failed to persist write");n.reject(c)}}async function Nm(s,e){const n=ke(s);try{const i=await _b(n.localStore,e);e.targetChanges.forEach((o,c)=>{const f=n.Na.get(c);f&&(Be(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.va=!0:o.modifiedDocuments.size>0?Be(f.va):o.removedDocuments.size>0&&(Be(f.va),f.va=!1))}),await uo(n,i,e)}catch(i){await so(i)}}function cg(s,e,n){const i=ke(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Fa.forEach((c,f)=>{const m=f.view.Z_(e);m.snapshot&&o.push(m.snapshot)}),function(c,f){const m=ke(c);m.onlineState=f;let v=!1;m.queries.forEach((b,_)=>{for(const O of _.j_)O.Z_(f)&&(v=!0)}),v&&qh(m)}(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function c1(s,e,n){const i=ke(s);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Na.get(e),c=o&&o.key;if(c){let f=new rt(ge.comparator);f=f.insert(c,jt.newNoDocument(c,Ee.min()));const m=Ie().add(c),v=new au(Ee.min(),new Map,new rt(Fe),f,m);await Nm(i,v),i.Oa=i.Oa.remove(c),i.Na.delete(e),Kh(i)}else await dh(i.localStore,e,!1).then(()=>gh(i,e,n)).catch(so)}async function h1(s,e){const n=ke(s),i=e.batch.batchId;try{const o=await Sb(n.localStore,e);Am(n,i,null),Im(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await uo(n,o)}catch(o){await so(o)}}async function f1(s,e,n){const i=ke(s);try{const o=await function(c,f){const m=ke(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let b;return m.mutationQueue.lookupMutationBatch(v,f).next(_=>(Be(_!==null),b=_.keys(),m.mutationQueue.removeMutationBatch(v,_))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,b,f)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,b)).next(()=>m.localDocuments.getDocuments(v,b))})}(i.localStore,e);Am(i,e,n),Im(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await uo(i,o)}catch(o){await so(o)}}function Im(s,e){(s.ka.get(e)||[]).forEach(n=>{n.resolve()}),s.ka.delete(e)}function Am(s,e,n){const i=ke(s);let o=i.Ba[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function gh(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Ma.get(e))s.Fa.delete(i),n&&s.Ca.$a(i,n);s.Ma.delete(e),s.isPrimaryClient&&s.La.gr(e).forEach(i=>{s.La.containsKey(i)||Rm(s,i)})}function Rm(s,e){s.xa.delete(e.path.canonicalString());const n=s.Oa.get(e);n!==null&&(Ph(s.remoteStore,n),s.Oa=s.Oa.remove(e),s.Na.delete(n),Kh(s))}function hg(s,e,n){for(const i of n)i instanceof Tm?(s.La.addReference(i.key,e),d1(s,i)):i instanceof Cm?(le("SyncEngine","Document no longer in limbo: "+i.key),s.La.removeReference(i.key,e),s.La.containsKey(i.key)||Rm(s,i.key)):be()}function d1(s,e){const n=e.key,i=n.path.canonicalString();s.Oa.get(n)||s.xa.has(i)||(le("SyncEngine","New document in limbo: "+n),s.xa.add(i),Kh(s))}function Kh(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const e=s.xa.values().next().value;s.xa.delete(e);const n=new ge(et.fromString(e)),i=s.qa.next();s.Na.set(i,new n1(n)),s.Oa=s.Oa.insert(n,i),wm(s.remoteStore,new es(rr(eu(n.path)),i,"TargetPurposeLimboResolution",kh.oe))}}async function uo(s,e,n){const i=ke(s),o=[],c=[],f=[];i.Fa.isEmpty()||(i.Fa.forEach((m,v)=>{f.push(i.Ka(v,e,n).then(b=>{var _;if((b||n)&&i.isPrimaryClient){const O=b?!b.fromCache:(_=n==null?void 0:n.targetChanges.get(v.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(v.targetId,O?"current":"not-current")}if(b){o.push(b);const O=Oh.Wi(v.targetId,b);c.push(O)}}))}),await Promise.all(f),i.Ca.d_(o),await async function(m,v){const b=ke(m);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>H.forEach(v,O=>H.forEach(O.$i,F=>b.persistence.referenceDelegate.addReference(_,O.targetId,F)).next(()=>H.forEach(O.Ui,F=>b.persistence.referenceDelegate.removeReference(_,O.targetId,F)))))}catch(_){if(!io(_))throw _;le("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of v){const O=_.targetId;if(!_.fromCache){const F=b.os.get(O),q=F.snapshotVersion,J=F.withLastLimboFreeSnapshotVersion(q);b.os=b.os.insert(O,J)}}}(i.localStore,c))}async function p1(s,e){const n=ke(s);if(!n.currentUser.isEqual(e)){le("SyncEngine","User change. New user:",e.toKey());const i=await gm(n.localStore,e);n.currentUser=e,function(o,c){o.ka.forEach(f=>{f.forEach(m=>{m.reject(new ce(K.CANCELLED,c))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await uo(n,i.hs)}}function g1(s,e){const n=ke(s),i=n.Na.get(e);if(i&&i.va)return Ie().add(i.key);{let o=Ie();const c=n.Ma.get(e);if(!c)return o;for(const f of c){const m=n.Fa.get(f);o=o.unionWith(m.view.Va)}return o}}function Dm(s){const e=ke(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c1.bind(null,e),e.Ca.d_=Xb.bind(null,e.eventManager),e.Ca.$a=Zb.bind(null,e.eventManager),e}function m1(s){const e=ke(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f1.bind(null,e),e}class Wl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ou(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return kb(this.persistence,new bb,e.initialUser,this.serializer)}Ga(e){return new yb(Lh.Zr,this.serializer)}Wa(e){return new Ib}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wl.provider={build:()=>new Wl};class mh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>cg(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=p1.bind(null,this.syncEngine),await Wb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Jb}()}createDatastore(e){const n=ou(e.databaseInfo.databaseId),i=function(o){return new Lb(o)}(e.databaseInfo);return function(o,c,f,m){return new Mb(o,c,f,m)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(n,i,o,c,f){return new Fb(n,i,o,c,f)}(this.localStore,this.datastore,e.asyncQueue,n=>cg(this.syncEngine,n,0),function(){return ig.D()?new ig:new Ab}())}createSyncEngine(e,n){return function(i,o,c,f,m,v,b){const _=new r1(i,o,c,f,m,v);return b&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=ke(i);le("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await lo(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mh.provider={build:()=>new mh};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qh{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class y1{constructor(e,n,i,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=Vt.UNAUTHENTICATED,this.clientId=Ug.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,async f=>{le("FirestoreClient","Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(i,f=>(le("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Vh(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Gc(s,e){s.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener(async o=>{i.isEqual(o)||(await gm(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function fg(s,e){s.asyncQueue.verifyOperationInProgress();const n=await v1(s);le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener(i=>ag(e.remoteStore,i)),s.setAppCheckTokenChangeListener((i,o)=>ag(e.remoteStore,o)),s._onlineComponents=e}async function v1(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gc(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===K.FAILED_PRECONDITION||i.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Fi("Error using user provided cache. Falling back to memory cache: "+n),await Gc(s,new Wl)}}else le("FirestoreClient","Using default OfflineComponentProvider"),await Gc(s,new Wl);return s._offlineComponents}async function Lm(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),await fg(s,s._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),await fg(s,new mh))),s._onlineComponents}function w1(s){return Lm(s).then(e=>e.syncEngine)}async function Yl(s){const e=await Lm(s),n=e.eventManager;return n.onListen=s1.bind(null,e.syncEngine),n.onUnlisten=o1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=i1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=l1.bind(null,e.syncEngine),n}function b1(s,e,n={}){const i=new Sr;return s.asyncQueue.enqueueAndForget(async()=>function(o,c,f,m,v){const b=new Qh({next:O=>{b.Za(),c.enqueueAndForget(()=>Bh(o,_));const F=O.docs.has(f);!F&&O.fromCache?v.reject(new ce(K.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&O.fromCache&&m&&m.source==="server"?v.reject(new ce(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(O)},error:O=>v.reject(O)}),_=new $h(eu(f.path),b,{includeMetadataChanges:!0,_a:!0});return jh(o,_)}(await Yl(s),s.asyncQueue,e,n,i)),i.promise}function E1(s,e,n={}){const i=new Sr;return s.asyncQueue.enqueueAndForget(async()=>function(o,c,f,m,v){const b=new Qh({next:O=>{b.Za(),c.enqueueAndForget(()=>Bh(o,_)),O.fromCache&&m.source==="server"?v.reject(new ce(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(O)},error:O=>v.reject(O)}),_=new $h(f,b,{includeMetadataChanges:!0,_a:!0});return jh(o,_)}(await Yl(s),s.asyncQueue,e,n,i)),i.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Om(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dg=new Map;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Pm(s,e,n){if(!n)throw new ce(K.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function k1(s,e,n,i){if(e===!0&&i===!0)throw new ce(K.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function pg(s){if(!ge.isDocumentKey(s))throw new ce(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function gg(s){if(ge.isDocumentKey(s))throw new ce(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Hh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":be()}function mn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ce(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hh(s);throw new ce(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mg{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Om((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cu{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mg(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new z0;switch(n.type){case"firstParty":return new q0(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ce(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=dg.get(e);n&&(le("ComponentProvider","Removing Datastore"),dg.delete(e),n.terminate())}(this),Promise.resolve()}}function S1(s,e,n,i={}){var o;const c=(s=mn(s,cu))._getSettings(),f=`${e}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==f&&Fi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},c),{host:f,ssl:!1})),i.mockUserToken){let m,v;if(typeof i.mockUserToken=="string")m=i.mockUserToken,v=Vt.MOCK_USER;else{m=vv(i.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new ce(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Vt(b)}s._authCredentials=new V0(new Mg(m,v))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class co{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new co(this.firestore,e,this._query)}}class sn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class ss extends co{constructor(e,n,i){super(e,n,eu(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new ge(e))}withConverter(e){return new ss(this.firestore,e,this._path)}}function ts(s,e,...n){if(s=ir(s),Pm("collection","path",e),s instanceof cu){const i=et.fromString(e,...n);return gg(i),new ss(s,null,i)}{if(!(s instanceof sn||s instanceof ss))throw new ce(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(et.fromString(e,...n));return gg(i),new ss(s.firestore,null,i)}}function pn(s,e,...n){if(s=ir(s),arguments.length===1&&(e=Ug.newId()),Pm("doc","path",e),s instanceof cu){const i=et.fromString(e,...n);return pg(i),new sn(s,null,new ge(i))}{if(!(s instanceof sn||s instanceof ss))throw new ce(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(et.fromString(e,...n));return pg(i),new sn(s.firestore,s instanceof ss?s.converter:null,new ge(i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ym(this,"async_queue_retry"),this.Vu=()=>{const i=Hc();i&&le("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Hc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Hc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Sr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!io(e))throw e;le("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const o=function(c){let f=c.message||"";return c.stack&&(f=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),f}(i);throw Tr("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const o=zh.createAndSchedule(this,e,n,i,c=>this.yu(c));return this.Tu.push(o),o}fu(){this.Eu&&be()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function vg(s){return function(e,n){if(typeof e!="object"||e===null)return!1;const i=e;for(const o of n)if(o in i&&typeof i[o]=="function")return!0;return!1}(s,["next","error","complete"])}class xr extends cu{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new yg,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yg(e),this._firestoreClient=void 0,await e}}}function _1(s,e){const n=typeof s=="object"?s:x0(),i=typeof s=="string"?s:"(default)",o=S0(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=mv("firestore");c&&S1(o,...c)}return o}function ho(s){if(s._terminated)throw new ce(K.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||T1(s),s._firestoreClient}function T1(s){var e,n,i;const o=s._freezeSettings(),c=function(f,m,v,b){return new nw(f,m,v,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,Om(b.experimentalLongPollingOptions),b.useFetchStreams)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new y1(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}}(s._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $i{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $i(Ot.fromBase64String(e))}catch(n){throw new ce(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $i(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gh{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const C1=/^__.*__$/;class x1{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ls(e,this.data,this.fieldMask,n,this.fieldTransforms):new ao(e,this.data,n,this.fieldTransforms)}}class Mm{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ls(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Um(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class Jh{constructor(e,n,i,o,c,f){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.vu(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Jh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Jl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Um(this.Cu)&&C1.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class N1{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||ou(e)}Qu(e,n,i,o=!1){return new Jh({Cu:e,methodName:n,qu:i,path:Dt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xh(s){const e=s._freezeSettings(),n=ou(s._databaseId);return new N1(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Zh(s,e,n,i,o,c={}){const f=s.Qu(c.merge||c.mergeFields?2:0,e,n,o);ef("Data must be an object, but it was:",f,i);const m=Fm(i,f);let v,b;if(c.merge)v=new gn(f.fieldMask),b=f.fieldTransforms;else if(c.mergeFields){const _=[];for(const O of c.mergeFields){const F=yh(e,O,n);if(!f.contains(F))throw new ce(K.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);Vm(_,F)||_.push(F)}v=new gn(_),b=f.fieldTransforms.filter(O=>v.covers(O.field))}else v=null,b=f.fieldTransforms;return new x1(new nn(m),v,b)}class fu extends Gh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fu}}function I1(s,e,n,i){const o=s.Qu(1,e,n);ef("Data must be an object, but it was:",o,i);const c=[],f=nn.empty();qs(i,(v,b)=>{const _=tf(e,v,n);b=ir(b);const O=o.Nu(_);if(b instanceof fu)c.push(_);else{const F=du(b,O);F!=null&&(c.push(_),f.set(_,F))}});const m=new gn(c);return new Mm(f,m,o.fieldTransforms)}function A1(s,e,n,i,o,c){const f=s.Qu(1,e,n),m=[yh(e,i,n)],v=[o];if(c.length%2!=0)throw new ce(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<c.length;F+=2)m.push(yh(e,c[F])),v.push(c[F+1]);const b=[],_=nn.empty();for(let F=m.length-1;F>=0;--F)if(!Vm(b,m[F])){const q=m[F];let J=v[F];J=ir(J);const Z=f.Nu(q);if(J instanceof fu)b.push(q);else{const V=du(J,Z);V!=null&&(b.push(q),_.set(q,V))}}const O=new gn(b);return new Mm(_,O,f.fieldTransforms)}function du(s,e){if(zm(s=ir(s)))return ef("Unsupported field value:",e,s),Fm(s,e);if(s instanceof Gh)return function(n,i){if(!Um(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,i){const o=[];let c=0;for(const f of n){let m=du(f,i.Lu(c));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}}(s,e)}return function(n,i){if((n=ir(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Tw(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=bt.fromDate(n);return{timestampValue:Hl(i.serializer,o)}}if(n instanceof bt){const o=new bt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Hl(i.serializer,o)}}if(n instanceof Wh)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof $i)return{bytesValue:lm(i.serializer,n._byteString)};if(n instanceof sn){const o=i.databaseId,c=n.firestore._databaseId;if(!c.isEqual(o))throw i.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Rh(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Yh)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(f=>{if(typeof f!="number")throw c.Bu("VectorValues must only contain numeric values.");return Nh(c.serializer,f)})}}}}}}(n,i);throw i.Bu(`Unsupported field value: ${Hh(n)}`)}(s,e)}function Fm(s,e){const n={};return Fg(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qs(s,(i,o)=>{const c=du(o,e.Mu(i));c!=null&&(n[i]=c)}),{mapValue:{fields:n}}}function zm(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof bt||s instanceof Wh||s instanceof $i||s instanceof sn||s instanceof Gh||s instanceof Yh)}function ef(s,e,n){if(!zm(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=Hh(n);throw i==="an object"?e.Bu(s+" a custom object"):e.Bu(s+" "+i)}}function yh(s,e,n){if((e=ir(e))instanceof hu)return e._internalPath;if(typeof e=="string")return tf(s,e);throw Jl("Field path arguments must be of type string or ",s,!1,void 0,n)}const R1=new RegExp("[~\\*/\\[\\]]");function tf(s,e,n){if(e.search(R1)>=0)throw Jl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new hu(...e.split("."))._internalPath}catch{throw Jl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Jl(s,e,n,i,o){const c=i&&!i.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(c||f)&&(v+=" (found",c&&(v+=` in field ${i}`),f&&(v+=` in document ${o}`),v+=")"),new ce(K.INVALID_ARGUMENT,m+s+v)}function Vm(s,e){return s.some(n=>n.isEqual(e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jm{constructor(e,n,i,o,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new D1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class D1 extends jm{data(){return super.data()}}function Bm(s,e){return typeof e=="string"?tf(s,e):e instanceof hu?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qm(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ce(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class L1{convertValue(e,n="none"){switch(Bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return qs(e,(o,c)=>{i[o]=this.convertValue(c,n)}),i}convertVectorValue(e){var n,i,o;const c=(o=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(f=>ut(f.doubleValue));return new Yh(c)}convertGeoPoint(e){return new Wh(ut(e.latitude),ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=_h(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Za(e));default:return null}}convertTimestamp(e){const n=as(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=et.fromString(e);Be(pm(i));const o=new eo(i.get(1),i.get(3)),c=new ge(i.popFirst(5));return o.isEqual(n)||Tr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nf(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ka{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $m extends jm{constructor(e,n,i,o,c,f){super(e,n,i,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Bm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Fl extends $m{data(e={}){return super.data(e)}}class Km{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ka(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Fl(this._firestore,this._userDataWriter,i.key,i,new Ka(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(f=>{const m=new Fl(i._firestore,i._userDataWriter,f.doc.key,f.doc,new Ka(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(f=>o||f.type!==3).map(f=>{const m=new Fl(i._firestore,i._userDataWriter,f.doc.key,f.doc,new Ka(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);let v=-1,b=-1;return f.type!==0&&(v=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),b=c.indexOf(f.doc.key)),{type:O1(f.type),doc:m,oldIndex:v,newIndex:b}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function O1(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Dl(s){s=mn(s,sn);const e=mn(s.firestore,xr);return b1(ho(e),s._key).then(n=>Qm(e,s,n))}class rf extends L1{constructor(e){super(),this.firestore=e}convertBytes(e){return new $i(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,n)}}function Ll(s){s=mn(s,co);const e=mn(s.firestore,xr),n=ho(e),i=new rf(e);return qm(s._query),E1(n,s._query).then(o=>new Km(e,i,s,o))}function Us(s,e,n){s=mn(s,sn);const i=mn(s.firestore,xr),o=nf(s.converter,e,n);return pu(i,[Zh(Xh(i),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,rn.none())])}function P1(s){return pu(mn(s.firestore,xr),[new iu(s._key,rn.none())])}function M1(s,e){const n=mn(s.firestore,xr),i=pn(s),o=nf(s.converter,e);return pu(n,[Zh(Xh(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,rn.exists(!1))]).then(()=>i)}function Wc(s,...e){var n,i,o;s=ir(s);let c={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||vg(e[f])||(c=e[f],f++);const m={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(vg(e[f])){const O=e[f];e[f]=(n=O.next)===null||n===void 0?void 0:n.bind(O),e[f+1]=(i=O.error)===null||i===void 0?void 0:i.bind(O),e[f+2]=(o=O.complete)===null||o===void 0?void 0:o.bind(O)}let v,b,_;if(s instanceof sn)b=mn(s.firestore,xr),_=eu(s._key.path),v={next:O=>{e[f]&&e[f](Qm(b,s,O))},error:e[f+1],complete:e[f+2]};else{const O=mn(s,co);b=mn(O.firestore,xr),_=O._query;const F=new rf(b);v={next:q=>{e[f]&&e[f](new Km(b,F,O,q))},error:e[f+1],complete:e[f+2]},qm(s._query)}return function(O,F,q,J){const Z=new Qh(J),V=new $h(F,Z,q);return O.asyncQueue.enqueueAndForget(async()=>jh(await Yl(O),V)),()=>{Z.Za(),O.asyncQueue.enqueueAndForget(async()=>Bh(await Yl(O),V))}}(ho(b),_,m,v)}function pu(s,e){return function(n,i){const o=new Sr;return n.asyncQueue.enqueueAndForget(async()=>u1(await w1(n),i,o)),o.promise}(ho(s),e)}function Qm(s,e,n){const i=n.docs.get(e._key),o=new rf(s);return new $m(s,o,e._key,i,new Ka(n.hasPendingWrites,n.fromCache),e.converter)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class U1{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Xh(e)}set(e,n,i){this._verifyNotCommitted();const o=Yc(e,this._firestore),c=nf(o.converter,n,i),f=Zh(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,i);return this._mutations.push(f.toMutation(o._key,rn.none())),this}update(e,n,i,...o){this._verifyNotCommitted();const c=Yc(e,this._firestore);let f;return f=typeof(n=ir(n))=="string"||n instanceof hu?A1(this._dataReader,"WriteBatch.update",c._key,n,i,o):I1(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(f.toMutation(c._key,rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Yc(e,this._firestore);return this._mutations=this._mutations.concat(new iu(n._key,rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yc(s,e){if((s=ir(s)).firestore!==e)throw new ce(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function F1(s){return ho(s=mn(s,xr)),new U1(s,e=>pu(s,e))}(function(s,e=!0){(function(n){Qi=n})(C0),jl(new Ya("firestore",(n,{instanceIdentifier:i,options:o})=>{const c=n.getProvider("app").getImmediate(),f=new xr(new j0(n.getProvider("auth-internal")),new K0(n.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ce(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eo(m.options.projectId,v)}(c,i),c);return o=Object.assign({useFetchStreams:e},o),f._setSettings(o),f},"PUBLIC").setMultipleInstances(!0)),Mi(Mp,"4.7.3",s),Mi(Mp,"4.7.3","esm2017")})();const z1={apiKey:"AIzaSyBbk4SiSqWANAiet8EVvTrIC21aAWBvg",authDomain:"myattendanceproject-45c1b.firebaseapp.com",projectId:"myattendanceproject-45c1b",storageBucket:"myattendanceproject-45c1b.appspot.com",messagingSenderId:"601661458034",appId:"1:601661458034:web:8134e270349f9a0b3a3c97"},V1=xg(z1),lt=_1(V1);function j1(){const[s,e]=je.useState([]),[n,i]=je.useState([]),[o,c]=je.useState([]),[f,m]=je.useState(null),[v,b]=je.useState(!1),[_,O]=je.useState(""),[F,q]=je.useState(null);je.useEffect(()=>{const V=Wc(ts(lt,"point_shop"),_e=>e(_e.docs.map(ve=>({id:ve.id,...ve.data()})))),Se=Wc(ts(lt,"point_logs"),_e=>i(_e.docs.map(ve=>({id:ve.id,...ve.data()})))),me=Wc(ts(lt,"students"),_e=>c(_e.docs.map(ve=>({id:ve.id,...ve.data()}))));return()=>{V(),Se(),me()}},[]);const J=async()=>{const V=o.find(me=>{const _e=(me.birth||"").slice(-4),ve=(me.parentPhone||"").slice(-4);return _e+ve===_});if(!V){alert("학생 인증 실패! 생일 4자리 + 엄마번호 뒤 4자리를 확인해주세요.");return}if((V.availablePoints||0)<f.point)return alert("포인트가 부족합니다");if(!window.confirm(`현재 가용 포인트는 ${V.availablePoints}pt입니다. ${f.point}pt를 사용하시겠습니까?`))return;const Se={studentId:V.id,name:V.name,item:f.name,point:f.point,date:new Date().toISOString().split("T")[0]};await M1(ts(lt,"point_logs"),Se),await Us(pn(lt,"students",V.id),{availablePoints:(V.availablePoints||0)-f.point},{merge:!0}),b(!1),q(V),setTimeout(()=>q(null),5e3)},Z=async V=>{if(prompt("관리자 비밀번호를 입력하세요")!=="ys0246")return alert("비밀번호가 틀립니다.");const Se=o.find(me=>me.id===V.studentId);Se&&(await P1(pn(lt,"point_logs",V.id)),await Us(pn(lt,"students",Se.id),{availablePoints:(Se.availablePoints||0)+V.point},{merge:!0}))};return W.jsxs("div",{className:"flex",children:[W.jsxs("div",{className:"w-2/3 relative",children:[W.jsx("p",{className:"text-sm mb-1 text-blue-700",children:"📣 생일 4자리 + 엄마번호 4자리로 인증 후 사용"}),W.jsx("p",{className:"text-sm mb-2 text-gray-600",children:"🎲 랜덤 Lucky 2pt는 수업 10분 전 ~ 5분 후까지! 지각 시 0pt"}),F&&W.jsxs("div",{className:"text-green-600 font-bold mb-3",children:["✅ ",F.name,"님 ",f==null?void 0:f.point,"pt 사용 완료!"]}),W.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.map(V=>W.jsxs("div",{className:"text-center relative",children:[W.jsx("img",{src:V.imageUrl,alt:V.name,className:"w-full h-32 object-cover rounded shadow"}),W.jsx("div",{className:"text-sm font-semibold mt-1",children:V.name}),W.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[V.point,"pt"]}),W.jsx("button",{className:"text-xs bg-blue-600 text-white px-3 py-1 rounded shadow",onClick:()=>{m(V),b(!0)},children:"사용"})]},V.id))})]}),W.jsxs("div",{className:"w-1/3 pl-4 border-l",children:[W.jsx("h3",{className:"text-lg font-bold mb-2",children:"🧾 사용 내역"}),n.map(V=>W.jsxs("div",{className:"text-sm border-b py-1 flex justify-between items-center",children:[W.jsxs("div",{children:[V.name," - ",V.item," - ",V.point,"pt",W.jsx("div",{className:"text-xs text-gray-500",children:V.date})]}),W.jsx("button",{className:"text-red-500 text-xs",onClick:()=>Z(V),children:"삭제"})]},V.id))]}),v&&f&&W.jsxs(W.Fragment,{children:[W.jsx("div",{className:"fixed inset-0 z-40",style:{backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(2px)"}}),W.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 text-center",style:{backgroundColor:"white",width:"480px",padding:"2rem",borderRadius:"1rem",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.2)",border:"2px solid #ccc"},children:[W.jsxs("h2",{className:"text-xl font-bold text-blue-700 mb-4",style:{backgroundColor:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem"},children:["✅ ",f.name," - ",f.point,"pt 사용"]}),W.jsx("input",{type:"text",value:_,onChange:V=>O(V.target.value),placeholder:"생일4 + 엄마번호4",maxLength:8,className:"w-full p-2 border rounded mb-4 text-center",style:{backgroundColor:"#fff"}}),W.jsxs("div",{className:"flex justify-between gap-4",children:[W.jsx("button",{onClick:()=>{b(!1),m(null),O("")},className:"bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded w-1/2",children:"취소"}),W.jsx("button",{onClick:J,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded w-1/2",children:"사용하기"})]})]})]})]})}function B1(){const[s,e]=je.useState([]),[n,i]=je.useState({}),[o,c]=je.useState([]),[f,m]=je.useState("attendance"),[v,b]=je.useState({}),[_,O]=je.useState(""),[F,q]=je.useState(localStorage.getItem("authenticated")==="true"),[J,Z]=je.useState(new Date),[V,Se]=je.useState(0),[me,_e]=je.useState(null),[ve,We]=je.useState(!1),[Re,I]=je.useState([]),[k,T]=je.useState({}),N=Object.keys(n).length,A=J.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});[...s].sort((B,X)=>B.name.localeCompare(X.name));const D=["출석","숙제","수업태도","시험","문제집완료"],S=new Date,Ke=S.toISOString().split("T")[0],ft=["일","월","화","수","목","금","토"][S.getDay()];je.useEffect(()=>{(async()=>{const B=(await Ll(ts(lt,"students"))).docs.map(Me=>({id:Me.id,...Me.data()})),X=F1(lt);B.forEach(Me=>{if(typeof Me.points=="number"){const Bt={출석:Me.points,숙제:0,수업태도:0,시험:0,문제집완료:0};X.set(pn(lt,"students",Me.id),{points:Bt},{merge:!0}),Me.points=Bt}else D.forEach(Bt=>{(!Me.points||Me.points[Bt]===void 0)&&(Me.points||(Me.points={}),Me.points[Bt]=0)})}),await X.commit(),e(B);const ie=pn(lt,"attendance",Ke),ye=await Dl(ie);ye.exists()&&i(ye.data());const Qe=(await Ll(ts(lt,"makeups"))).docs.map(Me=>({id:Me.id,...Me.data()})).filter(Me=>Me.date===Ke);c(Qe)})()},[]);const[dt,Ve]=je.useState([]);je.useEffect(()=>{(async()=>{const B=(await Ll(ts(lt,"schedule_changes"))).docs.map(X=>({id:X.id,...X.data()}));Ve(B)})()},[]),je.useEffect(()=>{(async()=>{const B=(await Ll(ts(lt,"students_high"))).docs.map(X=>({id:X.id,...X.data()}));I(B)})()},[]),je.useEffect(()=>{(async()=>{const B=new Date().toISOString().split("T")[0],X=await Dl(pn(lt,"high-attendance",B));X.exists()&&T(X.data())})()},[]);const te=(B,X)=>{const ie=dt.filter(ye=>ye.studentId===B).filter(ye=>ye.effectiveDate<=X);if(ie.length===0){const ye=s.find(Qe=>Qe.id===B);return(ye==null?void 0:ye.schedules)||[]}return ie.sort((ye,Qe)=>Qe.effectiveDate.localeCompare(ye.effectiveDate)),ie[0].schedules},fe=()=>{const B={},X=S.toISOString().split("T")[0];return s.forEach(ie=>{ie.active===!1||ie.pauseDate&&ie.pauseDate<=X||te(ie.id,X).forEach(({day:ye,time:Qe})=>{ye===ft&&(B[Qe]||(B[Qe]=[]),B[Qe].push(ie))})}),B},ne=je.useMemo(()=>fe(),[s,dt]);je.useEffect(()=>{(async()=>{const B=new Date().toISOString().split("T")[0],X=pn(lt,"dailyLucky",B),ie=await Dl(X);if(ie.exists()){const ye=ie.data();_e(ye.name)}})()},[]);const R=async(B,X)=>{var ie;const ye=new Date().toISOString().split("T")[0],Qe=n[B.name];if(Qe&&(Qe.status==="onTime"||Qe.status==="tardy")){alert("이미 출석 처리된 학생입니다.");return}if(prompt(`${B.name} 생일 뒷 4자리를 입력하세요 (예: 0412)`)!==((ie=B.birth)==null?void 0:ie.slice(-4))){alert("생일이 일치하지 않습니다.");return}const Me=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),[Bt,Nr]=X.split(":"),Ir=new Date;Ir.setHours(+Bt,+Nr,0);const Nn=(new Date-Ir)/6e4;let In=0,Kn="onTime",yn=!1;if(Nn>15)Kn="tardy",In=0;else if(Nn>=-10&&Nn<=5){const st=pn(lt,"dailyLucky",ye);(await Dl(st)).exists()?In=1:(In=2,yn=!0,await Us(st,{name:B.name,time:Me}))}else Nn>=-15&&Nn<-10&&(In=1);await Us(pn(lt,"attendance",ye),{[B.name]:{time:Me,status:Kn}},{merge:!0}),i(st=>({...st,[B.name]:{time:Me,status:Kn}}));const an={...B.points,출석:(B.points.출석||0)+In};await Us(pn(lt,"students",B.id),{points:an},{merge:!0}),e(st=>st.map(Ht=>Ht.id===B.id?{...Ht,points:an}:Ht)),b(st=>({...st,[B.name]:!0})),setTimeout(()=>b(st=>({...st,[B.name]:!1})),1500),yn?(_e(B.name),We(!0),setTimeout(()=>We(!1),2500),alert(`🎉 Lucky!!! ${B.name}님 2pt 당첨!`)):alert(`✅ ${B.name}님 출석 완료! (+${In}pt)`),e(st=>st.map(Ht=>Ht.id===B.id?{...Ht,points:an}:Ht)),b(st=>({...st,[B.name]:!0})),setTimeout(()=>b(st=>({...st,[B.name]:!1})),1500),alert(`✅ ${B.name}님 출석 완료! (+1pt)`)},j=()=>{_==="1234"?(q(!0),localStorage.setItem("authenticated","true")):alert("비밀번호가 틀렸습니다.")},he=()=>{q(!1),localStorage.removeItem("authenticated")};if(!F)return W.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:W.jsxs("div",{className:"bg-white p-6 rounded shadow-md",children:[W.jsx("input",{type:"password",placeholder:"출석 체크 비밀번호",className:"border p-2 mr-2",value:_,onChange:B=>O(B.target.value)}),W.jsx("button",{onClick:j,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"로그인"})]})});const Ce=async B=>{const X=n[B];if(prompt("지각 상태입니다. 선생님 비밀번호를 입력하세요")==="0301"){const ie={time:X.time,status:"onTime"};await Us(pn(lt,"attendance",Ke),{[B]:ie},{merge:!0}),i(ye=>({...ye,[B]:ie})),alert(`${B}님의 출석 상태가 초록으로 변경되었습니다!`)}},Te=B=>D.reduce((X,ie)=>X+(B[ie]||0),0),Ne=B=>!Array.isArray(s)||s.length===0?[]:[...s].map(X=>{var ie;return{name:X.name,value:((ie=X.points)==null?void 0:ie[B])||0}}).sort((X,ie)=>ie.value-X.value).slice(0,5),Le=async B=>{var X;if(prompt(`${B.name} 생일 뒷 4자리를 입력하세요 (예: 0412)`)!==((X=B.birth)==null?void 0:X.slice(-4))){alert("생일이 일치하지 않습니다.");return}const ie=new Date,ye=ie.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Qe=ie.toISOString().split("T")[0];await Us(pn(lt,"high-attendance",Qe),{[B.name]:{time:ye,status:"출석"}},{merge:!0}),T(Me=>({...Me,[B.name]:{time:ye,status:"출석"}})),alert(`✅ ${B.name}님 고등부 출석 완료!`)};return W.jsxs(W.Fragment,{children:[ve&&W.jsxs("div",{className:"fixed top-10 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-white text-2xl font-bold px-6 py-3 rounded shadow-lg z-50 animate-bounce",children:["🎉 Lucky!!! ",me,"님 2pt!"]}),W.jsxs("div",{className:"flex items-center gap-2 justify-center text-sm text-blue-700 bg-blue-100 px-4 py-2 rounded mb-4",children:[W.jsx("span",{children:"📣"}),W.jsxs("div",{children:[W.jsx("div",{children:"생일 4자리 입력시 출석완료!"}),W.jsx("div",{children:" 랜덤 Lucky 2pt는 10분전~5분후까지만! 지각시 0pt"})]})]}),W.jsxs("div",{className:"bg-gray-100 min-h-screen p-6",children:[W.jsxs("div",{className:"max-w-5xl mx-auto flex space-x-4 mb-6",children:[W.jsx("button",{className:`px-4 py-2 rounded ${f==="attendance"?"bg-blue-500 text-white":"bg-white text-gray-700"}`,onClick:()=>m("attendance"),children:"출석 체크"}),W.jsx("button",{onClick:()=>m("ranking"),className:`px-4 py-2 rounded ${f==="ranking"?"bg-blue-500 text-white":"bg-white text-gray-700"}`,children:"포인트 랭킹"}),W.jsx("button",{className:`px-4 py-2 rounded ${f==="shop"?"bg-blue-500 text-white":"bg-white text-gray-700"}`,onClick:()=>m("shop"),children:"포인트상점"})]}),f==="attendance"&&W.jsxs(W.Fragment,{children:[W.jsxs("div",{className:"max-w-5xl mx-auto flex justify-between items-center mb-8",children:[W.jsxs("div",{children:[W.jsxs("h1",{className:"text-3xl font-bold mb-2 text-gray-700",children:["📌 출석 체크 - ",ft,"요일"]}),W.jsxs("div",{className:"text-gray-600",children:["📅 ",Ke," / ⏰ ",A," / ✅ 출석 인원: ",N]}),W.jsxs("div",{className:"text-center text-lg text-yellow-600 font-bold mb-4",children:["🎉 오늘의 Lucky 당첨자: ",me?`${me}님`:"아직 없음"]})]}),W.jsx("button",{onClick:he,className:"bg-red-400 text-white px-4 py-2 rounded",children:"로그아웃"})]}),Object.keys(ne).sort().map(B=>W.jsxs("div",{className:"max-w-5xl mx-auto mb-6 bg-white p-4 rounded-lg shadow-md",children:[W.jsxs("h2",{className:"text-xl font-semibold mb-4 border-b pb-2 text-gray-800",children:[B," 수업"]}),W.jsx("div",{className:"grid grid-cols-6 gap-4",children:ne[B].map(X=>{const ie=n[X.name],ye=ie&&(ie.status==="onTime"||ie.status==="tardy"),Qe=v[X.name];return W.jsxs("div",{className:`
        card
        ${ye?ie.status==="tardy"?"tardy":"attended":""}
        ${Qe?"animated":""}
        ${ye?"cursor-not-allowed opacity-80":"cursor-pointer hover:shadow-lg"}
      `,onClick:()=>{ye?ie.status==="tardy"&&Ce(X.name):R(X,B)},children:[X.name===me&&W.jsx("div",{className:"text-3xl text-yellow-500 text-center mb-1",children:"👑"}),W.jsxs("div",{className:"text-right text-xs font-semibold text-gray-700 leading-none mb-1",children:["총 ",Te(X.points),"pt",W.jsx("br",{}),W.jsxs("span",{className:"text-green-600",children:["가용 ",X.availablePoints??Te(X.points),"pt"]})]}),W.jsx("p",{className:"name m-0 leading-none mb-1",children:X.name}),ye&&W.jsxs("p",{className:"time-text m-0 leading-none mt-1",children:[ie.status==="tardy"?"⚠️ 지각":"✅ 출석",W.jsx("br",{}),ie.time]})]},X.id)})})]},B)),W.jsxs("div",{className:"max-w-5xl mx-auto mt-8",children:[W.jsx("h2",{className:"text-xl font-bold mb-4",children:"🎓 고등부 출석"}),W.jsx("div",{className:"grid grid-cols-6 gap-4",children:Re.map(B=>{const X=k[B.name],ie=(X==null?void 0:X.status)==="출석";return W.jsxs("div",{className:`card ${ie?"attended":""} cursor-pointer hover:shadow-lg`,onClick:()=>Le(B),children:[W.jsx("p",{className:"name m-0 leading-none mb-1",children:B.name}),ie&&W.jsxs("p",{className:"time-text m-0 leading-none mt-1",children:["✅ 출석",W.jsx("br",{}),X.time]})]},B.id)})})]})]}),f==="ranking"&&W.jsxs("div",{className:"max-w-5xl mx-auto bg-white p-6 rounded-lg shadow-md",children:[W.jsx("h2",{className:"text-xl font-semibold mb-4",children:"🏆 포인트 랭킹 (실시간)"}),W.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:D.map(B=>{const X=Ne(B);return W.jsxs("div",{className:"bg-gray-50 p-4 border rounded shadow",children:[W.jsxs("h4",{className:"font-bold text-center mb-2",children:[B," TOP 5"]}),W.jsx("ol",{className:"text-sm space-y-1",children:[...Array(5)].map((ie,ye)=>W.jsxs("li",{children:[ye+1,"등"," ",X[ye]?W.jsxs(W.Fragment,{children:[W.jsx("b",{children:X[ye].name})," (",X[ye].value,"pt)"]}):W.jsx("span",{className:"text-gray-400",children:"-"})]},ye))})]},B)})}),W.jsx("h3",{className:"text-lg font-bold mt-8 mb-2",children:"💯 총합 TOP 5"}),W.jsx("ol",{className:"text-sm space-y-1",children:[...Array(5)].map((B,X)=>{const ie=[...s].map(ye=>({name:ye.name,total:Te(ye.points)})).sort((ye,Qe)=>Qe.total-ye.total);return W.jsxs("li",{children:[X+1,"등"," ",ie[X]?W.jsxs(W.Fragment,{children:[W.jsx("b",{children:ie[X].name})," (",ie[X].total,"pt)"]}):W.jsx("span",{className:"text-gray-400",children:"-"})]},X)})})]}),f==="shop"&&W.jsx(j1,{})]})]})}av.createRoot(document.getElementById("root")).render(W.jsx(Zy.StrictMode,{children:W.jsx(B1,{})}));
